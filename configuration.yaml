homeassistant:
  packages: !include_dir_named packages
  allowlist_external_dirs:
    - www
  allowlist_external_urls:
    - https://api.openai.com/v1/
  auth_providers:
    - type: homeassistant
    - type: trusted_networks
      trusted_networks:
        - 192.168.0.0/24
      allow_bypass_login: true

default_config: {}

recorder:
  db_url: mysql://homeassistant:password@core-mariadb/homeassistant?charset=utf8mb4
  purge_keep_days: 3  # Reduced from 7 to 3 days to minimize database growth
  auto_purge: true
  commit_interval: 10  # Optimize commit frequency for better performance
  exclude:
    domains:
      - automation
      - script
      - mqtt
      - update
      - device_tracker
      - weather
      - calendar
      - media_player
    entities:
      # Exclude frequently changing sensors that don't need history
      # Removed sensor.ai_exec_log_recent as sensor may not be loading
      # - sensor.ai_exec_log_recent
      - sensor.yaml_validation_status
      - sensor.includes_validation_status
      - sensor.automation_validation_status
      - sensor.last_validation_check
      # Removed sensor.local_flask_status_code as sensor may not be loading
      # - sensor.local_flask_status_code
      # Removed systemmonitor sensors as platform is commented out
      # - sensor.time
      # - sensor.date
      # - sensor.date_time
      # - sensor.date_time_iso
      # - sensor.timestamp
    entity_globs:
      # Exclude command-line sensors that update frequently
      - sensor.command_line_*
      # Exclude Bluetooth-related sensors that may be noisy
      - sensor.bluetooth_*
      # Exclude high-frequency Zigbee sensors
      - sensor.*_linkquality
      - sensor.*_last_seen
      - sensor.*_lqi
      - sensor.*_battery
      - sensor.*_voltage
      - sensor.*_current
      - sensor.*_power
      - sensor.*_energy
      - sensor.*_illuminance
      - sensor.*_temperature
      - sensor.*_humidity
      - sensor.*_pressure
      - sensor.*_distance
      - sensor.*_motion
      - sensor.*_contact
      - sensor.*_occupancy
      - sensor.*_smoke
      - sensor.*_co
      - sensor.*_co2
      - sensor.*_gas
      - sensor.*_water_leak
      - sensor.*_vibration
      # Exclude system monitoring sensors
      - sensor.cpu_*
      - sensor.memory_*
      - sensor.load_*
      - sensor.disk_*
      - sensor.network_*
      - sensor.uptime
      # Removed sensor.processes as systemmonitor platform is commented out
      # - sensor.processes
      - sensor.swap_*
      # Exclude MQTT status sensors
      - sensor.mqtt_*
      # Exclude weather sensors (they update frequently)
      - sensor.weather_*
      - sensor.forecast_*
      # Exclude media player status
      - sensor.media_player_*
      # Exclude calendar sensors
      - sensor.calendar_*
      # Exclude update sensors
      - sensor.update_*
      # Exclude device tracker sensors
      - sensor.device_tracker_*

logbook:
  exclude:
    domains:
      - automation
      - script
      - mqtt
      - update
      - device_tracker
      - weather
      - calendar
      - media_player
    entity_globs:
      - sensor.*_linkquality
      - sensor.*_last_seen
      - sensor.*_battery
      - sensor.*_temperature
      - sensor.*_humidity
      - sensor.*_motion
      - sensor.*_contact
      - sensor.cpu_*
      - sensor.memory_*
      - sensor.mqtt_*

history:
  exclude:
    domains:
      - automation
      - script
      - mqtt
      - update
      - device_tracker
      - weather
      - calendar
      - media_player
    entity_globs:
      - sensor.*_linkquality
      - sensor.*_last_seen
      - sensor.*_battery
      - sensor.*_temperature
      - sensor.*_humidity
      - sensor.*_motion
      - sensor.*_contact
      - sensor.cpu_*
      - sensor.memory_*
      - sensor.mqtt_*

# Disable Bluetooth advertisement monitoring to prevent console spam and performance issues
# bluetooth:
#   advertisement_monitor: false

bluetooth:

lovelace:
  mode: storage
  dashboards:
    tv-schedule:
      mode: yaml
      title: "üì∫ TV Schedule"
      icon: mdi:television
      show_in_sidebar: true
      filename: dashboards/tv_schedule.yaml
    climate-control:
      mode: yaml
      title: "üå°Ô∏è Climate Control"
      icon: mdi:home-thermometer
      show_in_sidebar: true
      filename: dashboards/climate_control.yaml

input_boolean: !include_dir_merge_named includes/input_booleans/
input_text: !include_dir_merge_named includes/input_texts/
input_number: !include_dir_merge_named includes/input_numbers/
input_datetime: !include_dir_merge_named includes/input_datetimes/
input_select: !include_dir_merge_named includes/input_selects/
input_button: !include_dir_merge_named includes/input_buttons/

automation: !include_dir_merge_list includes/automations/
script: !include_dir_merge_named includes/scripts/
scene: !include includes/scenes/scenes.yaml
template: !include_dir_merge_list includes/templates/
sensor: !include_dir_merge_list includes/sensors/
binary_sensor: !include_dir_merge_list includes/binary_sensors/
notify: !include_dir_merge_list includes/notify/
shell_command: !include_dir_merge_named includes/shell_commands/
rest_command: !include includes/rest_commands/rest.yaml
counter: !include_dir_merge_named includes/counters/
timer: !include_dir_merge_named includes/timers/
#camera: !include camera.yaml TBC as hashed out for speedier platform...

# Xiaomi Cloud Map Extractor for vacuum maps
# xiaomi_cloud_map_extractor:
#   username: !secret xiaomi_username
#   password: !secret xiaomi_password

# MQTT integration for device discovery
# NOTE: Broker configuration moved to UI in HA 2025.x
# Go to: Settings ‚Üí Devices & Services ‚Üí Add Integration ‚Üí MQTT
# Enter: Host: core-mosquitto, Port: 1883, Username: homeassistant, Password: Donkey123

# Manual MQTT entities (devices not using discovery)
mqtt:
  # Add manual MQTT entities here if needed
  # Example:
  # sensor:
  #   - name: "My MQTT Sensor"
  #     state_topic: "home/mydevice/sensor/state"
  #     unit_of_measurement: "¬∞C"

# MQTT Discovery Stream for enhanced MQTT device management
# mqtt_discoverystream_ha: {}  # Commented out - install via HACS if needed

# Auto Backup for automated configuration backups
# auto_backup:
#   auto_purge: true
#   backup_time: "02:00"

# Browser Mod for enhanced browser control and notifications
browser_mod: {}

# Tado smart thermostat integration
# tado:
#   username: !secret tado_username
#   password: !secret tado_password

# TV Calendar from tvcal.app
# calendar:
#   - platform: ical
#     name: "TV Schedule Calendar"
#     url: "https://tvcal.app/ical/326blc"

# Speedtest Tracker for internet performance monitoring
# speedtestdotnet:
#   scan_interval:
#     minutes: 30
#   monitored_conditions:
#     - ping
#     - download
#     - upload

# System Monitor for host system resource monitoring
# sensor:
#   - platform: systemmonitor
#     resources:
#       - type: disk_use_percent
#       - type: memory_use_percent
#       - type: processor_use


python_script: {}

frontend:
  themes: !include_dir_merge_named themes
  extra_module_url: !include resources.yaml

logger:
  default: info
  logs:
    homeassistant.core: info
    homeassistant.components.automation: info
    homeassistant.components.script: info

tts:
  - platform: google_translate
    service_name: google_say

# Matter (Smart Home Protocol) - Add devices once, control everywhere
# Supports cross-platform control: HA, Apple Home, Google Home, Alexa, etc.
matter:
  # Thread border router (optional - for Thread devices)
  # thread:
  #   - usb_device: /dev/ttyACM0  # Your Thread border router device

# Google Assistant integration for Matter device control
# google_assistant:
#   project_id: !secret google_assistant_project_id
#   service_account: !secret google_assistant_service_account

# Alexa integration for Matter device control
# alexa:
#   smart_home: {}

# Apple HomeKit integration for Matter device control
# homekit:
#   - name: "Home Assistant Bridge"
#     port: 21063
#     filter:
#       include_domains:
#         - light
#         - switch
#         - climate
#         - cover
#         - fan
#         - lock
#       include_entities:
#         - light.matter_*
#         - switch.matter_*
#         - climate.matter_*
#     entity_config:
#       light.matter_bulb:
#         name: "Matter Bulb"
#       switch.matter_plug:
#         name: "Matter Plug"


