title: "ðŸ§  AI Monitoring & Repair"
views:
  - title: "System Health"
    path: system_health
    cards:
      - type: entities
        title: "Core Monitoring"
        entities:
          - sensor.hacs_status
          - sensor.zigbee_mesh_lqi
          - sensor.mqtt_status
          - sensor.automation_health
          - sensor.watchman_orphans
          - sensor.restart_safety_score
          - sensor.ai_agent_health
      - type: custom:config-template-card
        entities: []
        card:
          type: markdown
          content: |
            ### AI Repair Log
            {% raw %}
            {{ state_attr('sensor.ai_exec_log', 'log') }}
            {% endraw %}

      - type: custom:state-switch
        entity: input_boolean.ai_workspace_active
        states:
          'on':
            type: entities
            title: "AI Workspace Active"
            entities:
              - sensor.ai_agent_health
              - sensor.restart_safety_score
          'off':
            type: markdown
            content: "AI Workspace is not active. Activate to view advanced health metrics."
      - type: button
        name: "Manual Zigbee Repair"
        tap_action:
          action: call-service
          service: script.zigbee_repair_protocol
          service_data:
            device_id: "<device_id>"
      - type: button
        name: "Clear MQTT Topics"
        tap_action:
          action: call-service
          service: shell_command.clear_mqtt_topics
