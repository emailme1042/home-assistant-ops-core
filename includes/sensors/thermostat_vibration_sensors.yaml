# Thermostat Vibration Sensors for Heating Demand Detection
# Add these to includes/sensors/boiler_usage_detection.yaml

template:
  - sensor:
      name: "Upstairs Thermostat Vibration"
      unique_id: thermostat_upstairs_vibration
      state: >
        {% if states('binary_sensor.aqara_vibration_sensor_occupancy') == 'on' %}
          {# Check if vibration is near upstairs thermostat location #}
          {# This would need location-based filtering or separate sensors #}
          on
        {% else %}
          off
        {% endif %}
      device_class: vibration

  - sensor:
      name: "Downstairs Thermostat Vibration"
      unique_id: thermostat_downstairs_vibration
      state: >
        {% if states('binary_sensor.aqara_vibration_sensor_occupancy') == 'on' %}
          {# Check if vibration is near downstairs thermostat location #}
          {# This would need location-based filtering or separate sensors #}
          on
        {% else %}
          off
        {% endif %}
      device_class: vibration

# Alternative: If you add separate Aqara vibration sensors to thermostats
# Uncomment and modify these when sensors are installed:

# - platform: mqtt
#   name: "Thermostat Upstairs Vibration"
#   state_topic: "zigbee2mqtt/Thermostat_Upstairs_Vibration"
#   device_class: vibration
#   payload_on: "true"
#   payload_off: "false"
#   value_template: "{{ value_json.occupancy }}"

# - platform: mqtt
#   name: "Thermostat Downstairs Vibration"
#   state_topic: "zigbee2mqtt/Thermostat_Downstairs_Vibration"
#   device_class: vibration
#   payload_on: "true"
#   payload_off: "false"
#   value_template: "{{ value_json.occupancy }}"