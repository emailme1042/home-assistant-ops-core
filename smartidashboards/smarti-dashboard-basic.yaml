title: SMARTi
kiosk_mode:
  entity_settings:
    - entity:
        input_boolean.smarti_dashboard_hide_sidebar: 'on'
      hide_sidebar: true
    - entity:
        input_boolean.smarti_dashboard_hide_sidebar: 'off'
      hide_sidebar: false
    - entity:
        input_boolean.smarti_dashboard_hide_header: 'on'
      hide_header: true
    - entity:
        input_boolean.smarti_dashboard_hide_header: 'off'
      hide_header: false
  mobile_settings:
    hide_header: true
    ignore_entity_settings: true
    custom_width: 768
views:
  - title: Home
    path: home
    icon: mdi:home
    layout:
      max_width: 2000
      max_cols: 1
    subview: false
    style: |
      :host::before {
        content: ' ';
        display: block;
        background-position: center;
        background-image: url('/local/images/smarti_images/smarti_background.png') !important;
        background-size: cover;
        height: 100vh;
        width: 100vw;
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
        position: fixed;

      }
    cards:
      - type: horizontal-stack
        cards:
          - type: vertical-stack
            cards:
              - type: custom:lottie-card
                animation: /local/smartianimations/error.json
                size: 200px
                loop: true
                autoplay: true
              - type: markdown
                content: >
                  **SMARTi Basic** is not supported on mobile devices.   To
                  enable this feature, please visit  
                  [https://www.smarti.dev](https://www.smarti.dev/smarti-store/p/smarti-powerflow-xe7ft)
                  to purchase and upgrade to the Pro version.
                style: |
                  ha-card {
                    background: rgba(0, 0, 0, 0.5); /* Slightly transparent background */
                    color: white;
                    text-align: center;
                    font-size: 1.2em;
                    padding: 20px;
                    border-radius: 10px;
                  }   
              - type: custom:mushroom-chips-card
                chips:
                  - type: spacer
                  - type: back
                  - type: menu
                  - type: spacer
        visibility:
          - condition: screen
            media_query: '(min-width: 0px) and (max-width: 767px)'
      - type: custom:mod-card
        card_mod:
          style:
            .: |
              ha-card {
                --ha-card-border-width: 0px;
                --ha-card-border-radius: 20px;
                background: linear-gradient(
                  to bottom right,
                  rgba(255, 255, 255, 0.15),
                  rgba(255, 255, 255, 0.05)
                );
                backdrop-filter: blur(15px);
                -webkit-backdrop-filter: blur(15px);
                box-shadow:
                  0 8px 32px 0 rgba(31, 38, 135, 0.37),
                  inset 0 0 0.5px rgba(255, 255, 255, 0.2); /* subtle inner glow */
                border: 5px solid rgba(255, 255, 255, 0.1);
                position: relative;
                overflow: hidden;
                border-radius: 100px 100px 10px 10px;
              }

              ha-card::before {
                content: '';
                position: absolute;
                top: -30%;
                left: -30%;
                width: 200%;
                height: 200%;
                background: radial-gradient(
                  circle at 30% 30%,
                  rgba(255, 255, 255, 0.3),
                  transparent 60%
                );
                transform: rotate(25deg);
                pointer-events: none;
              }
        card:
          type: conditional
          conditions:
            - condition: screen
              media_query: '(min-width: 768px)'
          card:
            type: vertical-stack
            cards:
              - type: horizontal-stack
                cards:
                  - type: custom:gap-card
                  - type: conditional
                    conditions:
                      - condition: or
                        conditions:
                          - entity: binary_sensor.smarti_internet
                            state: unavailable
                          - entity: binary_sensor.smarti_internet
                            state: unknown
                          - entity: sensor.browser_mod_installed
                            state_not: 'True'
                          - entity: alarm_control_panel.alarmo
                            state: unavailable
                          - entity: alarm_control_panel.alarmo
                            state: unknown
                          - entity: weather.forecast_home
                            state: unavailable
                          - entity: weather.forecast_home
                            state: unknown
                    card:
                      type: custom:button-card
                      name: ⚠️ Setup Required
                      icon: mdi:alert-circle
                      show_state: false
                      show_icon: true
                      show_name: true
                      tap_action:
                        action: navigate
                        navigation_path: /smarti-dashboard/settings3
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                          - divider-color: transparent
                        icon:
                          - color: red
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      card_mod:
                        style: |
                          ha-card {
                            border: 2px solid var(--border-color);
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                          }
                  - type: conditional
                    conditions:
                      - entity: alarm_control_panel.alarmo
                        state_not: unavailable
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_alarm'].state ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - font-size: 3em
                          - color: var(--primary-color)
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: more-info
                        entity: alarm_control_panel.alarmo
                      entity: alarm_control_panel.alarmo
                      card_mod:
                        style: |
                          ha-card {
                            background: radial-gradient(
                              circle at center,
                              rgba(0, 0, 0, 0.4) 0%,
                              rgba(0, 0, 0, 0.2) 10%,
                              rgba(0, 0, 0, 0) 40%
                            );
                            border-radius: 20px;
                            border: none
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            overflow: hidden;
                            position: relative;
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        entity: sensor.smarti_active_locks
                        above: 0
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_tabbed_card_locks_tab_title'].state
                        ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                          - animation: >
                              [[[ return
                              parseInt(states['sensor.smarti_active_locks'].state)
                              > 0 ? 'blink-red 1.5s infinite' : 'none'; ]]]
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              card:
                                type: entities
                              filter:
                                include:
                                  - domain: lock
                                    state: unlocked
                                  - domain: binary_sensor
                                    attributes:
                                      device_class: lock
                                    state: 'on'
                                exclude:
                                  - hidden_by: '*'
                              sort:
                                reverse: true
                      entity: sensor.smarti_active_locks
                      card_mod:
                        style: |
                          ha-card {
                            border: 2px solid var(--border-color);
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                          }

                          @keyframes blink-red {
                            0% {
                              color: var(--accent-color);
                            }
                            50% {
                              color: var(--primary-color);
                            }
                            100% {
                              color: var(--accent-color);
                            }
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        entity: sensor.smarti_active_motion_sensors
                        above: 0
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_motion'].state
                        ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              card:
                                type: entities
                              filter:
                                include:
                                  - domain: binary_sensor
                                    attributes:
                                      device_class: motion
                                    state: 'on'
                                exclude:
                                  - hidden_by: '*'
                              sort:
                                reverse: true
                      entity: sensor.smarti_active_motion_sensors
                      card_mod:
                        style: |
                          ha-card {
                            background: radial-gradient(
                              circle at center,
                              rgba(0, 0, 0, 0.4) 0%,
                              rgba(0, 0, 0, 0.2) 10%,
                              rgba(0, 0, 0, 0) 40%
                            );
                            border-radius: 20px;
                            border: none
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            overflow: hidden;
                            position: relative;
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        above: 0
                        entity: sensor.smarti_active_lights
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_lights'].state
                        ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              show_empty: false
                              card:
                                show_name: true
                                show_icon: true
                                show_state: true
                                type: glance
                                state_color: true
                                columns: 4
                              filter:
                                include:
                                  - domain: light
                                    state: 'on'
                                    options:
                                      tap_action:
                                        action: toggle
                                exclude:
                                  - hidden_by: '*'
                              sort:
                                method: none
                                reverse: false
                                numeric: false
                      entity: sensor.smarti_active_lights
                      card_mod:
                        style: |
                          ha-card {
                            background: radial-gradient(
                              circle at center,
                              rgba(0, 0, 0, 0.4) 0%,
                              rgba(0, 0, 0, 0.2) 10%,
                              rgba(0, 0, 0, 0) 40%
                            );
                            border-radius: 20px;
                            border: none
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            overflow: hidden;
                            position: relative;
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        above: 0
                        entity: sensor.smarti_active_doors
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_doors'].state ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              card:
                                type: entities
                              filter:
                                include:
                                  - domain: binary_sensor
                                    attributes:
                                      device_class: door
                                    state: 'on'
                                exclude:
                                  - hidden_by: '*'
                              sort:
                                reverse: true
                      entity: sensor.smarti_active_doors
                      card_mod:
                        style: |
                          ha-card {
                            background: radial-gradient(
                              circle at center,
                              rgba(0, 0, 0, 0.4) 0%,
                              rgba(0, 0, 0, 0.2) 10%,
                              rgba(0, 0, 0, 0) 40%
                            );
                            border-radius: 20px;
                            border: none
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            overflow: hidden;
                            position: relative;
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        entity: sensor.smarti_active_windows
                        above: 0
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_windows'].state
                        ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)'
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              card:
                                type: entities
                              filter:
                                include:
                                  - domain: binary_sensor
                                    attributes:
                                      device_class: window
                                    state: 'on'
                                exclude:
                                  - hidden_by: '*'
                              sort:
                                reverse: true
                      entity: sensor.smarti_active_windows
                      card_mod:
                        style: |
                          ha-card {
                            background: radial-gradient(
                              circle at center,
                              rgba(0, 0, 0, 0.4) 0%,
                              rgba(0, 0, 0, 0.2) 10%,
                              rgba(0, 0, 0, 0) 40%
                            );
                            border-radius: 20px;
                            border: none
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            overflow: hidden;
                            position: relative;
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        above: 0
                        entity: sensor.smarti_active_water_sensors
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_water'].state ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              card:
                                type: entities
                              filter:
                                include:
                                  - domain: binary_sensor
                                    attributes:
                                      device_class: moisture
                                    state: 'on'
                                exclude:
                                  - hidden_by: '*'
                              sort:
                                reverse: true
                      entity: sensor.smarti_active_water_sensors
                      card_mod:
                        style: |
                          ha-card {
                            border: 2px solid var(--border-color);
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        entity: sensor.smarti_active_smoke_detectors
                        above: 0
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_smoke'].state ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              card:
                                type: entities
                              filter:
                                include:
                                  - domain: binary_sensor
                                    attributes:
                                      device_class: smoke
                                    state: 'on'
                                exclude:
                                  - hidden_by: '*'
                              sort:
                                reverse: true
                      entity: sensor.smarti_active_smoke_detectors
                      card_mod:
                        style: |
                          ha-card {
                            background: radial-gradient(
                              circle at center,
                              rgba(0, 0, 0, 0.4) 0%,
                              rgba(0, 0, 0, 0.2) 10%,
                              rgba(0, 0, 0, 0) 40%
                            );
                            border-radius: 20px;
                            border: none
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            overflow: hidden;
                            position: relative;
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        above: 0
                        entity: sensor.smarti_active_gas_sensors
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_gas'].state ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              card:
                                type: entities
                              filter:
                                include:
                                  - domain: binary_sensor
                                    attributes:
                                      device_class: gas
                                    state: 'on'
                                exclude:
                                  - hidden_by: '*'
                              sort:
                                reverse: true
                      entity: sensor.smarti_active_gas_sensors
                      card_mod:
                        style: |
                          ha-card {
                            background: radial-gradient(
                              circle at center,
                              rgba(0, 0, 0, 0.4) 0%,
                              rgba(0, 0, 0, 0.2) 10%,
                              rgba(0, 0, 0, 0) 40%
                            );
                            border-radius: 20px;
                            border: none
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            overflow: hidden;
                            position: relative;
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        above: 0
                        entity: sensor.smarti_active_low_battery_devices_count
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_batteries'].state
                        ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              card:
                                show_header_toggle: false
                                type: entities
                                state_color: true
                              filter:
                                include:
                                  - entity_id: sensor.*_battery
                                  - entity_id: binary_sensor.*battery_low
                                  - entity_id: sensor.*.battery_state
                                exclude:
                                  - state: unavailable
                                  - state: '-'
                                  - state: unknown
                                  - state: none
                                  - state: medium
                                  - state: high
                                  - state: '= 0,0'
                                  - state: '>= 20'
                                  - state: 'off'
                                  - entity_id: sensor.campainha_ring_mqtt_battery
                                  - entity_id: sensor.campainha_battery
                                  - state: None
                                  - state: charging
                                  - state: discharging
                                  - state: high
                                  - name: /[Ll]ow/
                                  - name: /[Ss]tate/
                                  - entity_id: '*phone*'
                                  - entity_id: '*browser*'
                                  - entity_id: '*watch*'
                                  - entity_id: '*pad*'
                                  - entity_id: '*tablet*'
                                  - hidden_by: '*'
                              sort:
                                method: friendly_name
                                numeric: true
                                ignore_case: false
                                ip: false
                                reverse: false
                              show_empty: false
                      entity: sensor.smarti_active_low_battery_devices_count
                      card_mod:
                        style: |
                          ha-card {
                            background: radial-gradient(
                              circle at center,
                              rgba(0, 0, 0, 0.4) 0%,
                              rgba(0, 0, 0, 0.2) 10%,
                              rgba(0, 0, 0, 0) 40%
                            );
                            border-radius: 20px;
                            border: none
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            overflow: hidden;
                            position: relative;
                          }
                  - type: conditional
                    conditions:
                      - condition: state
                        entity: sensor.smarti_dynamic_power_sensor
                        state_not: unknown
                      - condition: state
                        entity: sensor.smarti_dynamic_power_sensor
                        state_not: unavailable
                      - condition: state
                        entity: input_boolean.smarti_show_energy_measurement
                        state_not: 'off'
                    card:
                      type: custom:mini-graph-card
                      entities:
                        - sensor.smarti_dynamic_power_sensor
                      show:
                        name: false
                        icon: true
                        legend: false
                        labels: false
                      icon: mdi:lightning-bolt
                      height: 50
                      color_thresholds:
                        - value: 3000
                          color: '#f39c12'
                        - value: 5000
                          color: '#d35400'
                        - value: 8000
                          color: '#c0392b'
                      hours_to_show: 6
                      points_per_hour: 10
                      align_icon: center
                      align_state: right
                      align_header: center
                      card_mod:
                        style: |
                          ha-card {
                            border: 2px solid var(--border-color);
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            background: transparent;
                            color: var(--primary-color); /* Ensures the text uses primary color */
                          }
                          ha-icon {
                            color: var(--primary-color); /* Sets the icon color */
                          }
                  - type: custom:gap-card
      - type: custom:button-card
        styles:
          card:
            - height: 5px
            - max-height: 10px
            - padding: 0
            - margin: 0
            - background-color: var(--primary-color);
        card_mod:
          style: |
            ha-card {
              border-radius: 1px;
              height: 2px;
              max-height: 2px;
              padding: 0;
              margin: 0;
              background: var(--primary-color);
            }
        visibility:
          - condition: screen
            media_query: '(min-width: 768px)'
      - type: custom:mod-card
        card_mod:
          style:
            .: |
              ha-card {
                --ha-card-border-width: 0px;
                --ha-card-border-radius: 20px;
                background: linear-gradient(
                  to bottom right,
                  rgba(255, 255, 255, 0.15),
                  rgba(255, 255, 255, 0.05)
                );
                backdrop-filter: blur(15px);
                -webkit-backdrop-filter: blur(15px);
                box-shadow:
                  0 8px 32px 0 rgba(31, 38, 135, 0.37),
                  inset 0 0 0.5px rgba(255, 255, 255, 0.2); /* subtle inner glow */
                border: 5px solid rgba(255, 255, 255, 0.1);
                position: relative;
                overflow: hidden;
                border-radius: 10px 10px 20px 20px;
              }

              ha-card::before {
                content: '';
                position: absolute;
                top: -30%;
                left: -30%;
                width: 200%;
                height: 200%;
                background: radial-gradient(
                  circle at 30% 30%,
                  rgba(255, 255, 255, 0.3),
                  transparent 60%
                );
                transform: rotate(25deg);
                pointer-events: none;
              }
        card:
          type: horizontal-stack
          cards:
            - type: custom:button-card
              name: Home
              show_icon: true
              icon: mdi:home
              show_name: false
              styles:
                card:
                  - max-height: 50px
                  - justify-content: center
                  - align-items: center
                icon:
                  - max-height: 30px
                  - max-width: 30px
                  - min-height: 30px
                  - min-width: 20px
                name:
                  - color: black
              tap_action:
                action: navigate
                navigation_path: home#
              card_mod:
                style: |
                  ha-card {
                    border-radius: 5px 5px 5px 15px;
                    background-color: var(--primary-color);
                  }
            - type: conditional
              conditions:
                - entity: input_boolean.smarti_show_weather_tab
                  state: 'on'
              card:
                type: custom:button-card
                name: Vær
                show_icon: true
                icon: mdi:weather-partly-cloudy
                show_name: false
                styles:
                  card:
                    - max-height: 50px
                    - justify-content: center
                    - align-items: center
                  icon:
                    - max-height: 30px
                    - max-width: 30px
                    - min-height: 30px
                    - min-width: 20px
                    - color: var(--primary-color)
                  name:
                    - color: black
                tap_action:
                  action: navigate
                  navigation_path: rooms#
                card_mod:
                  style: |
                    ha-card {
                      border-radius: 5px 5px 5px 5px;
                    }
            - type: conditional
              conditions:
                - entity: input_boolean.smarti_show_light_tab
                  state: 'on'
              card:
                type: custom:button-card
                name: Light Control
                show_icon: true
                icon: mdi:lightbulb-group
                show_name: false
                styles:
                  card:
                    - max-height: 50px
                    - justify-content: center
                    - align-items: center
                  icon:
                    - color: black
                    - max-height: 30px
                    - max-width: 30px
                    - min-height: 30px
                    - min-width: 20px
                    - color: var(--primary-color)
                  name:
                    - color: black
                state:
                  - value: 'on'
                    styles:
                      card:
                        - background-color: '#FF7000'
                tap_action:
                  action: navigate
                  navigation_path: lights#
                card_mod:
                  style: |
                    ha-card {
                      border-radius: 5px 5px 5px 5px;   

                    }  
            - type: conditional
              conditions:
                - entity: input_boolean.smarti_show_climate_tab
                  state: 'on'
              card:
                type: custom:button-card
                name: Heating Control
                show_icon: true
                icon: mdi:thermometer-water
                show_name: false
                styles:
                  card:
                    - max-height: 50px
                    - justify-content: center
                    - align-items: center
                  icon:
                    - color: black
                    - max-height: 30px
                    - max-width: 30px
                    - min-height: 30px
                    - min-width: 20px
                    - color: var(--primary-color)
                  name:
                    - color: black
                tap_action:
                  action: navigate
                  navigation_path: heating#
                card_mod:
                  style: |
                    ha-card {
                      border-radius: 5px 5px 5px 5px;    
                    }
            - type: conditional
              conditions:
                - entity: input_boolean.smarti_show_misc_tab
                  state: 'on'
              card:
                type: custom:button-card
                name: Multimedia
                show_icon: true
                icon: mdi:multimedia
                show_name: false
                styles:
                  card:
                    - max-height: 50px
                    - justify-content: center
                    - align-items: center
                  icon:
                    - max-height: 30px
                    - max-width: 30px
                    - min-height: 30px
                    - min-width: 20px
                    - color: var(--primary-color)
                tap_action:
                  action: navigate
                  navigation_path: multimedia#
                card_mod:
                  style: |
                    ha-card {
                      border-radius: 5px 5px 5px 5px;
                    }
            - type: conditional
              conditions:
                - entity: input_boolean.smarti_show_security_tab
                  state: 'on'
              card:
                type: custom:button-card
                name: Security
                show_icon: true
                icon: mdi:shield
                show_name: false
                styles:
                  card:
                    - max-height: 50px
                    - justify-content: center
                    - align-items: center
                  icon:
                    - color: black
                    - max-height: 30px
                    - max-width: 30px
                    - min-height: 30px
                    - min-width: 20px
                    - color: var(--primary-color)
                  name:
                    - color: black
                tap_action:
                  action: navigate
                  navigation_path: cameras#
                card_mod:
                  style: |
                    ha-card {
                      border-radius: 5px 5px 5px 5px;    
                    }
            - type: conditional
              conditions:
                - entity: input_boolean.smarti_show_energy_tab
                  state: 'on'
              card:
                type: custom:button-card
                name: Power Control
                show_icon: true
                icon: mdi:lightning-bolt
                show_name: false
                styles:
                  card:
                    - max-height: 50px
                    - justify-content: center
                    - align-items: center
                  icon:
                    - color: black
                    - max-height: 30px
                    - max-width: 30px
                    - min-height: 30px
                    - min-width: 20px
                    - color: var(--primary-color)
                  name:
                    - color: black
                tap_action:
                  action: navigate
                  navigation_path: power#
                card_mod:
                  style: |
                    ha-card {
                      border-radius: 5px 5px 5px 5px;    
                    }
            - type: custom:button-card
              name: Settings
              show_icon: true
              icon: mdi:cog
              show_name: false
              styles:
                card:
                  - max-height: 50px
                  - justify-content: center
                  - align-items: center
                icon:
                  - max-height: 30px
                  - max-width: 30px
                  - min-height: 30px
                  - min-width: 20px
                  - color: var(--primary-color)
                name:
                  - color: black
              tap_action:
                action: navigate
                navigation_path: settings2#
              card_mod:
                style: |
                  ha-card{
                    border-radius: 5px 5px 15px 5px;
                  }  
          visibility:
            - condition: screen
              media_query: '(min-width: 768px)'
      - type: custom:gap-card
        height: 25
        visibility:
          - condition: screen
            media_query: '(min-width: 0px) and (max-width: 767px)'
      - type: custom:mushroom-chips-card
        chips:
          - type: spacer
          - type: back
          - type: menu
          - type: spacer
        visibility:
          - condition: screen
            media_query: ''
      - type: custom:mod-card
        card_mod:
          style:
            .: |
              ha-card {
                --ha-card-border-width: 0px;
                --ha-card-border-radius: 20px;
                --ha-card-background: transparent; 
              } 
            tabbed-card $:
              mwc-tab:
                $: |
                  .mdc-tab--active {
                    background: var(--primary-color) !important;
                    border-radius: 5px 5px 0px 0px;
                  }          
        card:
          type: horizontal-stack
          cards:
            - type: horizontal-stack
              cards:
                - type: vertical-stack
                  cards:
                    - type: custom:gap-card
                    - type: horizontal-stack
                      cards:
                        - type: custom:gap-card
                        - clock_size: large
                          show_seconds: true
                          type: clock
                        - type: custom:gap-card
                    - type: energy-distribution
                      link_dashboard: true
                    - type: custom:gap-card
                - type: vertical-stack
                  cards:
                    - type: custom:gap-card
                    - type: custom:mushroom-title-card
                      title: '{{ states(''sensor.smarti_dashboard_home_page_title'') }}'
                      subtitle: >-
                        {{ states('sensor.smarti_dashboard_home_page_subtitle')
                        }}
                      alignment: center
                    - type: custom:lottie-card
                      animation: /local/smartianimations/home_white.json
                      size: 150px
                      loop: true
                      autoplay: true
                    - type: custom:gap-card
                    - type: custom:auto-entities
                      card:
                        type: glance
                        show_name: true
                        show_icon: true
                        show_state: true
                      filter:
                        include:
                          - entity_id: person.*
                            options:
                              type: custom:mini-card
                        exclude:
                          - entity_id: person.smarti
                          - entity_id: person.admin
                          - entity_id: person.tablet_oppe
                          - entity_id: person.tabletoppe2
                - type: vertical-stack
                  cards:
                    - type: custom:gap-card
                    - type: custom:tabbed-card
                      tabs:
                        - attributes:
                            label: null
                            icon: mdi:calendar
                          card:
                            type: vertical-stack
                            cards:
                              - type: custom:config-template-card
                                entities:
                                  - sensor.calendar_days_to_show
                                card:
                                  type: custom:calendar-card-pro
                                  entities:
                                    - entity: calendar.calendar
                                      label: 💼
                                      accent_color: var(--primary-color)
                                    - entity: calendar.work
                                      label: 🏢
                                      accent_color: var(--accent-color)
                                    - entity: calendar.family
                                      label: 👪
                                      accent_color: var(--primary-color)
                                    - entity: calendar.personal
                                      label: 🏠
                                      accent_color: var(--accent-color)
                                  show_location: true
                                  tap_action:
                                    action: navigate
                                    navigation_path: /calendar
                                  event_background_opacity: 15
                                  days_to_show: >-
                                    ${parseInt(states['sensor.calendar_days_to_show']?.state
                                    || '3')}
                                  show_progress_bar: true
                                  progress_bar_color: '#03a9f4'
                                  progress_bar_height: 10px
                                  progress_bar_width: 60px
                                  vertical_line_width: 5px
                                  event_spacing: 6px
                                  card_mod:
                                    style: |
                                      .day-table.today .event-title {
                                        font-size: 16px !important;
                                        font-weight: bold !important;
                                        color: var(--accent-color) !important;
                                      }

                                      .day-table.today .event {
                                        border-left-width: 4px !important;
                                        transition: border-left-color 1s ease-in-out;
                                        animation: todayPulse 3s infinite alternate;
                                      }

                                      @keyframes todayPulse {
                                        from { border-left-color: var(--accent-color); }
                                        to { border-left-color: var(--primary-color); }
                                      }
                              - type: entities
                                entities:
                                  - entity: input_select.calendar_days_to_show
                                    name: Number of days to show in the calendar
                              - type: custom:gap-card
                        - attributes:
                            label: null
                            icon: mdi:home
                          card:
                            type: vertical-stack
                            cards:
                              - type: custom:mushroom-title-card
                                title: null
                                subtitle: >-
                                  {{
                                  states('sensor.smarti_dashboard_home_page_home_feed_subtitle')
                                  }}
                                alignment: center
                              - type: custom:mod-card
                                style: |
                                  ha-card {
                                    max-height: 300px; /* Limit height */
                                    overflow-y: auto; /* Enable scrolling */
                                    scrollbar-width: none; /* Hide scrollbar in Firefox */
                                  }
                                  ha-card::-webkit-scrollbar {
                                    display: none; /* Hide scrollbar in Webkit browsers */
                                  }
                                  h1 {
                                    margin: 0; /* Remove default margin */
                                    padding: 0 0 4px 0; /* Add padding at the bottom to prevent clipping */
                                    line-height: 1.5; /* Adjust line height for better spacing */
                                  }
                                card:
                                  type: custom:auto-entities
                                  filter:
                                    include:
                                      - domain: binary_sensor
                                        attributes:
                                          device_class: motion
                                      - domain: binary_sensor
                                        attributes:
                                          device_class: door
                                      - domain: binary_sensor
                                        attributes:
                                          device_class: window
                                      - domain: alarm_control_panel
                                      - domain: light
                                  card:
                                    type: custom:home-feed-card
                                    show_empty: false
                                    state_color: true
                                  unique: true
                              - type: custom:gap-card
        visibility:
          - condition: screen
            media_query: '(min-width: 768px)'
      - type: custom:button-card
        styles:
          card:
            - height: 5px
            - max-height: 10px
            - padding: 0
            - margin: 0
            - background-color: var(--primary-color);
        card_mod:
          style: |
            ha-card {
              border-radius: 1px;
              height: 2px;
              max-height: 2px;
              padding: 0;
              margin: 0;
              background: var(--primary-color);
            }
        visibility:
          - condition: screen
            media_query: '(min-width: 768px)'
      - type: conditional
        conditions:
          - condition: screen
            media_query: '(min-width: 768px)'
        card:
          type: custom:mod-card
          card_mod:
            style:
              .: |
                ha-card {
                  --ha-card-border-width: 0px;
                  --ha-card-border-radius: 20px;
                  --ha-card-background: transparent;
                }

                @media (max-width: 560px), (max-height: 500px) {
                  ha-dialog {
                    --mdc-dialog-min-width: 97vw;
                    --mdc-dialog-max-width: 97vw;
                  }
                }
              tabbed-card $:
                mwc-tab:
                  $: |
                    .mdc-tab {
                      background: rgba(255, 255, 255, 0.08);
                      backdrop-filter: blur(12px);
                      -webkit-backdrop-filter: blur(12px);
                      border-radius: 5px 5px 0px 0px;
                      transition: background 0.3s ease, box-shadow 0.3s ease;
                      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
                    }

                    .mdc-tab--active {
                      background: var(--primary-color) !important;
                      color: var(--text-primary-color) !important;
                      border-radius: 5px 5px 0px 0px;
                      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
                    }
          card:
            type: custom:tabbed-card
            tabs:
              - attributes:
                  label: null
                  icon: mdi:cube-unfolded
                  isFadingIndicator: true
                  isMinWidthIndicator: true
                  stacked: true
                card:
                  type: vertical-stack
                  cards:
                    - type: horizontal-stack
                      cards:
                        - type: vertical-stack
                          cards:
                            - type: custom:gap-card
                            - type: custom:mushroom-title-card
                              title: >-
                                {{
                                states('sensor.smarti_dashboard_tabbed_card_home_page_room_tab_title')
                                }}
                              subtitle: >-
                                {{
                                states('sensor.smarti_dashboard_tabbed_card_home_page_room_tab_subtitle')
                                }}
                              alignment: center
                        - type: vertical-stack
                          cards:
                            - type: custom:lottie-card
                              animation: /local/smartianimations/rooms.json
                              size: 150px
                              loop: true
                              autoplay: true
                    - type: custom:auto-entities
                      card:
                        type: grid
                        columns: 3
                        square: false
                      card_param: cards
                      filter:
                        template: >-
                          {% set area_ids = areas() | list %} {% set
                          name_id_list = namespace(items=[]) %}

                          {% for id in area_ids %}
                            {% set name = area_name(id) %}
                            {% set item = name ~ '|' ~ id %}
                            {% set name_id_list.items = name_id_list.items + [item] %}
                          {% endfor %}

                          {% set sorted = name_id_list.items | sort %}

                          {% if sorted | length == 0 %}
                            [
                              {
                                "type": "custom:button-text-card",
                                "title": "No areas found",
                                "subtitle": "Please create or configure your areas",
                                "icon": "mdi:alert-circle",
                                "background_color": "var(--primary-color)"
                              }
                            ]
                          {% else %}
                            [
                              {% for item in sorted %}
                                {% set id = item.split('|')[1] %}
                                {% set name = item.split('|')[0] %}
                                {
                                  "type": "vertical-stack",
                                  "cards": [
                                    {
                                      "type": "area",
                                      "area": "{{ id }}",
                                      "show_camera": "true",
                                      "camera_view": "live",
                                      "features_position": "inline",
                                      "color": "primary",
                                      "aspect_ratio": "21:9",
                                      "features": [
                                          {
                                            "type": "area-controls"
                                          }
                                        ],
                                      "sensor_classes": [
                                        "temperature",
                                        "humidity",
                                        "energy",
                                        "illuminance",
                                        "aqi",
                                        "battery",
                                        "voltage",
                                        "power_factor",
                                        "apparent_power",
                                        "data_rate",
                                        "co",
                                        "co2",
                                        "date",
                                        "signal_strength",
                                        "volume",
                                        "wind_speed",
                                        "water"
                                      ],
                                      "alert_classes": [
                                        "motion",
                                        "moisture",
                                        "smoke",
                                        "gas"
                                      ]
                                    },
                                    {
                                      "type": "custom:button-card",
                                      "show_icon": "true",
                                      "icon": "mdi:open-in-new",
                                      "show_name": "false",
                                      "tap_action": {
                                        "action": "fire-dom-event",
                                        "browser_mod": {
                                          "service": "browser_mod.popup",
                                          "data": {
                                            "title": "{{ name }} - Devices",
                                            "size": "normal",
                                            "content": {
                                              "type": "custom:auto-entities",
                                              "card": {
                                                "type": "entities",
                                                "title": "Devices in {{ name }}"
                                              },
                                              "filter": {
                                                "include": [
                                                  { "area": "{{ id }}" }
                                                ],
                                                "exclude": [
                                                  { "hidden_by": "*" }
                                                ]
                                              },
                                              "sort": {
                                                "method": "name"
                                              }
                                            }
                                          }
                                        }
                                      },
                                      "styles": {
                                        "card": [
                                          { "background-color": "var(--primary-color)" },
                                          { "border-radius": "2px 2px 20px 20px" },
                                          { "padding": "0" },
                                          { "margin": "0 auto 10px auto" },
                                          { "height": "50px" },
                                          { "display": "flex" },
                                          { "align-items": "center" },
                                          { "justify-content": "center" }
                                        ],
                                        "icon": [
                                          "color: var(--text-primary-color)",
                                          "font-size: 20px"
                                        ]
                                      }
                                    }
                                  ]
                                }{% if not loop.last %},{% endif %}
                              {% endfor %}
                            ]
                          {% endif %}
              - attributes:
                  label: null
                  icon: mdi:human-male-female-child
                  isFadingIndicator: true
                  isMinWidthIndicator: true
                  stacked: true
                card:
                  type: vertical-stack
                  cards:
                    - type: horizontal-stack
                      cards:
                        - type: vertical-stack
                          cards:
                            - type: custom:gap-card
                            - type: custom:mushroom-title-card
                              title: >-
                                {{
                                states('sensor.smarti_dashboard_tabbed_card_home_page_users_tab_title')
                                }}
                              subtitle: >-
                                {{
                                states('sensor.smarti_dashboard_tabbed_card_home_page_users_tab_subtitle')
                                }}
                              alignment: center
                        - type: vertical-stack
                          cards:
                            - type: custom:lottie-card
                              animation: /local/smartianimations/map.json
                              size: 150px
                              loop: true
                              autoplay: true
                    - type: custom:auto-entities
                      card:
                        type: map
                        aspect_ratio: '16:9'
                        default_zoom: 12
                      filter:
                        include:
                          - domain: person
                            options:
                              secondary_info: last-changed
                        exclude:
                          - entity_id: person.administrator
                          - entity_id: person.smarti
              - attributes:
                  label: null
                  icon: mdi:battery
                  isFadingIndicator: true
                  isMinWidthIndicator: true
                  stacked: true
                card:
                  type: custom:vertical-stack-in-card
                  cards:
                    - type: horizontal-stack
                      cards:
                        - type: vertical-stack
                          cards:
                            - type: custom:gap-card
                            - type: custom:mushroom-title-card
                              title: >-
                                {{
                                states('sensor.smarti_dashboard_tabbed_card_home_page_batteries_tab_title')
                                }}
                              subtitle: >-
                                {{
                                states('sensor.smarti_dashboard_tabbed_card_home_page_batteries_tab_subtitle')
                                }}
                              alignment: center
                        - type: vertical-stack
                          cards:
                            - type: custom:lottie-card
                              animation: /local/smartianimations/battery.json
                              size: 150px
                              loop: true
                              autoplay: true
                    - type: custom:mushroom-chips-card
                      chips:
                        - type: template
                          entity: null
                          icon: null
                          icon_color: green
                          show_icon: false
                          content: null
                          card_mod:
                            style: |
                              ha-card {
                                background: transparent;
                                border-style: none;
                              }
                    - type: custom:auto-entities
                      card:
                        type: custom:stack-in-card
                        card_mod:
                          style: |
                            ha-card {
                              padding-top: 5px;
                              padding-bottom: 0px;
                              border-width: 0px;
                              background: none;
                              --ha-card-box-shadow: 0px;
                            }
                      filter:
                        include:
                          - entity_id: sensor.*batter*
                            options:
                              type: custom:bar-card
                              card_mod:
                                style: >
                                  bar-card-currentbar, bar-card-backgroundbar {
                                    border-radius: 12px !important;
                                    height: 70px !important;
                                    margin-top: -8px !important;
                                    width: 100%;
                                    right: 0.5%;
                                    display: flex;
                                    justify-content: center;
                                    align-items: center;
                                  }

                                  ha-icon {
                                    position: relative;
                                    padding: 0px;
                                    border-radius: 50%;
                                    display: flex;
                                    justify-content: center !important;
                                    align-items: center !important;
                                    --mdc-icon-size: calc(100% - 6px);
                                    right: 4px;
                                  }

                                  bar-card-row, ha-icon {
                                    color: color-mix(in srgb, var(--bar-color) 100%, transparent) !important;
                                    background: color-mix(in srgb, var(--bar-color) 20%, transparent);
                                  }

                                  bar-card-indicator {
                                    color: color-mix(in srgb, var(--bar-color) 100%, transparent) !important;
                                    top: -18px;
                                  }

                                  bar-card-name {
                                    margin-top: auto !important;
                                    left: 0px;
                                    color: white;
                                    display: flex;
                                    justify-content: center;
                                    align-items: center;
                                    background-color: var(--secondary-color);
                                    padding: 4px;
                                  }

                                  bar-card-value {
                                    margin-top: auto !important;
                                    font-size: 16px;
                                    width: 0px;
                                    color: white;
                                    display: flex;
                                    justify-content: right;
                                    align-items: right;
                                    background-color: var(--secondary-color);
                                    padding: 15px;
                                    padding-left: 60px;
                                    margin-right: 20px;
                                    border-radius: 20px;
                                    width: 40px;
                                  }

                                  ha-card {
                                    margin: -4px 0px !important;
                                    height: 90px;
                                  }

                                  bar-card-row bar-card-currentbar, ha-icon,
                                  bar-card-backgroundbar {
                                    --bar-color:
                                    {% if states(config.entity) == 'unavailable' or states(config.entity) == 'none' or states(config.entity) == 'unknown'%}
                                      var(--primary-color) !important;
                                      --card-mod-icon: mdi:bug !important;
                                    {% elif states(config.entity) == 'unknown' %}
                                      var(--primary-color) !important;
                                      --card-mod-icon: mdi:bug !important;                            
                                    {% elif states(config.entity) == 'full' %}
                                      #22c402 !important;
                                      --card-mod-icon: mdi:battery !important;                              
                                    {% elif states(config.entity) == 'high' %}
                                      #22c402 !important;
                                      --card-mod-icon: mdi:battery-80 !important;
                                    {% elif states(config.entity) == 'medium' %}
                                      #e7fc03 !important;
                                      --card-mod-icon: mdi:battery-50 !important;
                                    {% elif states(config.entity) == 'low' %}
                                       #ff4d00 !important;
                                      --card-mod-icon: mdi:battery-20 !important;                             
                                    {% elif states(config.entity) == 'Not Charging' or states(config.entity) == 'discharging' %}
                                      var(--accent-color) !important;
                                      --card-mod-icon: mdi:bug !important;
                                    {% elif states(config.entity) == 'Charging' or states(config.entity) == 'charging' %}
                                      #22c402 !important;
                                      --card-mod-icon: mdi:bug !important;                            
                                    {% elif states(config.entity) | is_number and states(config.entity) | int <= 10 %}
                                      #ff0026 !important;
                                      --card-mod-icon: mdi:battery-10 !important;
                                    {% elif states(config.entity) | is_number and states(config.entity) | int <= 20 %}
                                      #ff4d00 !important;
                                      --card-mod-icon: mdi:battery-20 !important;
                                    {% elif states(config.entity) | is_number and states(config.entity) | int <= 30 %}
                                      #ff9900 !important;
                                      --card-mod-icon: mdi:battery-30 !important;
                                    {% elif states(config.entity) | is_number and states(config.entity) | int <= 40 %}
                                      #ffcc00 !important;
                                      --card-mod-icon: mdi:battery-40 !important;
                                    {% elif states(config.entity) | is_number and states(config.entity) | int <= 50 %}
                                      #e7fc03 !important;
                                      --card-mod-icon: mdi:battery-50 !important;
                                    {% elif states(config.entity) | is_number and states(config.entity) | int <= 60 %}
                                      #aaff00 !important;
                                      --card-mod-icon: mdi:battery-60 !important;
                                    {% elif states(config.entity) | is_number and states(config.entity) | int <= 70 %}
                                      #aaff00 !important;
                                      --card-mod-icon: mdi:battery-70 !important;
                                    {% elif states(config.entity) | is_number and states(config.entity) | int <= 80 %}
                                      #22c402 !important;
                                      --card-mod-icon: mdi:battery-80 !important;
                                    {% elif states(config.entity) | is_number and states(config.entity) | int <= 90 %}
                                      #22c402 !important;
                                      --card-mod-icon: mdi:battery-90 !important;
                                    {% elif states(config.entity) | is_number and states(config.entity) | int <= 100 %}
                                      #22c402 !important;
                                      --card-mod-icon: mdi:battery !important;
                                    {% else %}
                                      #22c402 !important;
                                      --card-mod-icon: mdi:battery !important;
                                    {% endif %}
                                  }

                                  bar-card-row ha-icon {
                                    color: color-mix(in srgb, var(--bar-color) 100%, transparent);
                                    margin-top: 15px;
                                    width: 70px !important;
                                    height: 70px !important;
                                    border-radius: 15px;
                                    display: flex;
                                    justify-content: center !important;
                                    align-items: center !important;
                                    --mdc-icon-size: calc(100% - 6px);
                                  }

                                  ha-card {
                                    padding: 0px !important;
                                    margin: -2px !important;
                                    height: 90px;
                                    border-width: 0px;
                                    background: none;
                                    --ha-card-box-shadow: 0px;
                                  }
                        exclude:
                          - entity_id: sensor.smarti_active_battery_devices_list
                          - entity_id: sensor.smarti_active_low_battery_devices_count
                          - entity_id: sensor.smarti_active_battery_devices_list
                          - entity_id: sensor.smarti_active_low_battery_devices_count
                          - entity_id: >-
                              sensor.smarti_dashboard_tabbed_card_home_page_batteries_tab_subtitle
                          - entity_id: sensor.smarti_dashboard_navbar_batteries
                          - entity_id: >-
                              sensor.smarti_dasbhoard_tabbed_card_home_page_batteries_tab_title
                          - entity_id: '*phone*'
                          - entity_id: '*browser*'
                          - entity_id: '*watch*'
                          - entity_id: '*pad*'
                          - entity_id: '*tablet*'
                          - entity_id: >-
                              sensor.smarti_dashboard_tabbed_card_home_page_batteries_tab_title
                          - hidden_by: '*'
                      sort:
                        method: state
                        numeric: true
                        ignore_case: false
                        reverse: false
                      show_empty: true
                      card_param: cards
    type: custom:horizontal-layout
    background:
      opacity: 100
      alignment: center
      size: cover
      repeat: no-repeat
      attachment: fixed
      transparency: 70
      image: /local/images/smarti_images/smarti_dashboard_backgorund_image.jpg
  - title: Weather
    path: rooms
    icon: mdi:cube-unfolded
    type: custom:horizontal-layout
    layout:
      max_width: 2000
      max_cols: 1
    subview: true
    cards:
      - type: horizontal-stack
        cards:
          - type: vertical-stack
            cards:
              - type: custom:lottie-card
                animation: /local/smartianimations/error.json
                size: 200px
                loop: true
                autoplay: true
              - type: markdown
                content: >
                  **SMARTi Basic** is not supported on mobile devices.   To
                  enable this feature, please visit  
                  [https://www.smarti.dev](https://www.smarti.dev/smarti-store/p/smarti-powerflow-xe7ft)
                  to purchase and upgrade to the Pro version.
                style: |
                  ha-card {
                    background: rgba(0, 0, 0, 0.5); /* Slightly transparent background */
                    color: white;
                    text-align: center;
                    font-size: 1.2em;
                    padding: 20px;
                    border-radius: 10px;
                  }   
              - type: custom:mushroom-chips-card
                chips:
                  - type: spacer
                  - type: back
                  - type: menu
                  - type: spacer
        visibility:
          - condition: screen
            media_query: '(min-width: 0px) and (max-width: 767px)'
      - type: custom:mod-card
        card_mod:
          style:
            .: |
              ha-card {
                --ha-card-border-width: 0px;
                --ha-card-border-radius: 20px;
                background: linear-gradient(
                  to bottom right,
                  rgba(255, 255, 255, 0.15),
                  rgba(255, 255, 255, 0.05)
                );
                backdrop-filter: blur(15px);
                -webkit-backdrop-filter: blur(15px);
                box-shadow:
                  0 8px 32px 0 rgba(31, 38, 135, 0.37),
                  inset 0 0 0.5px rgba(255, 255, 255, 0.2); /* subtle inner glow */
                border: 5px solid rgba(255, 255, 255, 0.1);
                position: relative;
                overflow: hidden;
                border-radius: 100px 100px 10px 10px;
              }

              ha-card::before {
                content: '';
                position: absolute;
                top: -30%;
                left: -30%;
                width: 200%;
                height: 200%;
                background: radial-gradient(
                  circle at 30% 30%,
                  rgba(255, 255, 255, 0.3),
                  transparent 60%
                );
                transform: rotate(25deg);
                pointer-events: none;
              }
        card:
          type: conditional
          conditions:
            - condition: screen
              media_query: '(min-width: 768px)'
          card:
            type: vertical-stack
            cards:
              - type: horizontal-stack
                cards:
                  - type: custom:gap-card
                  - type: conditional
                    conditions:
                      - condition: or
                        conditions:
                          - entity: binary_sensor.smarti_internet
                            state: unavailable
                          - entity: binary_sensor.smarti_internet
                            state: unknown
                          - entity: sensor.browser_mod_installed
                            state_not: 'True'
                          - entity: alarm_control_panel.alarmo
                            state: unavailable
                          - entity: alarm_control_panel.alarmo
                            state: unknown
                          - entity: weather.forecast_home
                            state: unavailable
                          - entity: weather.forecast_home
                            state: unknown
                    card:
                      type: custom:button-card
                      name: ⚠️ Setup Required
                      icon: mdi:alert-circle
                      show_state: false
                      show_icon: true
                      show_name: true
                      tap_action:
                        action: navigate
                        navigation_path: /smarti-dashboard/settings3
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                          - divider-color: transparent
                        icon:
                          - color: red
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      card_mod:
                        style: |
                          ha-card {
                            border: 2px solid var(--border-color);
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                          }
                  - type: conditional
                    conditions:
                      - entity: alarm_control_panel.alarmo
                        state_not: unavailable
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_alarm'].state ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - font-size: 3em
                          - color: var(--primary-color)
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: more-info
                        entity: alarm_control_panel.alarmo
                      entity: alarm_control_panel.alarmo
                      card_mod:
                        style: |
                          ha-card {
                            background: radial-gradient(
                              circle at center,
                              rgba(0, 0, 0, 0.4) 0%,
                              rgba(0, 0, 0, 0.2) 10%,
                              rgba(0, 0, 0, 0) 40%
                            );
                            border-radius: 20px;
                            border: none
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            overflow: hidden;
                            position: relative;
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        entity: sensor.smarti_active_locks
                        above: 0
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_tabbed_card_locks_tab_title'].state
                        ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                          - animation: >
                              [[[ return
                              parseInt(states['sensor.smarti_active_locks'].state)
                              > 0 ? 'blink-red 1.5s infinite' : 'none'; ]]]
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              card:
                                type: entities
                              filter:
                                include:
                                  - domain: lock
                                    state: unlocked
                                  - domain: binary_sensor
                                    attributes:
                                      device_class: lock
                                    state: 'on'
                                exclude:
                                  - hidden_by: '*'
                              sort:
                                reverse: true
                      entity: sensor.smarti_active_locks
                      card_mod:
                        style: |
                          ha-card {
                            border: 2px solid var(--border-color);
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                          }

                          @keyframes blink-red {
                            0% {
                              color: var(--accent-color);
                            }
                            50% {
                              color: var(--primary-color);
                            }
                            100% {
                              color: var(--accent-color);
                            }
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        entity: sensor.smarti_active_motion_sensors
                        above: 0
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_motion'].state
                        ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              card:
                                type: entities
                              filter:
                                include:
                                  - domain: binary_sensor
                                    attributes:
                                      device_class: motion
                                    state: 'on'
                                exclude:
                                  - hidden_by: '*'
                              sort:
                                reverse: true
                      entity: sensor.smarti_active_motion_sensors
                      card_mod:
                        style: |
                          ha-card {
                            background: radial-gradient(
                              circle at center,
                              rgba(0, 0, 0, 0.4) 0%,
                              rgba(0, 0, 0, 0.2) 10%,
                              rgba(0, 0, 0, 0) 40%
                            );
                            border-radius: 20px;
                            border: none
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            overflow: hidden;
                            position: relative;
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        above: 0
                        entity: sensor.smarti_active_lights
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_lights'].state
                        ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              show_empty: false
                              card:
                                show_name: true
                                show_icon: true
                                show_state: true
                                type: glance
                                state_color: true
                                columns: 4
                              filter:
                                include:
                                  - domain: light
                                    state: 'on'
                                    options:
                                      tap_action:
                                        action: toggle
                                exclude:
                                  - hidden_by: '*'
                              sort:
                                method: none
                                reverse: false
                                numeric: false
                      entity: sensor.smarti_active_lights
                      card_mod:
                        style: |
                          ha-card {
                            background: radial-gradient(
                              circle at center,
                              rgba(0, 0, 0, 0.4) 0%,
                              rgba(0, 0, 0, 0.2) 10%,
                              rgba(0, 0, 0, 0) 40%
                            );
                            border-radius: 20px;
                            border: none
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            overflow: hidden;
                            position: relative;
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        above: 0
                        entity: sensor.smarti_active_doors
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_doors'].state ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              card:
                                type: entities
                              filter:
                                include:
                                  - domain: binary_sensor
                                    attributes:
                                      device_class: door
                                    state: 'on'
                                exclude:
                                  - hidden_by: '*'
                              sort:
                                reverse: true
                      entity: sensor.smarti_active_doors
                      card_mod:
                        style: |
                          ha-card {
                            background: radial-gradient(
                              circle at center,
                              rgba(0, 0, 0, 0.4) 0%,
                              rgba(0, 0, 0, 0.2) 10%,
                              rgba(0, 0, 0, 0) 40%
                            );
                            border-radius: 20px;
                            border: none
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            overflow: hidden;
                            position: relative;
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        entity: sensor.smarti_active_windows
                        above: 0
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_windows'].state
                        ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)'
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              card:
                                type: entities
                              filter:
                                include:
                                  - domain: binary_sensor
                                    attributes:
                                      device_class: window
                                    state: 'on'
                                exclude:
                                  - hidden_by: '*'
                              sort:
                                reverse: true
                      entity: sensor.smarti_active_windows
                      card_mod:
                        style: |
                          ha-card {
                            background: radial-gradient(
                              circle at center,
                              rgba(0, 0, 0, 0.4) 0%,
                              rgba(0, 0, 0, 0.2) 10%,
                              rgba(0, 0, 0, 0) 40%
                            );
                            border-radius: 20px;
                            border: none
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            overflow: hidden;
                            position: relative;
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        above: 0
                        entity: sensor.smarti_active_water_sensors
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_water'].state ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              card:
                                type: entities
                              filter:
                                include:
                                  - domain: binary_sensor
                                    attributes:
                                      device_class: moisture
                                    state: 'on'
                                exclude:
                                  - hidden_by: '*'
                              sort:
                                reverse: true
                      entity: sensor.smarti_active_water_sensors
                      card_mod:
                        style: |
                          ha-card {
                            border: 2px solid var(--border-color);
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        entity: sensor.smarti_active_smoke_detectors
                        above: 0
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_smoke'].state ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              card:
                                type: entities
                              filter:
                                include:
                                  - domain: binary_sensor
                                    attributes:
                                      device_class: smoke
                                    state: 'on'
                                exclude:
                                  - hidden_by: '*'
                              sort:
                                reverse: true
                      entity: sensor.smarti_active_smoke_detectors
                      card_mod:
                        style: |
                          ha-card {
                            background: radial-gradient(
                              circle at center,
                              rgba(0, 0, 0, 0.4) 0%,
                              rgba(0, 0, 0, 0.2) 10%,
                              rgba(0, 0, 0, 0) 40%
                            );
                            border-radius: 20px;
                            border: none
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            overflow: hidden;
                            position: relative;
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        above: 0
                        entity: sensor.smarti_active_gas_sensors
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_gas'].state ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              card:
                                type: entities
                              filter:
                                include:
                                  - domain: binary_sensor
                                    attributes:
                                      device_class: gas
                                    state: 'on'
                                exclude:
                                  - hidden_by: '*'
                              sort:
                                reverse: true
                      entity: sensor.smarti_active_gas_sensors
                      card_mod:
                        style: |
                          ha-card {
                            background: radial-gradient(
                              circle at center,
                              rgba(0, 0, 0, 0.4) 0%,
                              rgba(0, 0, 0, 0.2) 10%,
                              rgba(0, 0, 0, 0) 40%
                            );
                            border-radius: 20px;
                            border: none
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            overflow: hidden;
                            position: relative;
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        above: 0
                        entity: sensor.smarti_active_low_battery_devices_count
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_batteries'].state
                        ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              card:
                                show_header_toggle: false
                                type: entities
                                state_color: true
                              filter:
                                include:
                                  - entity_id: sensor.*_battery
                                  - entity_id: binary_sensor.*battery_low
                                  - entity_id: sensor.*.battery_state
                                exclude:
                                  - state: unavailable
                                  - state: '-'
                                  - state: unknown
                                  - state: none
                                  - state: medium
                                  - state: high
                                  - state: '= 0,0'
                                  - state: '>= 20'
                                  - state: 'off'
                                  - entity_id: sensor.campainha_ring_mqtt_battery
                                  - entity_id: sensor.campainha_battery
                                  - state: None
                                  - state: charging
                                  - state: discharging
                                  - state: high
                                  - name: /[Ll]ow/
                                  - name: /[Ss]tate/
                                  - entity_id: '*phone*'
                                  - entity_id: '*browser*'
                                  - entity_id: '*watch*'
                                  - entity_id: '*pad*'
                                  - entity_id: '*tablet*'
                                  - hidden_by: '*'
                              sort:
                                method: friendly_name
                                numeric: true
                                ignore_case: false
                                ip: false
                                reverse: false
                              show_empty: false
                      entity: sensor.smarti_active_low_battery_devices_count
                      card_mod:
                        style: |
                          ha-card {
                            background: radial-gradient(
                              circle at center,
                              rgba(0, 0, 0, 0.4) 0%,
                              rgba(0, 0, 0, 0.2) 10%,
                              rgba(0, 0, 0, 0) 40%
                            );
                            border-radius: 20px;
                            border: none
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            overflow: hidden;
                            position: relative;
                          }
                  - type: conditional
                    conditions:
                      - condition: state
                        entity: sensor.smarti_dynamic_power_sensor
                        state_not: unknown
                      - condition: state
                        entity: sensor.smarti_dynamic_power_sensor
                        state_not: unavailable
                      - condition: state
                        entity: input_boolean.smarti_show_energy_measurement
                        state_not: 'off'
                    card:
                      type: custom:mini-graph-card
                      entities:
                        - sensor.smarti_dynamic_power_sensor
                      show:
                        name: false
                        icon: true
                        legend: false
                        labels: false
                      icon: mdi:lightning-bolt
                      height: 50
                      color_thresholds:
                        - value: 3000
                          color: '#f39c12'
                        - value: 5000
                          color: '#d35400'
                        - value: 8000
                          color: '#c0392b'
                      hours_to_show: 6
                      points_per_hour: 10
                      align_icon: center
                      align_state: right
                      align_header: center
                      card_mod:
                        style: |
                          ha-card {
                            border: 2px solid var(--border-color);
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            background: transparent;
                            color: var(--primary-color); /* Ensures the text uses primary color */
                          }
                          ha-icon {
                            color: var(--primary-color); /* Sets the icon color */
                          }
                  - type: custom:gap-card
      - type: custom:button-card
        styles:
          card:
            - height: 5px
            - max-height: 10px
            - padding: 0
            - margin: 0
            - background-color: var(--primary-color);
        card_mod:
          style: |
            ha-card {
              border-radius: 1px;
              height: 2px;
              max-height: 2px;
              padding: 0;
              margin: 0;
              background: var(--primary-color);
            }
        visibility:
          - condition: screen
            media_query: '(min-width: 768px)'
      - type: custom:mod-card
        card_mod:
          style:
            .: |
              ha-card {
                --ha-card-border-width: 0px;
                --ha-card-border-radius: 20px;
                background: linear-gradient(
                  to bottom right,
                  rgba(255, 255, 255, 0.15),
                  rgba(255, 255, 255, 0.05)
                );
                backdrop-filter: blur(15px);
                -webkit-backdrop-filter: blur(15px);
                box-shadow:
                  0 8px 32px 0 rgba(31, 38, 135, 0.37),
                  inset 0 0 0.5px rgba(255, 255, 255, 0.2); /* subtle inner glow */
                border: 5px solid rgba(255, 255, 255, 0.1);
                position: relative;
                overflow: hidden;
                border-radius: 10px 10px 20px 20px;
              }

              ha-card::before {
                content: '';
                position: absolute;
                top: -30%;
                left: -30%;
                width: 200%;
                height: 200%;
                background: radial-gradient(
                  circle at 30% 30%,
                  rgba(255, 255, 255, 0.3),
                  transparent 60%
                );
                transform: rotate(25deg);
                pointer-events: none;
              }
        card:
          type: horizontal-stack
          cards:
            - type: custom:button-card
              name: Home
              show_icon: true
              icon: mdi:home
              show_name: false
              styles:
                card:
                  - max-height: 50px
                  - justify-content: center
                  - align-items: center
                icon:
                  - color: black
                  - max-height: 30px
                  - max-width: 30px
                  - min-height: 30px
                  - min-width: 20px
                  - color: var(--primary-color)
                name:
                  - color: black
              tap_action:
                action: navigate
                navigation_path: home#
              card_mod:
                style: |
                  ha-card {
                    border-radius: 5px 5px 5px 15px;

                  }
            - type: conditional
              conditions:
                - entity: input_boolean.smarti_show_weather_tab
                  state: 'on'
              card:
                type: custom:button-card
                name: Vær
                show_icon: true
                icon: mdi:weather-partly-cloudy
                show_name: false
                styles:
                  card:
                    - max-height: 50px
                    - justify-content: center
                    - align-items: center
                  icon:
                    - max-height: 30px
                    - max-width: 30px
                    - min-height: 30px
                    - min-width: 20px
                  name:
                    - color: black
                tap_action:
                  action: navigate
                  navigation_path: rooms#
                card_mod:
                  style: |
                    ha-card {
                      border-radius: 5px 5px 5px 5px;
                      background-color: var(--primary-color);
                    }
            - type: conditional
              conditions:
                - entity: input_boolean.smarti_show_light_tab
                  state: 'on'
              card:
                type: custom:button-card
                name: Light Control
                show_icon: true
                icon: mdi:lightbulb-group
                show_name: false
                styles:
                  card:
                    - max-height: 50px
                    - justify-content: center
                    - align-items: center
                  icon:
                    - color: black
                    - max-height: 30px
                    - max-width: 30px
                    - min-height: 30px
                    - min-width: 20px
                    - color: var(--primary-color)
                  name:
                    - color: black
                state:
                  - value: 'on'
                    styles:
                      card:
                        - background-color: '#FF7000'
                tap_action:
                  action: navigate
                  navigation_path: lights#
                card_mod:
                  style: |
                    ha-card {
                      border-radius: 5px 5px 5px 5px;   

                    }  
            - type: conditional
              conditions:
                - entity: input_boolean.smarti_show_climate_tab
                  state: 'on'
              card:
                type: custom:button-card
                name: Heating Control
                show_icon: true
                icon: mdi:thermometer-water
                show_name: false
                styles:
                  card:
                    - max-height: 50px
                    - justify-content: center
                    - align-items: center
                  icon:
                    - color: black
                    - max-height: 30px
                    - max-width: 30px
                    - min-height: 30px
                    - min-width: 20px
                    - color: var(--primary-color)
                  name:
                    - color: black
                tap_action:
                  action: navigate
                  navigation_path: heating#
                card_mod:
                  style: |
                    ha-card {
                      border-radius: 5px 5px 5px 5px;    
                    }
            - type: conditional
              conditions:
                - entity: input_boolean.smarti_show_misc_tab
                  state: 'on'
              card:
                type: custom:button-card
                name: Multimedia
                show_icon: true
                icon: mdi:multimedia
                show_name: false
                styles:
                  card:
                    - max-height: 50px
                    - justify-content: center
                    - align-items: center
                  icon:
                    - max-height: 30px
                    - max-width: 30px
                    - min-height: 30px
                    - min-width: 20px
                    - color: var(--primary-color)
                tap_action:
                  action: navigate
                  navigation_path: multimedia#
                card_mod:
                  style: |
                    ha-card {
                      border-radius: 5px 5px 5px 5px;
                    }
            - type: conditional
              conditions:
                - entity: input_boolean.smarti_show_security_tab
                  state: 'on'
              card:
                type: custom:button-card
                name: Security
                show_icon: true
                icon: mdi:shield
                show_name: false
                styles:
                  card:
                    - max-height: 50px
                    - justify-content: center
                    - align-items: center
                  icon:
                    - color: black
                    - max-height: 30px
                    - max-width: 30px
                    - min-height: 30px
                    - min-width: 20px
                    - color: var(--primary-color)
                  name:
                    - color: black
                tap_action:
                  action: navigate
                  navigation_path: cameras#
                card_mod:
                  style: |
                    ha-card {
                      border-radius: 5px 5px 5px 5px;    
                    }
            - type: conditional
              conditions:
                - entity: input_boolean.smarti_show_energy_tab
                  state: 'on'
              card:
                type: custom:button-card
                name: Power Control
                show_icon: true
                icon: mdi:lightning-bolt
                show_name: false
                styles:
                  card:
                    - max-height: 50px
                    - justify-content: center
                    - align-items: center
                  icon:
                    - color: black
                    - max-height: 30px
                    - max-width: 30px
                    - min-height: 30px
                    - min-width: 20px
                    - color: var(--primary-color)
                  name:
                    - color: black
                tap_action:
                  action: navigate
                  navigation_path: power#
                card_mod:
                  style: |
                    ha-card {
                      border-radius: 5px 5px 5px 5px;    
                    }
            - type: custom:button-card
              name: Settings
              show_icon: true
              icon: mdi:cog
              show_name: false
              styles:
                card:
                  - max-height: 50px
                  - justify-content: center
                  - align-items: center
                icon:
                  - max-height: 30px
                  - max-width: 30px
                  - min-height: 30px
                  - min-width: 20px
                  - color: var(--primary-color)
                name:
                  - color: black
              tap_action:
                action: navigate
                navigation_path: settings2#
              card_mod:
                style: |
                  ha-card{
                    border-radius: 5px 5px 15px 5px;
                  }  
          visibility:
            - condition: screen
              media_query: '(min-width: 0px)'
      - type: custom:gap-card
        height: 25
        visibility:
          - condition: screen
            media_query: '(min-width: 0px) and (max-width: 767px)'
      - type: custom:mushroom-chips-card
        chips:
          - type: spacer
          - type: back
          - type: menu
          - type: spacer
        visibility:
          - condition: screen
            media_query: ''
      - type: custom:mod-card
        card_mod:
          style:
            .: |
              ha-card {
                --ha-card-border-width: 0px;
                --ha-card-border-radius: 20px;
                --ha-card-background: transparent;
              }           
        card:
          type: horizontal-stack
          cards:
            - type: horizontal-stack
              cards:
                - type: vertical-stack
                  cards:
                    - type: custom:gap-card
                    - type: custom:mushroom-title-card
                      title: null
                      subtitle: >-
                        {{
                        states('sensor.smarti_dashboard_tabbed_card_weather_page_hourly_tab_subtitle')
                        }}
                      alignment: center
                    - type: custom:weather-chart-card
                      entity: weather.forecast_home
                      show_time: true
                      show_date: true
                      units:
                        speed: m/s
                        pressure: ''
                      forecast:
                        precipitation_type: ''
                        style: style2
                        type: hourly
                      animated_icons: true
                    - type: custom:gap-card
                - type: vertical-stack
                  cards:
                    - type: custom:gap-card
                    - type: custom:mushroom-title-card
                      title: >-
                        {{ states('sensor.smarti_dashboard_weather_page_title')
                        }}
                      subtitle: >-
                        {{
                        states('sensor.smarti_dashboard_weather_page_subtitle')
                        }}
                      alignment: center
                    - type: custom:lottie-card
                      animation: /local/smartianimations/weather.json
                      size: 150px
                      loop: true
                      autoplay: true
                    - type: markdown
                      content: >
                        {% set condition = states('weather.forecast_home') %} {%
                        set icons = {
                          'clear': '☀️',
                          'partlycloudy': '⛅',
                          'cloudy': '☁️',
                          'rainy': '🌧️',
                          'snowy': '❄️',
                          'fog': '🌫️',
                          'windy': '💨',
                          'hail': '🌨️',
                          'lightning': '🌩️',
                          'lightning-rainy': '⛈️'
                        } %} **{{ states('sensor.current_weather_description')
                        }}**
                      card_mod:
                        style: |
                          ha-card {
                            text-align: center;
                            padding: 16px;
                          }
                    - type: custom:gap-card
                - type: vertical-stack
                  cards:
                    - type: custom:gap-card
                    - type: custom:mushroom-title-card
                      title: null
                      subtitle: >-
                        {{
                        states('sensor.smarti_dashboard_tabbed_card_weather_page_weekly_tab_subtitle')
                        }}
                      alignment: center
                    - type: custom:weather-chart-card
                      entity: weather.forecast_home
                      show_main: true
                      show_temperature: true
                      show_current_condition: true
                      show_attributes: true
                      show_time: false
                      show_time_seconds: false
                      show_day: false
                      show_date: false
                      show_humidity: true
                      show_pressure: true
                      show_wind_direction: true
                      show_wind_speed: true
                      show_sun: true
                      show_feels_like: false
                      show_dew_point: false
                      show_wind_gust_speed: false
                      show_visibility: false
                      show_last_changed: false
                      use_12hour_format: false
                      icons_size: 25
                      animated_icons: false
                      icon_style: style1
                      forecast:
                        precipitation_type: rainfall
                        show_probability: false
                        labels_font_size: '11'
                        precip_bar_size: '100'
                        style: style1
                        show_wind_forecast: true
                        condition_icons: true
                        round_temp: false
                        type: daily
                        number_of_forecasts: '0'
                        disable_animation: false
                      units:
                        pressure: ''
                        speed: ''
                    - type: custom:gap-card
        visibility:
          - condition: screen
            media_query: '(min-width: 768px)'
      - type: custom:button-card
        styles:
          card:
            - height: 5px
            - max-height: 10px
            - padding: 0
            - margin: 0
            - background-color: var(--primary-color);
        card_mod:
          style: |
            ha-card {
              border-radius: 1px;
              height: 2px;
              max-height: 2px;
              padding: 0;
              margin: 0;
              background: var(--primary-color);
            }
        visibility:
          - condition: screen
            media_query: '(min-width: 768px)'
      - type: custom:mod-card
        card_mod:
          style:
            .: |
              ha-card {
                --ha-card-border-width: 0px;
                --ha-card-border-radius: 20px;
                --ha-card-background: transparent;
              }           
        card:
          type: horizontal-stack
          cards:
            - type: horizontal-stack
              cards:
                - type: vertical-stack
                  cards:
                    - type: custom:gap-card
                    - type: horizontal-stack
                      cards:
                        - type: custom:gap-card
                        - type: custom:mushroom-title-card
                          title: >-
                            {{
                            states('sensor.smarti_dashboard_tabbed_card_weather_page_wind_title')
                            }}
                          alignment: center
                        - type: custom:lottie-card
                          animation: /local/smartianimations/wind.json
                          size: 100px
                          loop: true
                          autoplay: true
                        - type: custom:gap-card
                    - type: custom:config-template-card
                      entities:
                        - zone.home
                      card:
                        title: null
                        type: iframe
                        url: >-
                          ${'https://embed.windy.com/embed.html?type=map&location=coordinates&metricRain=default&metricTemp=default&metricWind=default&zoom=9&overlay=wind&product=ecmwf&level=surface&lat='
                          + states['zone.home'].attributes.latitude + '&lon=' +
                          states['zone.home'].attributes.longitude +
                          '&detailLat=' +
                          states['zone.home'].attributes.latitude +
                          '&detailLon=' +
                          states['zone.home'].attributes.longitude +
                          '&marker=true&play=1'}
                        aspect_ratio: 100%
                    - type: custom:gap-card
                - type: vertical-stack
                  cards:
                    - type: custom:gap-card
                    - type: horizontal-stack
                      cards:
                        - type: custom:gap-card
                        - type: custom:mushroom-title-card
                          title: >-
                            {{
                            states('sensor.smarti_dashboard_tabbed_card_weather_page_rain_title')
                            }}
                          alignment: center
                        - type: custom:lottie-card
                          animation: /local/smartianimations/rain.json
                          size: 100px
                          loop: true
                          autoplay: true
                        - type: custom:gap-card
                    - type: custom:config-template-card
                      entities:
                        - zone.home
                      card:
                        type: iframe
                        url: >-
                          ${'https://embed.windy.com/embed.html?type=map&location=coordinates&metricRain=default&metricTemp=default&metricWind=default&zoom=9&overlay=rain&product=ecmwf&level=surface&lat='
                          + states['zone.home'].attributes.latitude + '&lon=' +
                          states['zone.home'].attributes.longitude +
                          '&detailLat=' +
                          states['zone.home'].attributes.latitude +
                          '&detailLon=' +
                          states['zone.home'].attributes.longitude +
                          '&marker=true&play=1'}
                        aspect_ratio: 100%
                    - type: custom:gap-card
                - type: vertical-stack
                  cards:
                    - type: custom:gap-card
                    - type: horizontal-stack
                      cards:
                        - type: custom:gap-card
                        - type: custom:mushroom-title-card
                          title: >-
                            {{
                            states('sensor.smarti_dashboard_tabbed_card_weather_page_temperature_title')
                            }}
                          alignment: center
                        - type: custom:lottie-card
                          animation: /local/smartianimations/temperature.json
                          size: 100px
                          loop: true
                          autoplay: true
                        - type: custom:gap-card
                    - type: custom:config-template-card
                      entities:
                        - zone.home
                      card:
                        type: iframe
                        url: >-
                          ${'https://embed.windy.com/embed.html?type=map&location=coordinates&metricRain=default&metricTemp=default&metricWind=default&zoom=9&overlay=temp&product=ecmwf&level=surface&lat='
                          + states['zone.home'].attributes.latitude + '&lon=' +
                          states['zone.home'].attributes.longitude +
                          '&detailLat=' +
                          states['zone.home'].attributes.latitude +
                          '&detailLon=' +
                          states['zone.home'].attributes.longitude +
                          '&marker=true&play=1'}
                        aspect_ratio: 100%
                    - type: custom:gap-card
        visibility:
          - condition: screen
            media_query: '(min-width: 768px)'
      - type: custom:gap-card
        height: 25
    background:
      opacity: 100
      alignment: center
      size: cover
      repeat: no-repeat
      attachment: fixed
      transparency: 70
      image: /local/images/smarti_images/smarti_dashboard_backgorund_image.jpg
  - title: Lights
    path: lights
    icon: mdi:lightbulb
    type: custom:masonry-layout
    layout:
      max_width: 2000
      max_cols: 1
    subview: true
    cards:
      - type: horizontal-stack
        cards:
          - type: vertical-stack
            cards:
              - type: custom:lottie-card
                animation: /local/smartianimations/error.json
                size: 200px
                loop: true
                autoplay: true
              - type: markdown
                content: >
                  **SMARTi Basic** is not supported on mobile devices.   To
                  enable this feature, please visit  
                  [https://www.smarti.dev](https://www.smarti.dev/smarti-store/p/smarti-powerflow-xe7ft)
                  to purchase and upgrade to the Pro version.
                style: |
                  ha-card {
                    background: rgba(0, 0, 0, 0.5); /* Slightly transparent background */
                    color: white;
                    text-align: center;
                    font-size: 1.2em;
                    padding: 20px;
                    border-radius: 10px;
                  }   
              - type: custom:mushroom-chips-card
                chips:
                  - type: spacer
                  - type: back
                  - type: menu
                  - type: spacer
        visibility:
          - condition: screen
            media_query: '(min-width: 0px) and (max-width: 767px)'
      - type: custom:mod-card
        card_mod:
          style:
            .: |
              ha-card {
                --ha-card-border-width: 0px;
                --ha-card-border-radius: 20px;
                background: linear-gradient(
                  to bottom right,
                  rgba(255, 255, 255, 0.15),
                  rgba(255, 255, 255, 0.05)
                );
                backdrop-filter: blur(15px);
                -webkit-backdrop-filter: blur(15px);
                box-shadow:
                  0 8px 32px 0 rgba(31, 38, 135, 0.37),
                  inset 0 0 0.5px rgba(255, 255, 255, 0.2); /* subtle inner glow */
                border: 5px solid rgba(255, 255, 255, 0.1);
                position: relative;
                overflow: hidden;
                border-radius: 100px 100px 10px 10px;
              }

              ha-card::before {
                content: '';
                position: absolute;
                top: -30%;
                left: -30%;
                width: 200%;
                height: 200%;
                background: radial-gradient(
                  circle at 30% 30%,
                  rgba(255, 255, 255, 0.3),
                  transparent 60%
                );
                transform: rotate(25deg);
                pointer-events: none;
              }
        card:
          type: conditional
          conditions:
            - condition: screen
              media_query: '(min-width: 768px)'
          card:
            type: vertical-stack
            cards:
              - type: horizontal-stack
                cards:
                  - type: custom:gap-card
                  - type: conditional
                    conditions:
                      - condition: or
                        conditions:
                          - entity: binary_sensor.smarti_internet
                            state: unavailable
                          - entity: binary_sensor.smarti_internet
                            state: unknown
                          - entity: sensor.browser_mod_installed
                            state_not: 'True'
                          - entity: alarm_control_panel.alarmo
                            state: unavailable
                          - entity: alarm_control_panel.alarmo
                            state: unknown
                          - entity: weather.forecast_home
                            state: unavailable
                          - entity: weather.forecast_home
                            state: unknown
                    card:
                      type: custom:button-card
                      name: ⚠️ Setup Required
                      icon: mdi:alert-circle
                      show_state: false
                      show_icon: true
                      show_name: true
                      tap_action:
                        action: navigate
                        navigation_path: /smarti-dashboard/settings3
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                          - divider-color: transparent
                        icon:
                          - color: red
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      card_mod:
                        style: |
                          ha-card {
                            border: 2px solid var(--border-color);
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                          }
                  - type: conditional
                    conditions:
                      - entity: alarm_control_panel.alarmo
                        state_not: unavailable
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_alarm'].state ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - font-size: 3em
                          - color: var(--primary-color)
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: more-info
                        entity: alarm_control_panel.alarmo
                      entity: alarm_control_panel.alarmo
                      card_mod:
                        style: |
                          ha-card {
                            background: radial-gradient(
                              circle at center,
                              rgba(0, 0, 0, 0.4) 0%,
                              rgba(0, 0, 0, 0.2) 10%,
                              rgba(0, 0, 0, 0) 40%
                            );
                            border-radius: 20px;
                            border: none
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            overflow: hidden;
                            position: relative;
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        entity: sensor.smarti_active_locks
                        above: 0
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_tabbed_card_locks_tab_title'].state
                        ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                          - animation: >
                              [[[ return
                              parseInt(states['sensor.smarti_active_locks'].state)
                              > 0 ? 'blink-red 1.5s infinite' : 'none'; ]]]
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              card:
                                type: entities
                              filter:
                                include:
                                  - domain: lock
                                    state: unlocked
                                  - domain: binary_sensor
                                    attributes:
                                      device_class: lock
                                    state: 'on'
                                exclude:
                                  - hidden_by: '*'
                              sort:
                                reverse: true
                      entity: sensor.smarti_active_locks
                      card_mod:
                        style: |
                          ha-card {
                            border: 2px solid var(--border-color);
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                          }

                          @keyframes blink-red {
                            0% {
                              color: var(--accent-color);
                            }
                            50% {
                              color: var(--primary-color);
                            }
                            100% {
                              color: var(--accent-color);
                            }
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        entity: sensor.smarti_active_motion_sensors
                        above: 0
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_motion'].state
                        ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              card:
                                type: entities
                              filter:
                                include:
                                  - domain: binary_sensor
                                    attributes:
                                      device_class: motion
                                    state: 'on'
                                exclude:
                                  - hidden_by: '*'
                              sort:
                                reverse: true
                      entity: sensor.smarti_active_motion_sensors
                      card_mod:
                        style: |
                          ha-card {
                            background: radial-gradient(
                              circle at center,
                              rgba(0, 0, 0, 0.4) 0%,
                              rgba(0, 0, 0, 0.2) 10%,
                              rgba(0, 0, 0, 0) 40%
                            );
                            border-radius: 20px;
                            border: none
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            overflow: hidden;
                            position: relative;
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        above: 0
                        entity: sensor.smarti_active_lights
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_lights'].state
                        ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              show_empty: false
                              card:
                                show_name: true
                                show_icon: true
                                show_state: true
                                type: glance
                                state_color: true
                                columns: 4
                              filter:
                                include:
                                  - domain: light
                                    state: 'on'
                                    options:
                                      tap_action:
                                        action: toggle
                                exclude:
                                  - hidden_by: '*'
                              sort:
                                method: none
                                reverse: false
                                numeric: false
                      entity: sensor.smarti_active_lights
                      card_mod:
                        style: |
                          ha-card {
                            background: radial-gradient(
                              circle at center,
                              rgba(0, 0, 0, 0.4) 0%,
                              rgba(0, 0, 0, 0.2) 10%,
                              rgba(0, 0, 0, 0) 40%
                            );
                            border-radius: 20px;
                            border: none
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            overflow: hidden;
                            position: relative;
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        above: 0
                        entity: sensor.smarti_active_doors
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_doors'].state ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              card:
                                type: entities
                              filter:
                                include:
                                  - domain: binary_sensor
                                    attributes:
                                      device_class: door
                                    state: 'on'
                                exclude:
                                  - hidden_by: '*'
                              sort:
                                reverse: true
                      entity: sensor.smarti_active_doors
                      card_mod:
                        style: |
                          ha-card {
                            background: radial-gradient(
                              circle at center,
                              rgba(0, 0, 0, 0.4) 0%,
                              rgba(0, 0, 0, 0.2) 10%,
                              rgba(0, 0, 0, 0) 40%
                            );
                            border-radius: 20px;
                            border: none
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            overflow: hidden;
                            position: relative;
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        entity: sensor.smarti_active_windows
                        above: 0
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_windows'].state
                        ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)'
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              card:
                                type: entities
                              filter:
                                include:
                                  - domain: binary_sensor
                                    attributes:
                                      device_class: window
                                    state: 'on'
                                exclude:
                                  - hidden_by: '*'
                              sort:
                                reverse: true
                      entity: sensor.smarti_active_windows
                      card_mod:
                        style: |
                          ha-card {
                            background: radial-gradient(
                              circle at center,
                              rgba(0, 0, 0, 0.4) 0%,
                              rgba(0, 0, 0, 0.2) 10%,
                              rgba(0, 0, 0, 0) 40%
                            );
                            border-radius: 20px;
                            border: none
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            overflow: hidden;
                            position: relative;
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        above: 0
                        entity: sensor.smarti_active_water_sensors
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_water'].state ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              card:
                                type: entities
                              filter:
                                include:
                                  - domain: binary_sensor
                                    attributes:
                                      device_class: moisture
                                    state: 'on'
                                exclude:
                                  - hidden_by: '*'
                              sort:
                                reverse: true
                      entity: sensor.smarti_active_water_sensors
                      card_mod:
                        style: |
                          ha-card {
                            border: 2px solid var(--border-color);
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        entity: sensor.smarti_active_smoke_detectors
                        above: 0
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_smoke'].state ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              card:
                                type: entities
                              filter:
                                include:
                                  - domain: binary_sensor
                                    attributes:
                                      device_class: smoke
                                    state: 'on'
                                exclude:
                                  - hidden_by: '*'
                              sort:
                                reverse: true
                      entity: sensor.smarti_active_smoke_detectors
                      card_mod:
                        style: |
                          ha-card {
                            background: radial-gradient(
                              circle at center,
                              rgba(0, 0, 0, 0.4) 0%,
                              rgba(0, 0, 0, 0.2) 10%,
                              rgba(0, 0, 0, 0) 40%
                            );
                            border-radius: 20px;
                            border: none
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            overflow: hidden;
                            position: relative;
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        above: 0
                        entity: sensor.smarti_active_gas_sensors
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_gas'].state ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              card:
                                type: entities
                              filter:
                                include:
                                  - domain: binary_sensor
                                    attributes:
                                      device_class: gas
                                    state: 'on'
                                exclude:
                                  - hidden_by: '*'
                              sort:
                                reverse: true
                      entity: sensor.smarti_active_gas_sensors
                      card_mod:
                        style: |
                          ha-card {
                            background: radial-gradient(
                              circle at center,
                              rgba(0, 0, 0, 0.4) 0%,
                              rgba(0, 0, 0, 0.2) 10%,
                              rgba(0, 0, 0, 0) 40%
                            );
                            border-radius: 20px;
                            border: none
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            overflow: hidden;
                            position: relative;
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        above: 0
                        entity: sensor.smarti_active_low_battery_devices_count
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_batteries'].state
                        ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              card:
                                show_header_toggle: false
                                type: entities
                                state_color: true
                              filter:
                                include:
                                  - entity_id: sensor.*_battery
                                  - entity_id: binary_sensor.*battery_low
                                  - entity_id: sensor.*.battery_state
                                exclude:
                                  - state: unavailable
                                  - state: '-'
                                  - state: unknown
                                  - state: none
                                  - state: medium
                                  - state: high
                                  - state: '= 0,0'
                                  - state: '>= 20'
                                  - state: 'off'
                                  - entity_id: sensor.campainha_ring_mqtt_battery
                                  - entity_id: sensor.campainha_battery
                                  - state: None
                                  - state: charging
                                  - state: discharging
                                  - state: high
                                  - name: /[Ll]ow/
                                  - name: /[Ss]tate/
                                  - entity_id: '*phone*'
                                  - entity_id: '*browser*'
                                  - entity_id: '*watch*'
                                  - entity_id: '*pad*'
                                  - entity_id: '*tablet*'
                                  - hidden_by: '*'
                              sort:
                                method: friendly_name
                                numeric: true
                                ignore_case: false
                                ip: false
                                reverse: false
                              show_empty: false
                      entity: sensor.smarti_active_low_battery_devices_count
                      card_mod:
                        style: |
                          ha-card {
                            background: radial-gradient(
                              circle at center,
                              rgba(0, 0, 0, 0.4) 0%,
                              rgba(0, 0, 0, 0.2) 10%,
                              rgba(0, 0, 0, 0) 40%
                            );
                            border-radius: 20px;
                            border: none
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            overflow: hidden;
                            position: relative;
                          }
                  - type: conditional
                    conditions:
                      - condition: state
                        entity: sensor.smarti_dynamic_power_sensor
                        state_not: unknown
                      - condition: state
                        entity: sensor.smarti_dynamic_power_sensor
                        state_not: unavailable
                      - condition: state
                        entity: input_boolean.smarti_show_energy_measurement
                        state_not: 'off'
                    card:
                      type: custom:mini-graph-card
                      entities:
                        - sensor.smarti_dynamic_power_sensor
                      show:
                        name: false
                        icon: true
                        legend: false
                        labels: false
                      icon: mdi:lightning-bolt
                      height: 50
                      color_thresholds:
                        - value: 3000
                          color: '#f39c12'
                        - value: 5000
                          color: '#d35400'
                        - value: 8000
                          color: '#c0392b'
                      hours_to_show: 6
                      points_per_hour: 10
                      align_icon: center
                      align_state: right
                      align_header: center
                      card_mod:
                        style: |
                          ha-card {
                            border: 2px solid var(--border-color);
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            background: transparent;
                            color: var(--primary-color); /* Ensures the text uses primary color */
                          }
                          ha-icon {
                            color: var(--primary-color); /* Sets the icon color */
                          }
                  - type: custom:gap-card
      - type: custom:button-card
        styles:
          card:
            - height: 5px
            - max-height: 10px
            - padding: 0
            - margin: 0
            - background-color: var(--primary-color);
        card_mod:
          style: |
            ha-card {
              border-radius: 1px;
              height: 2px;
              max-height: 2px;
              padding: 0;
              margin: 0;
              background: var(--primary-color);
            }
        visibility:
          - condition: screen
            media_query: '(min-width: 768px)'
      - type: custom:mod-card
        card_mod:
          style:
            .: |
              ha-card {
                --ha-card-border-width: 0px;
                --ha-card-border-radius: 20px;
                background: linear-gradient(
                  to bottom right,
                  rgba(255, 255, 255, 0.15),
                  rgba(255, 255, 255, 0.05)
                );
                backdrop-filter: blur(15px);
                -webkit-backdrop-filter: blur(15px);
                box-shadow:
                  0 8px 32px 0 rgba(31, 38, 135, 0.37),
                  inset 0 0 0.5px rgba(255, 255, 255, 0.2); /* subtle inner glow */
                border: 5px solid rgba(255, 255, 255, 0.1);
                position: relative;
                overflow: hidden;
                border-radius: 10px 10px 20px 20px;
              }

              ha-card::before {
                content: '';
                position: absolute;
                top: -30%;
                left: -30%;
                width: 200%;
                height: 200%;
                background: radial-gradient(
                  circle at 30% 30%,
                  rgba(255, 255, 255, 0.3),
                  transparent 60%
                );
                transform: rotate(25deg);
                pointer-events: none;
              }
        card:
          type: horizontal-stack
          cards:
            - type: custom:button-card
              name: Home
              show_icon: true
              icon: mdi:home
              show_name: false
              styles:
                card:
                  - max-height: 50px
                  - justify-content: center
                  - align-items: center
                icon:
                  - color: black
                  - max-height: 30px
                  - max-width: 30px
                  - min-height: 30px
                  - min-width: 20px
                  - color: var(--primary-color)
                name:
                  - color: black
              tap_action:
                action: navigate
                navigation_path: home#
              card_mod:
                style: |
                  ha-card {
                    border-radius: 5px 5px 5px 15px;

                  }
            - type: conditional
              conditions:
                - entity: input_boolean.smarti_show_weather_tab
                  state: 'on'
              card:
                type: custom:button-card
                name: Rooms
                show_icon: true
                icon: mdi:weather-partly-cloudy
                show_name: false
                styles:
                  card:
                    - max-height: 50px
                    - justify-content: center
                    - align-items: center
                  icon:
                    - color: black
                    - max-height: 30px
                    - max-width: 30px
                    - min-height: 30px
                    - min-width: 20px
                    - color: var(--primary-color)
                  name:
                    - color: black
                tap_action:
                  action: navigate
                  navigation_path: rooms#
                card_mod:
                  style: |
                    ha-card {
                      border-radius: 5px 5px 5px 5px;
                    }
            - type: conditional
              conditions:
                - entity: input_boolean.smarti_show_light_tab
                  state: 'on'
              card:
                type: custom:button-card
                name: Light Control
                show_icon: true
                icon: mdi:lightbulb-group
                show_name: false
                styles:
                  card:
                    - max-height: 50px
                    - justify-content: center
                    - align-items: center
                  icon:
                    - max-height: 30px
                    - max-width: 30px
                    - min-height: 30px
                    - min-width: 20px
                  name:
                    - color: black
                state:
                  - value: 'on'
                    styles:
                      card:
                        - background-color: '#FF7000'
                tap_action:
                  action: navigate
                  navigation_path: lights#
                card_mod:
                  style: |
                    ha-card {
                      border-radius: 5px 5px 5px 5px;   
                      background-color: var(--primary-color);
                    }  
            - type: conditional
              conditions:
                - entity: input_boolean.smarti_show_climate_tab
                  state: 'on'
              card:
                type: custom:button-card
                name: Heating Control
                show_icon: true
                icon: mdi:thermometer-water
                show_name: false
                styles:
                  card:
                    - max-height: 50px
                    - justify-content: center
                    - align-items: center
                  icon:
                    - color: black
                    - max-height: 30px
                    - max-width: 30px
                    - min-height: 30px
                    - min-width: 20px
                    - color: var(--primary-color)
                  name:
                    - color: black
                tap_action:
                  action: navigate
                  navigation_path: heating#
                card_mod:
                  style: |
                    ha-card {
                      border-radius: 5px 5px 5px 5px;    
                    }
            - type: conditional
              conditions:
                - entity: input_boolean.smarti_show_misc_tab
                  state: 'on'
              card:
                type: custom:button-card
                name: Multimedia
                show_icon: true
                icon: mdi:multimedia
                show_name: false
                styles:
                  card:
                    - max-height: 50px
                    - justify-content: center
                    - align-items: center
                  icon:
                    - max-height: 30px
                    - max-width: 30px
                    - min-height: 30px
                    - min-width: 20px
                    - color: var(--primary-color)
                tap_action:
                  action: navigate
                  navigation_path: multimedia#
                card_mod:
                  style: |
                    ha-card {
                      border-radius: 5px 5px 5px 5px;
                    }
            - type: conditional
              conditions:
                - entity: input_boolean.smarti_show_security_tab
                  state: 'on'
              card:
                type: custom:button-card
                name: Security
                show_icon: true
                icon: mdi:shield
                show_name: false
                styles:
                  card:
                    - max-height: 50px
                    - justify-content: center
                    - align-items: center
                  icon:
                    - color: black
                    - max-height: 30px
                    - max-width: 30px
                    - min-height: 30px
                    - min-width: 20px
                    - color: var(--primary-color)
                  name:
                    - color: black
                tap_action:
                  action: navigate
                  navigation_path: cameras#
                card_mod:
                  style: |
                    ha-card {
                      border-radius: 5px 5px 5px 5px;    
                    }
            - type: conditional
              conditions:
                - entity: input_boolean.smarti_show_energy_tab
                  state: 'on'
              card:
                type: custom:button-card
                name: Power Control
                show_icon: true
                icon: mdi:lightning-bolt
                show_name: false
                styles:
                  card:
                    - max-height: 50px
                    - justify-content: center
                    - align-items: center
                  icon:
                    - color: black
                    - max-height: 30px
                    - max-width: 30px
                    - min-height: 30px
                    - min-width: 20px
                    - color: var(--primary-color)
                  name:
                    - color: black
                tap_action:
                  action: navigate
                  navigation_path: power#
                card_mod:
                  style: |
                    ha-card {
                      border-radius: 5px 5px 5px 5px;    
                    }
            - type: custom:button-card
              name: Settings
              show_icon: true
              icon: mdi:cog
              show_name: false
              styles:
                card:
                  - max-height: 50px
                  - justify-content: center
                  - align-items: center
                icon:
                  - max-height: 30px
                  - max-width: 30px
                  - min-height: 30px
                  - min-width: 20px
                  - color: var(--primary-color)
                name:
                  - color: black
              tap_action:
                action: navigate
                navigation_path: settings2#
              card_mod:
                style: |
                  ha-card{
                    border-radius: 5px 5px 15px 5px;
                  }  
          visibility:
            - condition: screen
              media_query: '(min-width: 0px)'
      - type: custom:gap-card
        height: 25
        visibility:
          - condition: screen
            media_query: '(min-width: 0px) and (max-width: 767px)'
      - type: custom:mod-card
        card_mod:
          style:
            .: |
              ha-card {
                --ha-card-border-width: 0px;
                --ha-card-border-radius: 20px;
                --ha-card-background: transparent;
              }           
        card:
          type: horizontal-stack
          cards:
            - type: horizontal-stack
              cards:
                - type: vertical-stack
                  cards:
                    - type: custom:gap-card
                    - type: custom:mushroom-title-card
                      title: null
                      subtitle: >-
                        {{
                        states('sensor.smarti_dashboard_tabbed_card_lights_page_scenes_subtitle')
                        }}
                      alignment: center
                    - type: custom:auto-entities
                      card:
                        type: grid
                        columns: 2
                        square: false
                      card_param: cards
                      filter:
                        template: >-
                          {% set filter = ['scene.scene1','scene.scene2'] %} {%
                          set hidden_entities = states 
                              | selectattr('attributes.is_hidden','eq', true)
                              | map(attribute='entity_id') 
                              | list 
                              | sort(attribute='name')
                          %}

                          {%- set scenes = states.scene
                            | rejectattr('entity_id', 'in', filter)
                            | rejectattr('entity_id', 'in', hidden_entities)
                            | list 
                            | sort(attribute='name') -%}

                          {% if scenes | length == 0 %}
                            {{{
                              'type': 'custom:button-text-card',
                              'title': '[[[ return states["sensor.smarti_dashboard_tabbed_card_lights_page_scenes_missing_title"]?.state || "No title found"; ]]]',
                              'subtitle' : '[[[ return states["sensor.smarti_dashboard_tabbed_card_lights_page_scenes_missing_subtitle"]?.state || "No title found"; ]]]',
                              'icon': 'mdi:chat-question',
                              'background_color': 'var(--primary-color)',
                            }}},
                          {% else %}
                            {%- for scene in scenes -%}
                              {{{
                                'type': 'custom:bubble-card',
                                'card_type': 'button',
                                'entity': scene.entity_id,
                                'icon': 'mdi:play',
                                'show_state': 'true'
                              }}},
                            {%- endfor -%}
                          {% endif %}
                        exclude:
                          - hidden_by: '*'
                    - type: custom:gap-card
                - type: vertical-stack
                  cards:
                    - type: custom:gap-card
                    - type: custom:mushroom-title-card
                      title: >-
                        {{ states('sensor.smarti_dashboard_lights_page_title')
                        }}
                      subtitle: >-
                        {{
                        states('sensor.smarti_dashboard_lights_page_subtitle')
                        }}
                      alignment: center
                    - type: custom:lottie-card
                      animation: /local/smartianimations/lightbulb_white.json
                      size: 150px
                      loop: true
                      autoplay: true
                    - type: custom:gap-card
                - type: vertical-stack
                  cards:
                    - type: custom:gap-card
                    - type: custom:mushroom-title-card
                      title: null
                      subtitle: >-
                        {{
                        states('sensor.smarti_dashboard_lights_page_light_statistics')
                        }}
                      alignment: center
                    - type: custom:apexcharts-card
                      header:
                        show: true
                        title: 🟢 Lights On (Last 24 Hours)
                      graph_span: 24h
                      series:
                        - entity: sensor.smarti_active_lights
                          name: Lights On
                          type: column
                          color: var(--secondary-color)
                          group_by:
                            duration: 1h
                            func: max
                      apex_config:
                        chart:
                          background: transparent
                          foreColor: var(--text-primary-color)
                        plotOptions:
                          bar:
                            borderRadius: 5
                            columnWidth: 50%
                        fill:
                          type: gradient
                          gradient:
                            shade: light
                            type: vertical
                            gradientToColors:
                              - var(--primary-color)
                            stops:
                              - 0
                              - 100
                        yaxis:
                          labels:
                            style:
                              colors: var(--primary-color)
                        xaxis:
                          labels:
                            rotate: -45
                            style:
                              colors: var(--primary-color)
                        grid:
                          borderColor: rgba(255, 255, 255, 0.2)
        visibility:
          - condition: screen
            media_query: '(min-width: 768px)'
      - type: custom:gap-card
        height: 25
      - type: custom:button-card
        styles:
          card:
            - height: 5px
            - max-height: 10px
            - padding: 0
            - margin: 0
            - background-color: var(--primary-color);
        card_mod:
          style: |
            ha-card {
              border-radius: 1px;
              height: 2px;
              max-height: 2px;
              padding: 0;
              margin: 0;
              background: var(--primary-color);
            }
        visibility:
          - condition: screen
            media_query: '(min-width: 768px)'
      - type: custom:mod-card
        card_mod:
          style:
            .: |
              ha-card {
                --ha-card-border-width: 0px;
                --ha-card-border-radius: 20px;
                --ha-card-background: transparent; 
              } 
            tabbed-card $:
              mwc-tab:
                $: |
                  .mdc-tab--active {
                    background: var(--primary-color) !important;nt;
                    border-radius: 5px 5px 0px 0px;
                  }
        card:
          type: custom:tabbed-card
          tabs:
            - attributes:
                label: null
                icon: mdi:lightbulb
              card:
                type: vertical-stack
                cards:
                  - type: vertical-stack
                    cards:
                      - type: vertical-stack
                        cards:
                          - type: custom:gap-card
                          - type: custom:mushroom-title-card
                            title: >-
                              {{
                              states('sensor.smarti_dashboard_tabbed_card_lights_page_lights_title')
                              }}
                            subtitle: >-
                              {{
                              states('sensor.smarti_dashboard_tabbed_card_lights_page_lights_subtitle')
                              }}
                            alignment: center
                      - type: vertical-stack
                        cards:
                          - type: custom:lottie-card
                            animation: /local/smartianimations/slider2.json
                            size: 100px
                            loop: true
                            autoplay: true
                  - type: custom:auto-entities
                    card:
                      show_header_toggle: true
                      type: entities
                    filter:
                      template: >-
                        {% set area_filter = ['area1', 'area2'] %} {% set filter
                        = ['light.light1', 'light.light2'] %}

                        {%- set areas = states.light
                            | rejectattr('entity_id', 'in', filter)
                            | map(attribute='entity_id')
                            | map('area_name')
                            | unique
                            | reject('none')
                            | reject('in', area_filter)
                            | list | sort -%}

                        {% if areas | length == 0 %}
                          [
                            {
                              'type': 'custom:button-text-card',
                              'title': '[[[ return states["sensor.sMARTi_Dashboard_Tabbed_Card_Lights_Page_Scenes_Missing_Lights_Title"]?.state || "No title found"; ]]]',
                              'subtitle': '[[[ return states["sensor.sMARTi_Dashboard_Tabbed_Card_Lights_Page_Scenes_Missing_Lights_subTitle"]?.state || "No title found"; ]]]',
                              'icon': 'mdi:chat-question',
                              'background_color': 'var(--primary-color)',
                            }
                          ]
                        {% else %}
                          [
                            {%- for area in areas %}
                              {
                                'type': 'custom:button-card',
                                'styles': {
                                  'card': [
                                    { 'height': '5px' },
                                    { 'max-height': '10px' },
                                    { 'padding': '0' },
                                    { 'margin': '0' },
                                    { 'background-color': 'var(--primary-color)' }
                                  ]
                                }
                              },
                              {
                                'type': 'custom:button-text-card',
                                'title': '{{ area }}',
                                'icon': 'mdi:lightbulb',
                                'background_color': 'var(--primary-color)',
                              },
                              {%- set lights = states.light
                                  | rejectattr('entity_id', 'in', filter)
                                  | selectattr('entity_id', 'in', area_entities(area))
                                  | sort(attribute='name') -%}
                              {%- for light in lights %}
                                {
                                  'type': 'custom:mushroom-light-card',              
                                  'entity': '{{ light.entity_id }}',
                                  'use_light_color': 'true',
                                  'show_brightness_control': 'true',
                                  'show_color_control': 'true',
                                  'collapsible_controls': 'false',
                                  'show_color_temp_control': 'true',
                                  'styles': {
                                    'card': [
                                      { 'border-radius': '20px' }
                                    ]
                                  }
                                }
                                {%- if not loop.last %},{% endif %}
                              {%- endfor %}
                              {%- if not loop.last %},{% endif %}
                            {%- endfor %}
                          ]
                        {% endif %}
                      exclude:
                        - hidden_by: '*'
        visibility:
          - condition: screen
            media_query: '(min-width: 768px)'
    background:
      opacity: 100
      alignment: center
      size: cover
      repeat: no-repeat
      attachment: fixed
      transparency: 100
      image: /local/images/smarti_images/smarti_dashboard_backgorund_image.jpg
  - title: Climate
    path: heating
    icon: mdi:thermometer-water
    type: custom:horizontal-layout
    layout:
      max_width: 2000
      max_cols: 1
    subview: true
    cards:
      - type: horizontal-stack
        cards:
          - type: vertical-stack
            cards:
              - type: custom:lottie-card
                animation: /local/smartianimations/error.json
                size: 200px
                loop: true
                autoplay: true
              - type: markdown
                content: >
                  **SMARTi Basic** is not supported on mobile devices.   To
                  enable this feature, please visit  
                  [https://www.smarti.dev](https://www.smarti.dev/smarti-store/p/smarti-powerflow-xe7ft)
                  to purchase and upgrade to the Pro version.
                style: |
                  ha-card {
                    background: rgba(0, 0, 0, 0.5); /* Slightly transparent background */
                    color: white;
                    text-align: center;
                    font-size: 1.2em;
                    padding: 20px;
                    border-radius: 10px;
                  }   
              - type: custom:mushroom-chips-card
                chips:
                  - type: spacer
                  - type: back
                  - type: menu
                  - type: spacer
        visibility:
          - condition: screen
            media_query: '(min-width: 0px) and (max-width: 767px)'
      - type: custom:mod-card
        card_mod:
          style:
            .: |
              ha-card {
                --ha-card-border-width: 0px;
                --ha-card-border-radius: 20px;
                background: linear-gradient(
                  to bottom right,
                  rgba(255, 255, 255, 0.15),
                  rgba(255, 255, 255, 0.05)
                );
                backdrop-filter: blur(15px);
                -webkit-backdrop-filter: blur(15px);
                box-shadow:
                  0 8px 32px 0 rgba(31, 38, 135, 0.37),
                  inset 0 0 0.5px rgba(255, 255, 255, 0.2); /* subtle inner glow */
                border: 5px solid rgba(255, 255, 255, 0.1);
                position: relative;
                overflow: hidden;
                border-radius: 100px 100px 10px 10px;
              }

              ha-card::before {
                content: '';
                position: absolute;
                top: -30%;
                left: -30%;
                width: 200%;
                height: 200%;
                background: radial-gradient(
                  circle at 30% 30%,
                  rgba(255, 255, 255, 0.3),
                  transparent 60%
                );
                transform: rotate(25deg);
                pointer-events: none;
              }
        card:
          type: conditional
          conditions:
            - condition: screen
              media_query: '(min-width: 768px)'
          card:
            type: vertical-stack
            cards:
              - type: horizontal-stack
                cards:
                  - type: custom:gap-card
                  - type: conditional
                    conditions:
                      - condition: or
                        conditions:
                          - entity: binary_sensor.smarti_internet
                            state: unavailable
                          - entity: binary_sensor.smarti_internet
                            state: unknown
                          - entity: sensor.browser_mod_installed
                            state_not: 'True'
                          - entity: alarm_control_panel.alarmo
                            state: unavailable
                          - entity: alarm_control_panel.alarmo
                            state: unknown
                          - entity: weather.forecast_home
                            state: unavailable
                          - entity: weather.forecast_home
                            state: unknown
                    card:
                      type: custom:button-card
                      name: ⚠️ Setup Required
                      icon: mdi:alert-circle
                      show_state: false
                      show_icon: true
                      show_name: true
                      tap_action:
                        action: navigate
                        navigation_path: /smarti-dashboard/settings3
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                          - divider-color: transparent
                        icon:
                          - color: red
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      card_mod:
                        style: |
                          ha-card {
                            border: 2px solid var(--border-color);
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                          }
                  - type: conditional
                    conditions:
                      - entity: alarm_control_panel.alarmo
                        state_not: unavailable
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_alarm'].state ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - font-size: 3em
                          - color: var(--primary-color)
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: more-info
                        entity: alarm_control_panel.alarmo
                      entity: alarm_control_panel.alarmo
                      card_mod:
                        style: |
                          ha-card {
                            background: radial-gradient(
                              circle at center,
                              rgba(0, 0, 0, 0.4) 0%,
                              rgba(0, 0, 0, 0.2) 10%,
                              rgba(0, 0, 0, 0) 40%
                            );
                            border-radius: 20px;
                            border: none
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            overflow: hidden;
                            position: relative;
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        entity: sensor.smarti_active_locks
                        above: 0
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_tabbed_card_locks_tab_title'].state
                        ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                          - animation: >
                              [[[ return
                              parseInt(states['sensor.smarti_active_locks'].state)
                              > 0 ? 'blink-red 1.5s infinite' : 'none'; ]]]
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              card:
                                type: entities
                              filter:
                                include:
                                  - domain: lock
                                    state: unlocked
                                  - domain: binary_sensor
                                    attributes:
                                      device_class: lock
                                    state: 'on'
                                exclude:
                                  - hidden_by: '*'
                              sort:
                                reverse: true
                      entity: sensor.smarti_active_locks
                      card_mod:
                        style: |
                          ha-card {
                            border: 2px solid var(--border-color);
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                          }

                          @keyframes blink-red {
                            0% {
                              color: var(--accent-color);
                            }
                            50% {
                              color: var(--primary-color);
                            }
                            100% {
                              color: var(--accent-color);
                            }
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        entity: sensor.smarti_active_motion_sensors
                        above: 0
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_motion'].state
                        ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              card:
                                type: entities
                              filter:
                                include:
                                  - domain: binary_sensor
                                    attributes:
                                      device_class: motion
                                    state: 'on'
                                exclude:
                                  - hidden_by: '*'
                              sort:
                                reverse: true
                      entity: sensor.smarti_active_motion_sensors
                      card_mod:
                        style: |
                          ha-card {
                            background: radial-gradient(
                              circle at center,
                              rgba(0, 0, 0, 0.4) 0%,
                              rgba(0, 0, 0, 0.2) 10%,
                              rgba(0, 0, 0, 0) 40%
                            );
                            border-radius: 20px;
                            border: none
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            overflow: hidden;
                            position: relative;
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        above: 0
                        entity: sensor.smarti_active_lights
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_lights'].state
                        ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              show_empty: false
                              card:
                                show_name: true
                                show_icon: true
                                show_state: true
                                type: glance
                                state_color: true
                                columns: 4
                              filter:
                                include:
                                  - domain: light
                                    state: 'on'
                                    options:
                                      tap_action:
                                        action: toggle
                                exclude:
                                  - hidden_by: '*'
                              sort:
                                method: none
                                reverse: false
                                numeric: false
                      entity: sensor.smarti_active_lights
                      card_mod:
                        style: |
                          ha-card {
                            background: radial-gradient(
                              circle at center,
                              rgba(0, 0, 0, 0.4) 0%,
                              rgba(0, 0, 0, 0.2) 10%,
                              rgba(0, 0, 0, 0) 40%
                            );
                            border-radius: 20px;
                            border: none
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            overflow: hidden;
                            position: relative;
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        above: 0
                        entity: sensor.smarti_active_doors
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_doors'].state ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              card:
                                type: entities
                              filter:
                                include:
                                  - domain: binary_sensor
                                    attributes:
                                      device_class: door
                                    state: 'on'
                                exclude:
                                  - hidden_by: '*'
                              sort:
                                reverse: true
                      entity: sensor.smarti_active_doors
                      card_mod:
                        style: |
                          ha-card {
                            background: radial-gradient(
                              circle at center,
                              rgba(0, 0, 0, 0.4) 0%,
                              rgba(0, 0, 0, 0.2) 10%,
                              rgba(0, 0, 0, 0) 40%
                            );
                            border-radius: 20px;
                            border: none
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            overflow: hidden;
                            position: relative;
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        entity: sensor.smarti_active_windows
                        above: 0
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_windows'].state
                        ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)'
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              card:
                                type: entities
                              filter:
                                include:
                                  - domain: binary_sensor
                                    attributes:
                                      device_class: window
                                    state: 'on'
                                exclude:
                                  - hidden_by: '*'
                              sort:
                                reverse: true
                      entity: sensor.smarti_active_windows
                      card_mod:
                        style: |
                          ha-card {
                            background: radial-gradient(
                              circle at center,
                              rgba(0, 0, 0, 0.4) 0%,
                              rgba(0, 0, 0, 0.2) 10%,
                              rgba(0, 0, 0, 0) 40%
                            );
                            border-radius: 20px;
                            border: none
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            overflow: hidden;
                            position: relative;
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        above: 0
                        entity: sensor.smarti_active_water_sensors
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_water'].state ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              card:
                                type: entities
                              filter:
                                include:
                                  - domain: binary_sensor
                                    attributes:
                                      device_class: moisture
                                    state: 'on'
                                exclude:
                                  - hidden_by: '*'
                              sort:
                                reverse: true
                      entity: sensor.smarti_active_water_sensors
                      card_mod:
                        style: |
                          ha-card {
                            border: 2px solid var(--border-color);
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        entity: sensor.smarti_active_smoke_detectors
                        above: 0
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_smoke'].state ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              card:
                                type: entities
                              filter:
                                include:
                                  - domain: binary_sensor
                                    attributes:
                                      device_class: smoke
                                    state: 'on'
                                exclude:
                                  - hidden_by: '*'
                              sort:
                                reverse: true
                      entity: sensor.smarti_active_smoke_detectors
                      card_mod:
                        style: |
                          ha-card {
                            background: radial-gradient(
                              circle at center,
                              rgba(0, 0, 0, 0.4) 0%,
                              rgba(0, 0, 0, 0.2) 10%,
                              rgba(0, 0, 0, 0) 40%
                            );
                            border-radius: 20px;
                            border: none
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            overflow: hidden;
                            position: relative;
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        above: 0
                        entity: sensor.smarti_active_gas_sensors
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_gas'].state ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              card:
                                type: entities
                              filter:
                                include:
                                  - domain: binary_sensor
                                    attributes:
                                      device_class: gas
                                    state: 'on'
                                exclude:
                                  - hidden_by: '*'
                              sort:
                                reverse: true
                      entity: sensor.smarti_active_gas_sensors
                      card_mod:
                        style: |
                          ha-card {
                            background: radial-gradient(
                              circle at center,
                              rgba(0, 0, 0, 0.4) 0%,
                              rgba(0, 0, 0, 0.2) 10%,
                              rgba(0, 0, 0, 0) 40%
                            );
                            border-radius: 20px;
                            border: none
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            overflow: hidden;
                            position: relative;
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        above: 0
                        entity: sensor.smarti_active_low_battery_devices_count
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_batteries'].state
                        ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              card:
                                show_header_toggle: false
                                type: entities
                                state_color: true
                              filter:
                                include:
                                  - entity_id: sensor.*_battery
                                  - entity_id: binary_sensor.*battery_low
                                  - entity_id: sensor.*.battery_state
                                exclude:
                                  - state: unavailable
                                  - state: '-'
                                  - state: unknown
                                  - state: none
                                  - state: medium
                                  - state: high
                                  - state: '= 0,0'
                                  - state: '>= 20'
                                  - state: 'off'
                                  - entity_id: sensor.campainha_ring_mqtt_battery
                                  - entity_id: sensor.campainha_battery
                                  - state: None
                                  - state: charging
                                  - state: discharging
                                  - state: high
                                  - name: /[Ll]ow/
                                  - name: /[Ss]tate/
                                  - entity_id: '*phone*'
                                  - entity_id: '*browser*'
                                  - entity_id: '*watch*'
                                  - entity_id: '*pad*'
                                  - entity_id: '*tablet*'
                                  - hidden_by: '*'
                              sort:
                                method: friendly_name
                                numeric: true
                                ignore_case: false
                                ip: false
                                reverse: false
                              show_empty: false
                      entity: sensor.smarti_active_low_battery_devices_count
                      card_mod:
                        style: |
                          ha-card {
                            background: radial-gradient(
                              circle at center,
                              rgba(0, 0, 0, 0.4) 0%,
                              rgba(0, 0, 0, 0.2) 10%,
                              rgba(0, 0, 0, 0) 40%
                            );
                            border-radius: 20px;
                            border: none
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            overflow: hidden;
                            position: relative;
                          }
                  - type: conditional
                    conditions:
                      - condition: state
                        entity: sensor.smarti_dynamic_power_sensor
                        state_not: unknown
                      - condition: state
                        entity: sensor.smarti_dynamic_power_sensor
                        state_not: unavailable
                      - condition: state
                        entity: input_boolean.smarti_show_energy_measurement
                        state_not: 'off'
                    card:
                      type: custom:mini-graph-card
                      entities:
                        - sensor.smarti_dynamic_power_sensor
                      show:
                        name: false
                        icon: true
                        legend: false
                        labels: false
                      icon: mdi:lightning-bolt
                      height: 50
                      color_thresholds:
                        - value: 3000
                          color: '#f39c12'
                        - value: 5000
                          color: '#d35400'
                        - value: 8000
                          color: '#c0392b'
                      hours_to_show: 6
                      points_per_hour: 10
                      align_icon: center
                      align_state: right
                      align_header: center
                      card_mod:
                        style: |
                          ha-card {
                            border: 2px solid var(--border-color);
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            background: transparent;
                            color: var(--primary-color); /* Ensures the text uses primary color */
                          }
                          ha-icon {
                            color: var(--primary-color); /* Sets the icon color */
                          }
                  - type: custom:gap-card
      - type: custom:button-card
        styles:
          card:
            - height: 5px
            - max-height: 10px
            - padding: 0
            - margin: 0
            - background-color: var(--primary-color);
        card_mod:
          style: |
            ha-card {
              border-radius: 1px;
              height: 2px;
              max-height: 2px;
              padding: 0;
              margin: 0;
              background: var(--primary-color);
            }
        visibility:
          - condition: screen
            media_query: '(min-width: 768px)'
      - type: custom:mod-card
        card_mod:
          style:
            .: |
              ha-card {
                --ha-card-border-width: 0px;
                --ha-card-border-radius: 20px;
                background: linear-gradient(
                  to bottom right,
                  rgba(255, 255, 255, 0.15),
                  rgba(255, 255, 255, 0.05)
                );
                backdrop-filter: blur(15px);
                -webkit-backdrop-filter: blur(15px);
                box-shadow:
                  0 8px 32px 0 rgba(31, 38, 135, 0.37),
                  inset 0 0 0.5px rgba(255, 255, 255, 0.2); /* subtle inner glow */
                border: 5px solid rgba(255, 255, 255, 0.1);
                position: relative;
                overflow: hidden;
                border-radius: 10px 10px 20px 20px;
              }

              ha-card::before {
                content: '';
                position: absolute;
                top: -30%;
                left: -30%;
                width: 200%;
                height: 200%;
                background: radial-gradient(
                  circle at 30% 30%,
                  rgba(255, 255, 255, 0.3),
                  transparent 60%
                );
                transform: rotate(25deg);
                pointer-events: none;
              }
        card:
          type: horizontal-stack
          cards:
            - type: custom:button-card
              name: Home
              show_icon: true
              icon: mdi:home
              show_name: false
              styles:
                card:
                  - max-height: 50px
                  - justify-content: center
                  - align-items: center
                icon:
                  - color: black
                  - max-height: 30px
                  - max-width: 30px
                  - min-height: 30px
                  - min-width: 20px
                  - color: var(--primary-color)
                name:
                  - color: black
              tap_action:
                action: navigate
                navigation_path: home#
              card_mod:
                style: |
                  ha-card {
                    border-radius: 5px 5px 5px 15px;
                  }
            - type: conditional
              conditions:
                - entity: input_boolean.smarti_show_weather_tab
                  state: 'on'
              card:
                type: custom:button-card
                name: Rooms
                show_icon: true
                icon: mdi:weather-partly-cloudy
                show_name: false
                styles:
                  card:
                    - max-height: 50px
                    - justify-content: center
                    - align-items: center
                  icon:
                    - color: black
                    - max-height: 30px
                    - max-width: 30px
                    - min-height: 30px
                    - min-width: 20px
                    - color: var(--primary-color)
                  name:
                    - color: black
                tap_action:
                  action: navigate
                  navigation_path: rooms#
                card_mod:
                  style: |
                    ha-card {
                      border-radius: 5px 5px 5px 5px;
                    }
            - type: conditional
              conditions:
                - entity: input_boolean.smarti_show_light_tab
                  state: 'on'
              card:
                type: custom:button-card
                name: Light Control
                show_icon: true
                icon: mdi:lightbulb-group
                show_name: false
                styles:
                  card:
                    - max-height: 50px
                    - justify-content: center
                    - align-items: center
                  icon:
                    - color: black
                    - max-height: 30px
                    - max-width: 30px
                    - min-height: 30px
                    - min-width: 20px
                    - color: var(--primary-color)
                  name:
                    - color: black
                state:
                  - value: 'on'
                    styles:
                      card:
                        - background-color: '#FF7000'
                tap_action:
                  action: navigate
                  navigation_path: lights#
                card_mod:
                  style: |
                    ha-card {
                      border-radius: 5px 5px 5px 5px;   

                    }  
            - type: conditional
              conditions:
                - entity: input_boolean.smarti_show_climate_tab
                  state: 'on'
              card:
                type: custom:button-card
                name: Heating Control
                show_icon: true
                icon: mdi:thermometer-water
                show_name: false
                styles:
                  card:
                    - max-height: 50px
                    - justify-content: center
                    - align-items: center
                  icon:
                    - max-height: 30px
                    - max-width: 30px
                    - min-height: 30px
                    - min-width: 20px
                  name:
                    - color: black
                tap_action:
                  action: navigate
                  navigation_path: heating#
                card_mod:
                  style: |
                    ha-card {
                      border-radius: 5px 5px 5px 5px; 
                      background-color: var(--primary-color);     
                    }
            - type: conditional
              conditions:
                - entity: input_boolean.smarti_show_misc_tab
                  state: 'on'
              card:
                type: custom:button-card
                name: Multimedia
                show_icon: true
                icon: mdi:multimedia
                show_name: false
                styles:
                  card:
                    - max-height: 50px
                    - justify-content: center
                    - align-items: center
                  icon:
                    - color: black
                    - max-height: 30px
                    - max-width: 30px
                    - min-height: 30px
                    - min-width: 20px
                    - color: var(--primary-color)
                  name:
                    - color: black
                tap_action:
                  action: navigate
                  navigation_path: multimedia#
                card_mod:
                  style: |
                    ha-card {
                      border-radius: 5px 5px 5px 5px;    
                    }
            - type: conditional
              conditions:
                - entity: input_boolean.smarti_show_security_tab
                  state: 'on'
              card:
                type: custom:button-card
                name: Cameras
                show_icon: true
                icon: mdi:shield
                show_name: false
                styles:
                  card:
                    - max-height: 50px
                    - justify-content: center
                    - align-items: center
                  icon:
                    - color: black
                    - max-height: 30px
                    - max-width: 30px
                    - min-height: 30px
                    - min-width: 20px
                    - color: var(--primary-color)
                  name:
                    - color: black
                tap_action:
                  action: navigate
                  navigation_path: cameras#
                card_mod:
                  style: |
                    ha-card {
                      border-radius: 5px 5px 5px 5px;    
                    }
            - type: conditional
              conditions:
                - entity: input_boolean.smarti_show_energy_tab
                  state: 'on'
              card:
                type: custom:button-card
                name: Power Control
                show_icon: true
                icon: mdi:lightning-bolt
                show_name: false
                styles:
                  card:
                    - max-height: 50px
                    - justify-content: center
                    - align-items: center
                  icon:
                    - color: black
                    - max-height: 30px
                    - max-width: 30px
                    - min-height: 30px
                    - min-width: 20px
                    - color: var(--primary-color)
                  name:
                    - color: black
                tap_action:
                  action: navigate
                  navigation_path: power#
                card_mod:
                  style: |
                    ha-card {
                      border-radius: 5px 5px 5px 5px;    
                    }
            - type: custom:button-card
              name: Settings
              show_icon: true
              icon: mdi:cog
              show_name: false
              styles:
                card:
                  - max-height: 50px
                  - justify-content: center
                  - align-items: center
                icon:
                  - max-height: 30px
                  - max-width: 30px
                  - min-height: 30px
                  - min-width: 20px
                  - color: var(--primary-color)
                name:
                  - color: black
              tap_action:
                action: navigate
                navigation_path: settings2#
              card_mod:
                style: |
                  ha-card{
                    border-radius: 5px 5px 15px 5px;
                  }  
          visibility:
            - condition: screen
              media_query: '(min-width: 0px)'
      - type: custom:gap-card
        height: 25
        visibility:
          - condition: screen
            media_query: '(min-width: 0px) and (max-width: 767px)'
      - type: custom:mod-card
        card_mod:
          style:
            .: |
              ha-card {
                --ha-card-border-width: 0px;
                --ha-card-border-radius: 20px;
                --ha-card-background: transparent;
              }           
        card:
          type: horizontal-stack
          cards:
            - type: horizontal-stack
              cards:
                - type: vertical-stack
                  cards:
                    - type: custom:gap-card
                    - type: custom:mushroom-title-card
                      title: null
                      subtitle: >-
                        {{
                        states('sensor.smarti_dashboard_tabbed_card_Climate_page_temperature_graph_tab')
                        }}
                      alignment: center
                    - type: custom:auto-entities
                      card:
                        type: custom:mini-graph-card
                        icon: mdi:thermometer
                        title: Temperature Overview
                        chart_type: line
                        period: hour
                        height: 250
                        aggregate_func: avg
                        days_to_show: 1.5
                        line_width: 2.5
                        show:
                          fill: false
                          labels: true
                          labels_secondary: false
                          legend: false
                          x_axis: true
                          y_axis: true
                        card_mod:
                          style: |
                            ha-card {
                              border: 2px solid var(--border-color);
                              transition: transform 0.5s ease, box-shadow 0.5s ease;
                              background: transparent;
                              color: var(--primary-color);
                            }
                            .graph {
                              mask-image: linear-gradient(to right, black 65%, transparent);
                              -webkit-mask-image: linear-gradient(to right, black 65%, transparent);
                            }    
                      filter:
                        include:
                          - domain: sensor
                            attributes:
                              device_class: temperature
                        exclude:
                          - entity_id: sensor.system_monitor_processor_temperature
                          - entity_id: sensor.temperatur_max
                          - entity_id: sensor.temperature_min
                          - hidden_by: '*'
                    - type: custom:gap-card
                - type: vertical-stack
                  cards:
                    - type: custom:gap-card
                    - type: custom:mushroom-title-card
                      title: >-
                        {{ states('sensor.smarti_dashboard_Climate_page_title')
                        }}
                      subtitle: >-
                        {{
                        states('sensor.smarti_dashboard_climate_page_subtitle')
                        }}
                      alignment: center
                    - type: custom:lottie-card
                      animation: /local/smartianimations/climate.json
                      size: 110px
                      loop: true
                      autoplay: true
                    - type: custom:gap-card
                - type: vertical-stack
                  cards:
                    - type: custom:gap-card
                    - type: custom:mushroom-title-card
                      title: null
                      subtitle: >-
                        {{
                        states('sensor.smarti_dashboard_tabbed_card_Climate_page_humidity_graph_tab')
                        }}
                      alignment: center
                    - type: custom:auto-entities
                      card:
                        type: custom:mini-graph-card
                        icon: mdi:water-percent
                        chart_type: line
                        height: 250
                        period: hour
                        days_to_show: 1.5
                        line_width: 2.5
                        show:
                          fill: false
                          labels: true
                          labels_secondary: false
                          legend: false
                          x_axis: true
                          y_axis: true
                        card_mod:
                          style: |
                            ha-card {
                              border: 2px solid var(--border-color);
                              transition: transform 0.5s ease, box-shadow 0.5s ease;
                              background: transparent;
                              color: var(--primary-color);
                            }
                            .graph {
                              mask-image: linear-gradient(to left, black 65%, transparent);
                              -webkit-mask-image: linear-gradient(to left, black 65%, transparent);
                            }                   
                      filter:
                        include:
                          - domain: sensor
                            attributes:
                              device_class: humidity
                        exclude:
                          - hidden_by: '*'
                    - type: custom:gap-card
        visibility:
          - condition: screen
            media_query: '(min-width: 768px)'
      - type: custom:gap-card
        height: 25
      - type: custom:button-card
        styles:
          card:
            - height: 5px
            - max-height: 10px
            - padding: 0
            - margin: 0
            - background-color: var(--primary-color);
        card_mod:
          style: |
            ha-card {
              border-radius: 1px;
              height: 2px;
              max-height: 2px;
              padding: 0;
              margin: 0;
              background: var(--primary-color);
            }
        visibility:
          - condition: screen
            media_query: '(min-width: 768px)'
      - type: custom:mod-card
        card_mod:
          style:
            .: |
              ha-card {
                --ha-card-border-width: 0px;
                --ha-card-border-radius: 20px;
                --ha-card-background: transparent;        
              } 
            tabbed-card $:
              mwc-tab:
                $: |
                  .mdc-tab--active {
                    background: var(--primary-color) !important;
                    border-radius: 5px 5px 0px 0px;
                  }
        card:
          type: custom:tabbed-card
          tabs:
            - attributes:
                label: null
                icon: mdi:home-thermometer
              card:
                type: vertical-stack
                cards:
                  - type: horizontal-stack
                    cards:
                      - type: vertical-stack
                        cards:
                          - type: custom:gap-card
                          - type: custom:mushroom-title-card
                            title: >-
                              {{
                              states('sensor.smarti_dashboard_tabbed_card_climate_thermostats_and_acs_tab_title')
                              }}
                            subtitle: >-
                              {{
                              states('sensor.smarti_dashboard_tabbed_card_climate_thermostats_and_acs_tab_subtitle')
                              }}
                            alignment: center
                      - type: vertical-stack
                        cards:
                          - type: custom:lottie-card
                            animation: /local/smartianimations/airconclimate.json
                            size: 225px
                            loop: true
                            autoplay: true
                  - type: custom:mod-card
                    card:
                      type: custom:auto-entities
                      card:
                        type: vertical-stack
                      card_param: cards
                      filter:
                        template: >-
                          {% set area_filter = ['area1', 'area2'] %} {% set
                          visible_climate = states.climate
                            | rejectattr('attributes.hidden_by', 'defined')
                            | list %}
                          {% set areas = visible_climate
                            | map(attribute='entity_id')
                            | map('area_name')
                            | reject('none')
                            | reject('in', area_filter)
                            | unique
                            | sort %}

                          {% if areas | length == 0 %}
                            [
                              {
                                "type": "custom:button-text-card",
                                "title": "[[[ return states['sensor.smarti_dashboard_tabbed_card_climate_thermostats_and_acs_tab_missing_title']?.state || 'No title found'; ]]]",
                                "subtitle": "[[[ return states['sensor.smarti_dashboard_tabbed_card_climate_thermostats_and_acs_tab_missing_subtitle']?.state || 'No title found'; ]]]",
                                "icon": "mdi:chat-question",
                                "background_color": "var(--primary-color)"
                              }
                            ]
                          {% else %}
                            [
                              {% for area in areas %}
                                {
                                  "type": "custom:button-card",
                                  "styles": {
                                    "card": [
                                      { "height": "5px" },
                                      { "max-height": "10px" },
                                      { "padding": "0" },
                                      { "margin": "0" },
                                      { "background-color": "var(--primary-color)" }
                                    ]
                                  }
                                },
                                {
                                  "type": "custom:button-text-card",
                                  "title": "{{ area | string }}",
                                  "icon": "mdi:air-conditioner",
                                  "background_color": "var(--primary-color)"
                                },
                                {
                                  "type": "custom:auto-entities",
                                  "card": {
                                    "type": "custom:layout-card",
                                    "layout_type": "grid",
                                    "layout": {
                                      "grid-template-columns": "repeat(auto-fit, minmax(max(250px, 25%), 1fr))",
                                      "grid-gap": "0px"
                                    }
                                  },
                                  "filter": {
                                    "include": [
                                      {
                                        "domain": "climate",
                                        "area": "{{ area }}",
                                        "options": {
                                          "type": "thermostat",
                                          "features": [
                                            {
                                              "type": "climate-hvac-modes",
                                              "style": "icons"
                                            },
                                            {
                                              "type": "climate-preset-modes",
                                              "style": "dropdown"
                                            },
                                            {
                                              "type": "climate-fan-modes",
                                              "style": "dropdown"
                                            }
                                          ]
                                        }
                                      }
                                    ],
                                    "exclude": [
                                      { "hidden_by": "*" }
                                    ]
                                  }
                                }
                                {% if not loop.last %},{% endif %}
                              {% endfor %}
                            ]
                          {% endif %}
            - attributes:
                label: null
                icon: mdi:thermometer
              card:
                type: vertical-stack
                cards:
                  - type: horizontal-stack
                    cards:
                      - type: vertical-stack
                        cards:
                          - type: custom:gap-card
                          - type: custom:mushroom-title-card
                            title: >-
                              {{
                              states('sensor.smarti_dashboard_tabbed_card_climate_temperature_and_humidity_sensors_tab_title')
                              }}
                            subtitle: >-
                              {{
                              states('sensor.smarti_dashboard_tabbed_card_climate_temperature_and_humidity_sensors_tab_subtitle')
                              }}
                            alignment: center
                      - type: vertical-stack
                        cards:
                          - type: custom:lottie-card
                            animation: /local/smartianimations/graph2.json
                            size: 225px
                            loop: true
                            autoplay: true
                  - type: custom:mod-card
                    card:
                      type: custom:auto-entities
                      card:
                        type: vertical-stack
                      card_param: cards
                      filter:
                        template: >-
                          {% set area_filter = ['area1', 'area2'] %} {% set
                          temp_filter = ['sensor.temperature_sensor_1',
                          'sensor.temperature_sensor_2'] %} {% set humid_filter
                          = ['sensor.humidity_sensor_1',
                          'sensor.humidity_sensor_2'] %}

                          {% set all_sensors = states.sensor
                            | selectattr('attributes.device_class', 'in', ['temperature', 'humidity'])
                            | rejectattr('entity_id', 'in', temp_filter + humid_filter)
                            | list %}

                          {% set areas = all_sensors
                            | map(attribute='entity_id')
                            | map('area_name')
                            | reject('none')
                            | reject('in', area_filter)
                            | unique
                            | sort %}

                          {% if areas | length == 0 %}
                            [
                              {
                                "type": "custom:button-text-card",
                                "title": "[[[ return states['sensor.smarti_dashboard_tabbed_card_climate_temperature_and_humidity_sensors_tab_missing_title']?.state || 'No title found'; ]]]",
                                "subtitle": "[[[ return states['sensor.smarti_dashboard_tabbed_card_climate_temperature_and_humidity_sensors_tab_missing_subtitle']?.state || 'No subtitle found'; ]]]",
                                "icon": "mdi:chat-question",
                                "background_color": "var(--primary-color)"
                              }
                            ]
                          {% else %}
                            [
                              {% for area in areas %}
                                {
                                  "type": "custom:button-card",
                                  "styles": {
                                    "card": [
                                      { "height": "5px" },
                                      { "max-height": "10px" },
                                      { "padding": "0" },
                                      { "margin": "0" },
                                      { "background-color": "var(--primary-color)" }
                                    ]
                                  }
                                },
                                {
                                  "type": "custom:button-text-card",
                                  "title": "{{ area }}",
                                  "icon": "mdi:thermometer-water",
                                  "background_color": "var(--primary-color)"
                                },
                                {
                                  "type": "custom:auto-entities",
                                  "card": {
                                    "type": "custom:layout-card",
                                    "layout_type": "grid",
                                    "layout": {
                                      "grid-template-columns": "repeat(auto-fit, minmax(max(250px, 25%), 1fr))",
                                      "grid-gap": "0px"
                                    }
                                  },
                                  "card_param": "cards",
                                  "filter": {
                                    "include": [
                                      {% for sensor in all_sensors
                                          | selectattr('entity_id', 'in', area_entities(area))
                                          | sort(attribute='name') %}
                                      {
                                        "entity_id": "{{ sensor.entity_id }}",
                                        "options": {
                                          "type": "custom:mini-graph-card",
                                          "entities": ["{{ sensor.entity_id }}"],
                                          "height": "40",
                                          "animate": "true",
                                          "line_width": "2",
                                          "font_size": "100",
                                          "points_per_hour": "2",
                                          "show": {
                                            "labels": "true",
                                            "fill": "true"
                                          },
                                          "color_thresholds":
                                            {% if sensor.attributes.device_class == "temperature" %}
                                            [
                                              { "value": 0, "color": "#007BFF" },
                                              { "value": 15, "color": "#00CC00" },
                                              { "value": 20, "color": "#FFD700" },
                                              { "value": 25, "color": "#FF8C00" },
                                              { "value": 30, "color": "#FF0000" }
                                            ]
                                            {% else %}
                                            [
                                              { "value": 0, "color": "#007BFF" },
                                              { "value": 30, "color": "#00CC00" },
                                              { "value": 50, "color": "#FFD700" },
                                              { "value": 70, "color": "#FF8C00" },
                                              { "value": 90, "color": "#FF0000" }
                                            ]
                                            {% endif %}
                                        }
                                      }{% if not loop.last %},{% endif %}
                                      {% endfor %}
                                    ],
                                    "exclude": [
                                      { "entity_id": {{ (temp_filter + humid_filter) | tojson }} },
                                      { "hidden_by": "*" }
                                    ]
                                  }
                                }
                                {% if not loop.last %},{% endif %}
                              {% endfor %}
                            ]
                          {% endif %}
            - attributes:
                label: null
                icon: mdi:home-thermometer-outline
              card:
                type: vertical-stack
                cards:
                  - type: horizontal-stack
                    cards:
                      - type: vertical-stack
                        cards:
                          - type: custom:gap-card
                          - type: custom:mushroom-title-card
                            title: >-
                              {{
                              states('sensor.smarti_dashboard_tabbed_card_climate_comfort_scaling_tab_title')
                              }}
                            subtitle: >-
                              {{
                              states('sensor.smarti_dashboard_tabbed_card_climate_comfort_scaling_tab_subtitle')
                              }}
                            alignment: center
                      - type: vertical-stack
                        cards:
                          - type: custom:lottie-card
                            animation: /local/smartianimations/comfort.json
                            size: 225px
                            loop: true
                            autoplay: true
                  - type: custom:mod-card
                    card:
                      type: custom:auto-entities
                      card:
                        type: entities
                      filter:
                        template: >-
                          {% set area_filter = ['area1', 'area2'] %} {% set
                          temp_filter = ['sensor.temperature_sensor_1',
                          'sensor.temperature_sensor_2'] %} {% set humid_filter
                          = ['sensor.humidity_sensor_1',
                          'sensor.humidity_sensor_2'] %}

                          {%- set areas = states.sensor
                              | selectattr('attributes.device_class', 'in', ['temperature', 'humidity'])
                              | rejectattr('entity_id', 'in', temp_filter + humid_filter)
                              | map(attribute='entity_id')
                              | map('area_name') | unique | reject('none')
                              | reject('in', area_filter)
                              | list | sort -%}

                          {% if areas | length == 0 %}
                            [
                              {
                                'type': 'custom:button-text-card',
                                'title': '[[[ return states["sensor.smarti_dashboard_tabbed_card_climate_comfort_scaling_tab_missing_title"]?.state || "No title found"; ]]]',
                                'subtitle': '[[[ return states["sensor.smarti_dashboard_tabbed_card_climate_comfort_scaling_tab_missing_subtitle"]?.state || "No title found"; ]]]',
                                'icon': 'mdi:chat-question',
                                'background_color': 'var(--primary-color)',
                              }
                            ]
                          {% else %}
                            [
                              {%- for area in areas %}
                                {% set temperatures = states.sensor
                                    | selectattr('attributes.device_class', 'eq', 'temperature')
                                    | rejectattr('entity_id', 'in', temp_filter)
                                    | selectattr('entity_id', 'in', area_entities(area))
                                    | list -%}
                                {% set humidities = states.sensor
                                    | selectattr('attributes.device_class', 'eq', 'humidity')
                                    | rejectattr('entity_id', 'in', humid_filter)
                                    | selectattr('entity_id', 'in', area_entities(area))
                                    | list -%}
                                
                                {%- if temperatures and humidities -%}
                                  {
                                    'type': 'custom:button-card',
                                    'styles': {
                                      'card': [
                                        { 'height': '5px' },
                                        { 'max-height': '10px' },
                                        { 'padding': '0' },
                                        { 'margin': '0' },
                                        { 'background-color': 'var(--primary-color)' }
                                      ]
                                    }
                                  },
                                  {
                                    'type': 'custom:button-text-card',
                                    'title': '{{ area }}',
                                    'icon': 'mdi:thermometer',
                                    'background_color': 'var(--primary-color)',
                                  },
                                  {
                                    'type': 'custom:hui-element',
                                    'card_type': 'horizontal-stack',
                                    'cards': [
                                      {
                                        'type': 'custom:comfortable-environment-card',
                                        'temperature_sensor': '{{ temperatures[0].entity_id }}',
                                        'humidity_sensor': '{{ humidities[0].entity_id }}',
                                        'name': '{{ area }}',
                                        'room_name': '{{ area }}',
                                        'show_index': 'ALL',
                                        'styles': {
                                          'card': [
                                            { 'height': '70px' },
                                            { 'padding': '5px' },
                                            { 'margin-top': '50px' },
                                            { 'max-height': '70px' },
                                            { 'border-radius': '20px' },
                                            { 'transition': 'transform 0.3s ease' }
                                          ]
                                        }
                                      }
                                    ]
                                  }
                                  {%- if not loop.last %},{% endif %}
                                {%- endif %}
                              {%- endfor %}
                            ]
                          {% endif %}
                      exclude:
                        - hidden_by: '*'
            - attributes:
                label: ''
                icon: mdi:water
              card:
                type: vertical-stack
                cards:
                  - type: horizontal-stack
                    cards:
                      - type: vertical-stack
                        cards:
                          - type: custom:gap-card
                          - type: custom:mushroom-title-card
                            title: >-
                              {{
                              states('sensor.smarti_dashboard_tabbed_card_climate_water_sensors_tab_title')
                              }}
                            subtitle: >-
                              {{
                              states('sensor.smarti_dashboard_tabbed_card_climate_water_sensors_tab_subtitle')
                              }}
                            alignment: center
                      - type: vertical-stack
                        cards:
                          - type: custom:gap-card
                          - type: custom:lottie-card
                            animation: /local/smartianimations/water.json
                            size: 100px
                            loop: true
                            autoplay: true
                          - type: custom:gap-card
                  - type: custom:mod-card
                    card:
                      type: custom:auto-entities
                      card:
                        type: vertical-stack
                      card_param: cards
                      filter:
                        template: >-
                          {% set area_filter = ['area1', 'area2'] %} {% set
                          visible_moisture = states.binary_sensor
                            | selectattr('attributes.device_class', 'eq', 'moisture')
                            | rejectattr('attributes.hidden_by', 'defined')
                            | list %}

                          {% set areas = visible_moisture
                            | map(attribute='entity_id')
                            | map('area_name')
                            | reject('none')
                            | reject('in', area_filter)
                            | unique
                            | sort %}

                          {% if areas | length == 0 %}
                            [
                              {
                                "type": "custom:button-text-card",
                                "title": "[[[ return states['sensor.smarti_dashboard_tabbed_card_climate_water_sensors_tab_water_sensors_missing_title']?.state || 'No title found'; ]]]",
                                "subtitle": "[[[ return states['sensor.smarti_dashboard_tabbed_card_climate_humidifiers_tab_humidifiers_missing_subtitle']?.state || 'No subtitle found'; ]]]",
                                "icon": "mdi:chat-question",
                                "background_color": "var(--primary-color)"
                              }
                            ]
                          {% else %}
                            [
                              {% for area in areas %}
                                {
                                  "type": "custom:button-card",
                                  "styles": {
                                    "card": [
                                      { "height": "5px" },
                                      { "max-height": "10px" },
                                      { "padding": "0" },
                                      { "margin": "0" },
                                      { "background-color": "var(--primary-color)" }
                                    ]
                                  }
                                },
                                {
                                  "type": "custom:button-text-card",
                                  "title": "{{ area | string }}",
                                  "icon": "mdi:eye-circle-outline",
                                  "background_color": "var(--primary-color)"
                                },
                                {
                                  "type": "custom:auto-entities",
                                  "card": {
                                    "type": "custom:layout-card",
                                    "layout_type": "grid",
                                    "layout": {
                                      "grid-template-columns": "repeat(auto-fit, minmax(200px, 1fr))",
                                      "grid-gap": "0px"
                                    }
                                  },
                                  "card_param": "cards",
                                  "filter": {
                                    "include": [
                                      {% for sensor in visible_moisture
                                          | selectattr('entity_id', 'in', area_entities(area))
                                          | sort(attribute='name') %}
                                      {
                                        "entity_id": "{{ sensor.entity_id }}",
                                        "options": {
                                          "type": "custom:mushroom-entity-card",
                                          "entity": "{{ sensor.entity_id }}"
                                        }
                                      }{% if not loop.last %},{% endif %}
                                      {% endfor %}
                                    ],
                                    "exclude": [
                                      { "hidden_by": "*" }
                                    ]
                                  }
                                }
                                {% if not loop.last %},{% endif %}
                              {% endfor %}
                            ]
                          {% endif %}
            - attributes:
                label: null
                icon: mdi:air-humidifier
              card:
                type: vertical-stack
                cards:
                  - type: horizontal-stack
                    cards:
                      - type: vertical-stack
                        cards:
                          - type: custom:gap-card
                          - type: custom:mushroom-title-card
                            title: >-
                              {{
                              states('sensor.smarti_dashboard_tabbed_card_climate_humidifiers_tab_title')
                              }}
                            subtitle: >-
                              {{
                              states('sensor.smarti_dashboard_tabbed_card_climate_humidifiers_tab_subtitle')
                              }}
                            alignment: center
                      - type: vertical-stack
                        cards:
                          - type: custom:lottie-card
                            animation: /local/smartianimations/ac.json
                            size: 250px
                            loop: true
                            autoplay: true
                  - type: custom:mod-card
                    card:
                      type: custom:auto-entities
                      card:
                        type: vertical-stack
                      card_param: cards
                      filter:
                        template: >-
                          {% set area_filter = ['area1', 'area2'] %} {% set
                          visible_humidifiers = states.humidifier
                            | rejectattr('attributes.hidden_by', 'defined')
                            | list %}

                          {% set areas = visible_humidifiers
                            | map(attribute='entity_id')
                            | map('area_name')
                            | reject('none')
                            | reject('in', area_filter)
                            | unique
                            | sort %}

                          {% if areas | length == 0 %}
                            [
                              {
                                "type": "custom:button-text-card",
                                "title": "[[[ return states['sensor.smarti_dashboard_tabbed_card_climate_humidifiers_tab_humidifiers_missing_title']?.state || 'No title found'; ]]]",
                                "subtitle": "[[[ return states['sensor.smarti_dashboard_tabbed_card_climate_humidifiers_tab_humidifiers_missing_subtitle']?.state || 'No title found'; ]]]",
                                "icon": "mdi:chat-question",
                                "background_color": "var(--primary-color)"
                              }
                            ]
                          {% else %}
                            [
                              {% for area in areas %}
                                {
                                  "type": "custom:button-card",
                                  "styles": {
                                    "card": [
                                      { "height": "5px" },
                                      { "max-height": "10px" },
                                      { "padding": "0" },
                                      { "margin": "0" },
                                      { "background-color": "var(--primary-color)" }
                                    ]
                                  }
                                },
                                {
                                  "type": "custom:button-text-card",
                                  "title": "{{ area | string }}",
                                  "icon": "mdi:air-humidifier",
                                  "background_color": "var(--primary-color)"
                                },
                                {
                                  "type": "custom:auto-entities",
                                  "card": {
                                    "type": "custom:layout-card",
                                    "layout_type": "grid",
                                    "layout": {
                                      "grid-template-columns": "repeat(auto-fit, minmax(200px, 1fr))",
                                      "grid-gap": "0px"
                                    }
                                  },
                                  "card_param": "cards",
                                  "filter": {
                                    "include": [
                                      {% for humidifier in visible_humidifiers
                                          | selectattr('entity_id', 'in', area_entities(area))
                                          | sort(attribute='name') %}
                                      {
                                        "entity_id": "{{ humidifier.entity_id }}",
                                        "options": {
                                          "type": "custom:mushroom-humidifier-card",
                                          "entity": "{{ humidifier.entity_id }}"
                                        }
                                      }{% if not loop.last %},{% endif %}
                                      {% endfor %}
                                    ],
                                    "exclude": [
                                      { "hidden_by": "*" }
                                    ]
                                  }
                                }
                                {% if not loop.last %},{% endif %}
                              {% endfor %}
                            ]
                          {% endif %}
            - attributes:
                label: null
                icon: mdi:fan
              card:
                type: vertical-stack
                cards:
                  - type: horizontal-stack
                    cards:
                      - type: vertical-stack
                        cards:
                          - type: custom:gap-card
                          - type: custom:mushroom-title-card
                            title: >-
                              {{
                              states('sensor.smarti_dashboard_tabbed_card_climate_fans_tab_title')
                              }}
                            subtitle: >-
                              {{
                              states('sensor.smarti_dashboard_tabbed_card_climate_fans_tab_subtitle')
                              }}
                            alignment: center
                      - type: vertical-stack
                        cards:
                          - type: custom:gap-card
                          - type: custom:lottie-card
                            animation: /local/smartianimations/fan.json
                            size: 100px
                            loop: true
                            autoplay: true
                          - type: custom:gap-card
                  - type: custom:mod-card
                    card:
                      type: custom:auto-entities
                      card:
                        type: vertical-stack
                      card_param: cards
                      filter:
                        template: >-
                          {% set area_filter = ['area1', 'area2'] %} {% set
                          visible_fans = states.fan
                            | rejectattr('attributes.hidden_by', 'defined')
                            | list %}

                          {% set areas = visible_fans
                            | map(attribute='entity_id')
                            | map('area_name')
                            | reject('none')
                            | reject('in', area_filter)
                            | unique
                            | sort %}

                          {% if areas | length == 0 %}
                            [
                              {
                                "type": "custom:button-text-card",
                                "title": "[[[ return states['sensor.smarti_dashboard_tabbed_card_climate_fans_tab_fans_missing_title']?.state || 'No title found'; ]]]",
                                "subtitle": "[[[ return states['sensor.smarti_dashboard_tabbed_card_climate_fans_tab_fans_missing_subtitle']?.state || 'No title found'; ]]]",
                                "icon": "mdi:fan-off",
                                "background_color": "var(--primary-color)"
                              }
                            ]
                          {% else %}
                            [
                              {% for area in areas %}
                                {
                                  "type": "custom:button-card",
                                  "styles": {
                                    "card": [
                                      { "height": "5px" },
                                      { "max-height": "10px" },
                                      { "padding": "0" },
                                      { "margin": "0" },
                                      { "background-color": "var(--primary-color)" }
                                    ]
                                  }
                                },
                                {
                                  "type": "custom:button-text-card",
                                  "title": "{{ area | string }}",
                                  "icon": "mdi:fan",
                                  "background_color": "var(--primary-color)"
                                },
                                {
                                  "type": "custom:auto-entities",
                                  "card": {
                                    "type": "custom:layout-card",
                                    "layout_type": "grid",
                                    "layout": {
                                      "grid-template-columns": "repeat(auto-fit, minmax(200px, 1fr))",
                                      "grid-gap": "0px"
                                    }
                                  },
                                  "card_param": "cards",
                                  "filter": {
                                    "include": [
                                      {% for fan in visible_fans
                                          | selectattr('entity_id', 'in', area_entities(area))
                                          | sort(attribute='name') %}
                                      {
                                        "entity_id": "{{ fan.entity_id }}",
                                        "options": {
                                          "type": "custom:mushroom-fan-card",
                                          "entity": "{{ fan.entity_id }}",
                                          "icon_animation": "true",
                                          "show_percentage_control": "true"
                                        }
                                      }{% if not loop.last %},{% endif %}
                                      {% endfor %}
                                    ],
                                    "exclude": [
                                      { "hidden_by": "*" }
                                    ]
                                  }
                                }
                                {% if not loop.last %},{% endif %}
                              {% endfor %}
                            ]
                          {% endif %}
        visibility:
          - condition: screen
            media_query: '(min-width: 768px)'
    background:
      opacity: 100
      alignment: center
      size: cover
      repeat: no-repeat
      attachment: fixed
      image: /local/images/smarti_images/smarti_dashboard_backgorund_image.jpg
  - title: Miscellaneous
    path: multimedia
    icon: mdi:multimedia
    type: custom:horizontal-layout
    layout:
      max_width: 2000
      max_cols: 1
    subview: true
    cards:
      - type: horizontal-stack
        cards:
          - type: vertical-stack
            cards:
              - type: custom:lottie-card
                animation: /local/smartianimations/error.json
                size: 200px
                loop: true
                autoplay: true
              - type: markdown
                content: >
                  **SMARTi Basic** is not supported on mobile devices.   To
                  enable this feature, please visit  
                  [https://www.smarti.dev](https://www.smarti.dev/smarti-store/p/smarti-powerflow-xe7ft)
                  to purchase and upgrade to the Pro version.
                style: |
                  ha-card {
                    background: rgba(0, 0, 0, 0.5); /* Slightly transparent background */
                    color: white;
                    text-align: center;
                    font-size: 1.2em;
                    padding: 20px;
                    border-radius: 10px;
                  }   
              - type: custom:mushroom-chips-card
                chips:
                  - type: spacer
                  - type: back
                  - type: menu
                  - type: spacer
        visibility:
          - condition: screen
            media_query: '(min-width: 0px) and (max-width: 767px)'
      - type: custom:mod-card
        card_mod:
          style:
            .: |
              ha-card {
                --ha-card-border-width: 0px;
                --ha-card-border-radius: 20px;
                background: linear-gradient(
                  to bottom right,
                  rgba(255, 255, 255, 0.15),
                  rgba(255, 255, 255, 0.05)
                );
                backdrop-filter: blur(15px);
                -webkit-backdrop-filter: blur(15px);
                box-shadow:
                  0 8px 32px 0 rgba(31, 38, 135, 0.37),
                  inset 0 0 0.5px rgba(255, 255, 255, 0.2); /* subtle inner glow */
                border: 5px solid rgba(255, 255, 255, 0.1);
                position: relative;
                overflow: hidden;
                border-radius: 100px 100px 10px 10px;
              }

              ha-card::before {
                content: '';
                position: absolute;
                top: -30%;
                left: -30%;
                width: 200%;
                height: 200%;
                background: radial-gradient(
                  circle at 30% 30%,
                  rgba(255, 255, 255, 0.3),
                  transparent 60%
                );
                transform: rotate(25deg);
                pointer-events: none;
              }
        card:
          type: conditional
          conditions:
            - condition: screen
              media_query: '(min-width: 768px)'
          card:
            type: vertical-stack
            cards:
              - type: horizontal-stack
                cards:
                  - type: custom:gap-card
                  - type: conditional
                    conditions:
                      - condition: or
                        conditions:
                          - entity: binary_sensor.smarti_internet
                            state: unavailable
                          - entity: binary_sensor.smarti_internet
                            state: unknown
                          - entity: sensor.browser_mod_installed
                            state_not: 'True'
                          - entity: alarm_control_panel.alarmo
                            state: unavailable
                          - entity: alarm_control_panel.alarmo
                            state: unknown
                          - entity: weather.forecast_home
                            state: unavailable
                          - entity: weather.forecast_home
                            state: unknown
                    card:
                      type: custom:button-card
                      name: ⚠️ Setup Required
                      icon: mdi:alert-circle
                      show_state: false
                      show_icon: true
                      show_name: true
                      tap_action:
                        action: navigate
                        navigation_path: /smarti-dashboard/settings3
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                          - divider-color: transparent
                        icon:
                          - color: red
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      card_mod:
                        style: |
                          ha-card {
                            border: 2px solid var(--border-color);
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                          }
                  - type: conditional
                    conditions:
                      - entity: alarm_control_panel.alarmo
                        state_not: unavailable
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_alarm'].state ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - font-size: 3em
                          - color: var(--primary-color)
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: more-info
                        entity: alarm_control_panel.alarmo
                      entity: alarm_control_panel.alarmo
                      card_mod:
                        style: |
                          ha-card {
                            background: radial-gradient(
                              circle at center,
                              rgba(0, 0, 0, 0.4) 0%,
                              rgba(0, 0, 0, 0.2) 10%,
                              rgba(0, 0, 0, 0) 40%
                            );
                            border-radius: 20px;
                            border: none
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            overflow: hidden;
                            position: relative;
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        entity: sensor.smarti_active_locks
                        above: 0
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_tabbed_card_locks_tab_title'].state
                        ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                          - animation: >
                              [[[ return
                              parseInt(states['sensor.smarti_active_locks'].state)
                              > 0 ? 'blink-red 1.5s infinite' : 'none'; ]]]
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              card:
                                type: entities
                              filter:
                                include:
                                  - domain: lock
                                    state: unlocked
                                  - domain: binary_sensor
                                    attributes:
                                      device_class: lock
                                    state: 'on'
                                exclude:
                                  - hidden_by: '*'
                              sort:
                                reverse: true
                      entity: sensor.smarti_active_locks
                      card_mod:
                        style: |
                          ha-card {
                            border: 2px solid var(--border-color);
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                          }

                          @keyframes blink-red {
                            0% {
                              color: var(--accent-color);
                            }
                            50% {
                              color: var(--primary-color);
                            }
                            100% {
                              color: var(--accent-color);
                            }
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        entity: sensor.smarti_active_motion_sensors
                        above: 0
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_motion'].state
                        ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              card:
                                type: entities
                              filter:
                                include:
                                  - domain: binary_sensor
                                    attributes:
                                      device_class: motion
                                    state: 'on'
                                exclude:
                                  - hidden_by: '*'
                              sort:
                                reverse: true
                      entity: sensor.smarti_active_motion_sensors
                      card_mod:
                        style: |
                          ha-card {
                            background: radial-gradient(
                              circle at center,
                              rgba(0, 0, 0, 0.4) 0%,
                              rgba(0, 0, 0, 0.2) 10%,
                              rgba(0, 0, 0, 0) 40%
                            );
                            border-radius: 20px;
                            border: none
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            overflow: hidden;
                            position: relative;
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        above: 0
                        entity: sensor.smarti_active_lights
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_lights'].state
                        ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              show_empty: false
                              card:
                                show_name: true
                                show_icon: true
                                show_state: true
                                type: glance
                                state_color: true
                                columns: 4
                              filter:
                                include:
                                  - domain: light
                                    state: 'on'
                                    options:
                                      tap_action:
                                        action: toggle
                                exclude:
                                  - hidden_by: '*'
                              sort:
                                method: none
                                reverse: false
                                numeric: false
                      entity: sensor.smarti_active_lights
                      card_mod:
                        style: |
                          ha-card {
                            background: radial-gradient(
                              circle at center,
                              rgba(0, 0, 0, 0.4) 0%,
                              rgba(0, 0, 0, 0.2) 10%,
                              rgba(0, 0, 0, 0) 40%
                            );
                            border-radius: 20px;
                            border: none
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            overflow: hidden;
                            position: relative;
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        above: 0
                        entity: sensor.smarti_active_doors
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_doors'].state ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              card:
                                type: entities
                              filter:
                                include:
                                  - domain: binary_sensor
                                    attributes:
                                      device_class: door
                                    state: 'on'
                                exclude:
                                  - hidden_by: '*'
                              sort:
                                reverse: true
                      entity: sensor.smarti_active_doors
                      card_mod:
                        style: |
                          ha-card {
                            background: radial-gradient(
                              circle at center,
                              rgba(0, 0, 0, 0.4) 0%,
                              rgba(0, 0, 0, 0.2) 10%,
                              rgba(0, 0, 0, 0) 40%
                            );
                            border-radius: 20px;
                            border: none
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            overflow: hidden;
                            position: relative;
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        entity: sensor.smarti_active_windows
                        above: 0
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_windows'].state
                        ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)'
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              card:
                                type: entities
                              filter:
                                include:
                                  - domain: binary_sensor
                                    attributes:
                                      device_class: window
                                    state: 'on'
                                exclude:
                                  - hidden_by: '*'
                              sort:
                                reverse: true
                      entity: sensor.smarti_active_windows
                      card_mod:
                        style: |
                          ha-card {
                            background: radial-gradient(
                              circle at center,
                              rgba(0, 0, 0, 0.4) 0%,
                              rgba(0, 0, 0, 0.2) 10%,
                              rgba(0, 0, 0, 0) 40%
                            );
                            border-radius: 20px;
                            border: none
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            overflow: hidden;
                            position: relative;
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        above: 0
                        entity: sensor.smarti_active_water_sensors
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_water'].state ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              card:
                                type: entities
                              filter:
                                include:
                                  - domain: binary_sensor
                                    attributes:
                                      device_class: moisture
                                    state: 'on'
                                exclude:
                                  - hidden_by: '*'
                              sort:
                                reverse: true
                      entity: sensor.smarti_active_water_sensors
                      card_mod:
                        style: |
                          ha-card {
                            border: 2px solid var(--border-color);
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        entity: sensor.smarti_active_smoke_detectors
                        above: 0
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_smoke'].state ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              card:
                                type: entities
                              filter:
                                include:
                                  - domain: binary_sensor
                                    attributes:
                                      device_class: smoke
                                    state: 'on'
                                exclude:
                                  - hidden_by: '*'
                              sort:
                                reverse: true
                      entity: sensor.smarti_active_smoke_detectors
                      card_mod:
                        style: |
                          ha-card {
                            background: radial-gradient(
                              circle at center,
                              rgba(0, 0, 0, 0.4) 0%,
                              rgba(0, 0, 0, 0.2) 10%,
                              rgba(0, 0, 0, 0) 40%
                            );
                            border-radius: 20px;
                            border: none
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            overflow: hidden;
                            position: relative;
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        above: 0
                        entity: sensor.smarti_active_gas_sensors
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_gas'].state ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              card:
                                type: entities
                              filter:
                                include:
                                  - domain: binary_sensor
                                    attributes:
                                      device_class: gas
                                    state: 'on'
                                exclude:
                                  - hidden_by: '*'
                              sort:
                                reverse: true
                      entity: sensor.smarti_active_gas_sensors
                      card_mod:
                        style: |
                          ha-card {
                            background: radial-gradient(
                              circle at center,
                              rgba(0, 0, 0, 0.4) 0%,
                              rgba(0, 0, 0, 0.2) 10%,
                              rgba(0, 0, 0, 0) 40%
                            );
                            border-radius: 20px;
                            border: none
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            overflow: hidden;
                            position: relative;
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        above: 0
                        entity: sensor.smarti_active_low_battery_devices_count
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_batteries'].state
                        ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              card:
                                show_header_toggle: false
                                type: entities
                                state_color: true
                              filter:
                                include:
                                  - entity_id: sensor.*_battery
                                  - entity_id: binary_sensor.*battery_low
                                  - entity_id: sensor.*.battery_state
                                exclude:
                                  - state: unavailable
                                  - state: '-'
                                  - state: unknown
                                  - state: none
                                  - state: medium
                                  - state: high
                                  - state: '= 0,0'
                                  - state: '>= 20'
                                  - state: 'off'
                                  - entity_id: sensor.campainha_ring_mqtt_battery
                                  - entity_id: sensor.campainha_battery
                                  - state: None
                                  - state: charging
                                  - state: discharging
                                  - state: high
                                  - name: /[Ll]ow/
                                  - name: /[Ss]tate/
                                  - entity_id: '*phone*'
                                  - entity_id: '*browser*'
                                  - entity_id: '*watch*'
                                  - entity_id: '*pad*'
                                  - entity_id: '*tablet*'
                                  - hidden_by: '*'
                              sort:
                                method: friendly_name
                                numeric: true
                                ignore_case: false
                                ip: false
                                reverse: false
                              show_empty: false
                      entity: sensor.smarti_active_low_battery_devices_count
                      card_mod:
                        style: |
                          ha-card {
                            background: radial-gradient(
                              circle at center,
                              rgba(0, 0, 0, 0.4) 0%,
                              rgba(0, 0, 0, 0.2) 10%,
                              rgba(0, 0, 0, 0) 40%
                            );
                            border-radius: 20px;
                            border: none
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            overflow: hidden;
                            position: relative;
                          }
                  - type: conditional
                    conditions:
                      - condition: state
                        entity: sensor.smarti_dynamic_power_sensor
                        state_not: unknown
                      - condition: state
                        entity: sensor.smarti_dynamic_power_sensor
                        state_not: unavailable
                      - condition: state
                        entity: input_boolean.smarti_show_energy_measurement
                        state_not: 'off'
                    card:
                      type: custom:mini-graph-card
                      entities:
                        - sensor.smarti_dynamic_power_sensor
                      show:
                        name: false
                        icon: true
                        legend: false
                        labels: false
                      icon: mdi:lightning-bolt
                      height: 50
                      color_thresholds:
                        - value: 3000
                          color: '#f39c12'
                        - value: 5000
                          color: '#d35400'
                        - value: 8000
                          color: '#c0392b'
                      hours_to_show: 6
                      points_per_hour: 10
                      align_icon: center
                      align_state: right
                      align_header: center
                      card_mod:
                        style: |
                          ha-card {
                            border: 2px solid var(--border-color);
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            background: transparent;
                            color: var(--primary-color); /* Ensures the text uses primary color */
                          }
                          ha-icon {
                            color: var(--primary-color); /* Sets the icon color */
                          }
                  - type: custom:gap-card
      - type: custom:button-card
        styles:
          card:
            - height: 5px
            - max-height: 10px
            - padding: 0
            - margin: 0
            - background-color: var(--primary-color);
        card_mod:
          style: |
            ha-card {
              border-radius: 1px;
              height: 2px;
              max-height: 2px;
              padding: 0;
              margin: 0;
              background: var(--primary-color);
            }
        visibility:
          - condition: screen
            media_query: '(min-width: 768px)'
      - type: custom:mod-card
        card_mod:
          style:
            .: |
              ha-card {
                --ha-card-border-width: 0px;
                --ha-card-border-radius: 20px;
                background: linear-gradient(
                  to bottom right,
                  rgba(255, 255, 255, 0.15),
                  rgba(255, 255, 255, 0.05)
                );
                backdrop-filter: blur(15px);
                -webkit-backdrop-filter: blur(15px);
                box-shadow:
                  0 8px 32px 0 rgba(31, 38, 135, 0.37),
                  inset 0 0 0.5px rgba(255, 255, 255, 0.2); /* subtle inner glow */
                border: 5px solid rgba(255, 255, 255, 0.1);
                position: relative;
                overflow: hidden;
                border-radius: 10px 10px 20px 20px;
              }

              ha-card::before {
                content: '';
                position: absolute;
                top: -30%;
                left: -30%;
                width: 200%;
                height: 200%;
                background: radial-gradient(
                  circle at 30% 30%,
                  rgba(255, 255, 255, 0.3),
                  transparent 60%
                );
                transform: rotate(25deg);
                pointer-events: none;
              }
        card:
          type: horizontal-stack
          cards:
            - type: custom:button-card
              name: Home
              show_icon: true
              icon: mdi:home
              show_name: false
              styles:
                card:
                  - max-height: 50px
                  - justify-content: center
                  - align-items: center
                icon:
                  - color: black
                  - max-height: 30px
                  - max-width: 30px
                  - min-height: 30px
                  - min-width: 20px
                  - color: var(--primary-color)
                name:
                  - color: black
              tap_action:
                action: navigate
                navigation_path: home#
              card_mod:
                style: |
                  ha-card {
                    border-radius: 5px 5px 5px 15px;
                  }
            - type: conditional
              conditions:
                - entity: input_boolean.smarti_show_weather_tab
                  state: 'on'
              card:
                type: custom:button-card
                name: Rooms
                show_icon: true
                icon: mdi:weather-partly-cloudy
                show_name: false
                styles:
                  card:
                    - max-height: 50px
                    - justify-content: center
                    - align-items: center
                  icon:
                    - color: black
                    - max-height: 30px
                    - max-width: 30px
                    - min-height: 30px
                    - min-width: 20px
                    - color: var(--primary-color)
                  name:
                    - color: black
                tap_action:
                  action: navigate
                  navigation_path: rooms#
                card_mod:
                  style: |
                    ha-card {
                      border-radius: 5px 5px 5px 5px;
                    }
            - type: conditional
              conditions:
                - entity: input_boolean.smarti_show_light_tab
                  state: 'on'
              card:
                type: custom:button-card
                name: Light Control
                show_icon: true
                icon: mdi:lightbulb-group
                show_name: false
                styles:
                  card:
                    - max-height: 50px
                    - justify-content: center
                    - align-items: center
                  icon:
                    - color: black
                    - max-height: 30px
                    - max-width: 30px
                    - min-height: 30px
                    - min-width: 20px
                    - color: var(--primary-color)
                  name:
                    - color: black
                state:
                  - value: 'on'
                    styles:
                      card:
                        - background-color: '#FF7000'
                tap_action:
                  action: navigate
                  navigation_path: lights#
                card_mod:
                  style: |
                    ha-card {
                      border-radius: 5px 5px 5px 5px;   

                    }  
            - type: conditional
              conditions:
                - entity: input_boolean.smarti_show_climate_tab
                  state: 'on'
              card:
                type: custom:button-card
                name: Heating Control
                show_icon: true
                icon: mdi:thermometer-water
                show_name: false
                styles:
                  card:
                    - max-height: 50px
                    - justify-content: center
                    - align-items: center
                  icon:
                    - max-height: 30px
                    - max-width: 30px
                    - min-height: 30px
                    - min-width: 20px
                    - color: var(--primary-color)
                  name:
                    - color: black
                tap_action:
                  action: navigate
                  navigation_path: heating#
                card_mod:
                  style: |
                    ha-card {
                      border-radius: 5px 5px 5px 5px;  
                    }
            - type: conditional
              conditions:
                - entity: input_boolean.smarti_show_misc_tab
                  state: 'on'
              card:
                type: custom:button-card
                name: Multimedia
                show_icon: true
                icon: mdi:multimedia
                show_name: false
                styles:
                  card:
                    - max-height: 50px
                    - justify-content: center
                    - align-items: center
                  icon:
                    - max-height: 30px
                    - max-width: 30px
                    - min-height: 30px
                    - min-width: 20px
                  name:
                    - color: black
                tap_action:
                  action: navigate
                  navigation_path: multimedia#
                card_mod:
                  style: |
                    ha-card {
                      border-radius: 5px 5px 5px 5px;
                      background-color: var(--primary-color);  
                    }
            - type: conditional
              conditions:
                - entity: input_boolean.smarti_show_security_tab
                  state: 'on'
              card:
                type: custom:button-card
                name: Cameras
                show_icon: true
                icon: mdi:shield
                show_name: false
                styles:
                  card:
                    - max-height: 50px
                    - justify-content: center
                    - align-items: center
                  icon:
                    - color: black
                    - max-height: 30px
                    - max-width: 30px
                    - min-height: 30px
                    - min-width: 20px
                    - color: var(--primary-color)
                  name:
                    - color: black
                tap_action:
                  action: navigate
                  navigation_path: cameras#
                card_mod:
                  style: |
                    ha-card {
                      border-radius: 5px 5px 5px 5px;    
                    }
            - type: conditional
              conditions:
                - entity: input_boolean.smarti_show_energy_tab
                  state: 'on'
              card:
                type: custom:button-card
                name: Power Control
                show_icon: true
                icon: mdi:lightning-bolt
                show_name: false
                styles:
                  card:
                    - max-height: 50px
                    - justify-content: center
                    - align-items: center
                  icon:
                    - color: black
                    - max-height: 30px
                    - max-width: 30px
                    - min-height: 30px
                    - min-width: 20px
                    - color: var(--primary-color)
                  name:
                    - color: black
                tap_action:
                  action: navigate
                  navigation_path: power#
                card_mod:
                  style: |
                    ha-card {
                      border-radius: 5px 5px 5px 5px;    
                    }
            - type: custom:button-card
              name: Settings
              show_icon: true
              icon: mdi:cog
              show_name: false
              styles:
                card:
                  - max-height: 50px
                  - justify-content: center
                  - align-items: center
                icon:
                  - max-height: 30px
                  - max-width: 30px
                  - min-height: 30px
                  - min-width: 20px
                  - color: var(--primary-color)
                name:
                  - color: black
              tap_action:
                action: navigate
                navigation_path: settings2#
              card_mod:
                style: |
                  ha-card{
                    border-radius: 5px 5px 15px 5px;
                  }  
          visibility:
            - condition: screen
              media_query: '(min-width: 0px)'
      - type: custom:gap-card
        height: 25
        visibility:
          - condition: screen
            media_query: '(min-width: 0px) and (max-width: 767px)'
      - type: custom:mod-card
        card_mod:
          style:
            .: |
              ha-card {
                --ha-card-border-width: 0px;
                --ha-card-border-radius: 20px;
                --ha-card-background: transparent;
              }           
        card:
          type: horizontal-stack
          cards:
            - type: horizontal-stack
              cards:
                - type: vertical-stack
                  cards:
                    - type: custom:gap-card
                    - type: custom:mushroom-title-card
                      title: null
                      subtitle: >-
                        {{
                        states('sensor.smarti_dashboard_tabbed_card_multimedia_devices_tab_title')
                        }}
                      alignment: center
                    - type: custom:mod-card
                      card:
                        type: custom:auto-entities
                        filter:
                          include:
                            - domain: media_player
                        card:
                          type: custom:maxi-media-player
                          name: All Media Players
                        card_param: entities
                    - type: custom:gap-card
                - type: vertical-stack
                  cards:
                    - type: custom:gap-card
                    - type: custom:mushroom-title-card
                      title: '{{ states(''sensor.smarti_dashboard_misc_page_title'') }}'
                      subtitle: >-
                        {{ states('sensor.smarti_dashboard_misc_page_subtitle')
                        }}
                      alignment: center
                    - type: custom:lottie-card
                      animation: /local/smartianimations/misc.json
                      size: 150px
                      loop: true
                      autoplay: true
                    - type: custom:gap-card
                - type: vertical-stack
                  cards:
                    - type: custom:gap-card
                    - type: custom:mushroom-title-card
                      title: null
                      subtitle: >-
                        {{
                        states('sensor.smarti_dashboard_tabbed_card_vacuums_tab_title')
                        }}
                      alignment: center
                    - type: custom:auto-entities
                      filter:
                        include:
                          - domain: vacuum
                      card:
                        type: entities
                        title: Robot Vacuums
                        show_header_toggle: false
                      card_param: entities
                    - type: custom:gap-card
        visibility:
          - condition: screen
            media_query: '(min-width: 768px)'
      - type: custom:gap-card
        height: 25
      - type: custom:button-card
        styles:
          card:
            - height: 5px
            - max-height: 10px
            - padding: 0
            - margin: 0
            - background-color: var(--primary-color);
        card_mod:
          style: |
            ha-card {
              border-radius: 1px;
              height: 2px;
              max-height: 2px;
              padding: 0;
              margin: 0;
              background: var(--primary-color);
            }
        visibility:
          - condition: screen
            media_query: '(min-width: 768px)'
      - type: custom:mod-card
        card_mod:
          style:
            .: |
              ha-card {
                --ha-card-border-width: 0px;
                --ha-card-border-radius: 20px;
                --ha-card-background: transparent;
              } 
            tabbed-card $:
              mwc-tab:
                $: |
                  .mdc-tab--active {
                    background: var(--primary-color) !important;
                    border-radius: 5px 5px 0px 0px;
                  }
        card:
          type: custom:tabbed-card
          tabs:
            - attributes:
                label: null
                icon: mdi:multimedia
              card:
                type: vertical-stack
                cards:
                  - type: horizontal-stack
                    cards:
                      - type: vertical-stack
                        cards:
                          - type: custom:gap-card
                          - type: custom:mushroom-title-card
                            title: >-
                              {{
                              states('sensor.smarti_dashboard_tabbed_card_multimedia_devices_tab_title')
                              }}
                            subtitle: >-
                              {{
                              states('sensor.smarti_dashboard_tabbed_card_multimedia_devices_tab_subtitle')
                              }}
                            alignment: center
                      - type: vertical-stack
                        cards:
                          - type: custom:lottie-card
                            animation: /local/smartianimations/multimedia.json
                            size: 225px
                            loop: true
                            autoplay: true
                  - type: custom:auto-entities
                    card:
                      type: vertical-stack
                    card_param: cards
                    filter:
                      template: >-
                        {% set area_filter = ['area1', 'area2'] %} {% set
                        visible_media_players = states.media_player
                            | rejectattr('attributes.hidden_by', 'defined') 
                            | list %}
                        {% set areas = visible_media_players
                            | map(attribute='entity_id')
                            | map('area_name')
                            | reject('none')
                            | reject('in', area_filter)
                            | unique 
                            | sort %}

                        {% if areas | length == 0 %}
                          [
                            {
                              "type": "custom:button-text-card",
                              "title": "No media players found",
                              "subtitle": "All media players are hidden or filtered out.",
                              "icon": "mdi:chat-question",
                              "background_color": "var(--primary-color)"
                            }
                          ]
                        {% else %}
                          [
                            {% for area in areas %}
                              {
                                "type": "custom:button-card",
                                "styles": {
                                  "card": [
                                    { "height": "5px" },
                                    { "max-height": "10px" },
                                    { "padding": "0" },
                                    { "margin": "0" },
                                    { "background-color": "var(--primary-color)" }
                                  ]
                                }
                              },
                              {
                                "type": "custom:button-text-card",
                                "title": "{{ area }}",
                                "icon": "mdi:multimedia",
                                "background_color": "var(--primary-color)"
                              },
                              {
                                "type": "custom:auto-entities",
                                "card": {
                                  "type": "custom:layout-card",
                                  "layout_type": "grid",
                                  "layout": {
                                    "grid-template-columns": "repeat(auto-fit, minmax(200px, 1fr))",
                                    "grid-gap": "0px"
                                  }
                                },
                                "filter": {
                                  "include": [
                                    {
                                      "domain": "media_player",
                                      "area": "{{ area }}",
                                      "options": {
                                        "type": "custom:bubble-card",
                                        "card_type": "media-player",
                                        "show_state": "true",
                                        "show_last_updated": "true",
                                        "show_attribute": "true",
                                        "attribute": "assumed_state",
                                        "card_layout": "large",
                                        "scrolling_effect": "false",
                                        "show_icon": "true",
                                        "force_icon": "true",
                                        "show_name": "false",
                                        "show_last_changed": "true"
                                      }                  
                                    }
                                  ],
                                  "exclude": [
                                    { "hidden_by": "*" }
                                  ]
                                }
                              }
                              {% if not loop.last %},{% endif %}
                            {% endfor %}
                          ]
                        {% endif %}
            - attributes:
                label: null
                icon: mdi:dip-switch
              card:
                type: vertical-stack
                cards:
                  - type: horizontal-stack
                    cards:
                      - type: vertical-stack
                        cards:
                          - type: custom:gap-card
                          - type: custom:mushroom-title-card
                            title: >-
                              {{
                              states('sensor.smarti_dashboard_tabbed_card_switches_tab_title')
                              }}
                            subtitle: >-
                              {{
                              states('sensor.smarti_dashboard_tabbed_card_switches_tab_subtitle')
                              }}
                            alignment: center
                      - type: vertical-stack
                        cards:
                          - type: custom:lottie-card
                            animation: /local/smartianimations/switch.json
                            size: 225px
                            loop: true
                            autoplay: true
                  - type: custom:mod-card
                    card:
                      type: custom:auto-entities
                      card:
                        type: vertical-stack
                      card_param: cards
                      filter:
                        template: >-
                          {% set area_filter = ['area1', 'area2'] %} {% set
                          entity_filter = ['switch.switch1', 'switch.switch2']
                          %} {% set visible_switches = states.switch
                            | rejectattr('entity_id', 'in', entity_filter)
                            | rejectattr('attributes.hidden_by', 'defined')
                            | list %}

                          {% set areas = visible_switches
                            | map(attribute='entity_id')
                            | map('area_name')
                            | reject('none')
                            | reject('in', area_filter)
                            | unique
                            | sort %}

                          {% if areas | length == 0 %}
                            [
                              {
                                "type": "custom:button-text-card",
                                "title": "[[[ return states['sensor.smarti_dashboard_tabbed_card_switches_tab_missing_title']?.state || 'No title found'; ]]]",
                                "subtitle": "[[[ return states['sensor.smarti_dashboard_tabbed_card_switches_tab_missing_title']?.state || 'No subtitle found'; ]]]",
                                "icon": "mdi:toggle-switch-off",
                                "background_color": "var(--primary-color)"
                              }
                            ]
                          {% else %}
                            [
                              {% for area in areas %}
                                {
                                  "type": "custom:button-card",
                                  "styles": {
                                    "card": [
                                      { "height": "5px" },
                                      { "max-height": "10px" },
                                      { "padding": "0" },
                                      { "margin": "0" },
                                      { "background-color": "var(--primary-color)" }
                                    ]
                                  }
                                },
                                {
                                  "type": "custom:button-text-card",
                                  "title": "{{ area }}",
                                  "icon": "mdi:toggle-switch",
                                  "background_color": "var(--primary-color)"
                                },
                                {
                                  "type": "custom:auto-entities",
                                  "card": {
                                    "type": "custom:layout-card",
                                    "layout_type": "grid",
                                    "layout": {
                                      "grid-template-columns": "repeat(auto-fit, minmax(400px, 1fr))",
                                      "grid-gap": "0px"
                                    }
                                  },
                                  "card_param": "cards",
                                  "filter": {
                                    "include": [
                                      {% for switch in visible_switches
                                          | selectattr('entity_id', 'in', area_entities(area))
                                          | sort(attribute='name') %}
                                      {
                                        "entity_id": "{{ switch.entity_id }}",
                                        "options": {
                                          "type": "custom:bubble-card",
                                          "card_type": "button",
                                          "button_type": "switch",
                                          "force_icon": "true",
                                          "show_last_changed": "true",
                                          "show_attribute": "true",
                                          "card_layout": "normal",
                                          "entity": "{{ switch.entity_id }}"
                                        }
                                      }{% if not loop.last %},{% endif %}
                                      {% endfor %}
                                    ],
                                    "exclude": [
                                      { "entity_id": {{ entity_filter | tojson }} },
                                      { "hidden_by": "*" }
                                    ]
                                  }
                                }
                                {% if not loop.last %},{% endif %}
                              {% endfor %}
                            ]
                          {% endif %}
            - attributes:
                label: null
                icon: mdi:robot-vacuum
              card:
                type: vertical-stack
                cards:
                  - type: horizontal-stack
                    cards:
                      - type: vertical-stack
                        cards:
                          - type: custom:gap-card
                          - type: custom:mushroom-title-card
                            title: >-
                              {{
                              states('sensor.smarti_dashboard_tabbed_card_vacuums_tab_title')
                              }}
                            subtitle: >-
                              {{
                              states('sensor.smarti_dashboard_tabbed_card_vacuums_tab_subtitle')
                              }}
                            alignment: center
                      - type: vertical-stack
                        cards:
                          - type: custom:gap-card
                          - type: custom:lottie-card
                            animation: /local/smartianimations/robotvaccum2.json
                            size: 100px
                            loop: true
                            autoplay: true
                          - type: custom:gap-card
                  - type: custom:mod-card
                    card:
                      type: custom:auto-entities
                      card:
                        type: vertical-stack
                      card_param: cards
                      filter:
                        template: >-
                          {% set area_filter = ['area1', 'area2'] %} {% set
                          visible_vacuums = states.vacuum
                            | rejectattr('attributes.hidden_by', 'defined')
                            | list %}
                          {% set areas = visible_vacuums
                            | map(attribute='entity_id')
                            | map('area_name')
                            | reject('none')
                            | reject('in', area_filter)
                            | unique
                            | sort %}

                          {% if areas | length == 0 %}
                            [
                              {
                                "type": "custom:button-text-card",
                                "title": "[[[ return states['sensor.smarti_dashboard_tabbed_card_vacuums_tab_missing_title']?.state || 'No title found'; ]]]",
                                "subtitle": "[[[ return states['sensor.smarti_dashboard_tabbed_card_vacuums_tab_missing_subtitle']?.state || 'No subtitle found'; ]]]",
                                "icon": "mdi:chat-question",
                                "background_color": "var(--primary-color)"
                              }
                            ]
                          {% else %}
                            [
                              {% for area in areas %}
                                {
                                  "type": "custom:button-card",
                                  "styles": {
                                    "card": [
                                      { "height": "5px" },
                                      { "max-height": "10px" },
                                      { "padding": "0" },
                                      { "margin": "0" },
                                      { "background-color": "var(--primary-color)" }
                                    ]
                                  }
                                },
                                {
                                  "type": "custom:button-text-card",
                                  "title": "{{ area }}",
                                  "icon": "mdi:robot-vacuum",
                                  "background_color": "var(--primary-color)"
                                },
                                {
                                  "type": "custom:auto-entities",
                                  "card": {
                                    "type": "custom:layout-card",
                                    "layout_type": "grid",
                                    "layout": {
                                      "grid-template-columns": "repeat(auto-fit, minmax(200px, 1fr))",
                                      "grid-gap": "0px"
                                    }
                                  },
                                  "card_param": "cards",
                                  "filter": {
                                    "include": [
                                      {% for vacuum in visible_vacuums
                                          | selectattr('entity_id', 'in', area_entities(area))
                                          | sort(attribute='name') %}
                                      {
                                        "entity_id": "{{ vacuum.entity_id }}",
                                        "options": {
                                          "type": "custom:mushroom-vacuum-card",
                                          "entity": "{{ vacuum.entity_id }}",
                                          "icon_animation": "true",
                                          "fill_container": "true",
                                          "layout": "horizontal",
                                          "icon_type": "icon",
                                          "primary_info": "name",
                                          "secondary_info": "state",
                                          "commands": ["start_pause", "stop", "locate", "clean_spot", "return_home"],
                                        }
                                      }{% if not loop.last %},{% endif %}
                                      {% endfor %}
                                    ],
                                    "exclude": [
                                      { "hidden_by": "*" }
                                    ]
                                  }
                                }
                                {% if not loop.last %},{% endif %}
                              {% endfor %}
                            ]
                          {% endif %}
            - attributes:
                label: null
                icon: mdi:window-shutter
              card:
                type: custom:mod-card
                card:
                  type: vertical-stack
                  cards:
                    - type: horizontal-stack
                      cards:
                        - type: vertical-stack
                          cards:
                            - type: custom:mushroom-title-card
                              title: >-
                                {{
                                states('sensor.smarti_dashboard_tabbed_card_covers_tab_title')
                                }}
                              subtitle: >-
                                {{
                                states('sensor.smarti_dashboard_tabbed_card_covers_tab_subtitle')
                                }}
                              alignment: center
                        - type: vertical-stack
                          cards:
                            - type: custom:gap-card
                            - type: custom:lottie-card
                              animation: /local/smartianimations/blinds.json
                              size: 100px
                              loop: true
                              autoplay: true
                            - type: custom:gap-card
                    - type: custom:mod-card
                      card:
                        type: custom:auto-entities
                        card:
                          type: vertical-stack
                        card_param: cards
                        filter:
                          template: >-
                            {% set area_filter = ['area1', 'area2'] %} {% set
                            visible_covers = states.cover
                              | rejectattr('attributes.hidden_by', 'defined')
                              | list %}

                            {% set areas = visible_covers
                              | map(attribute='entity_id')
                              | map('area_name')
                              | reject('none')
                              | reject('in', area_filter)
                              | unique
                              | sort %}

                            {% if areas | length == 0 %}
                              [
                                {
                                  "type": "custom:button-text-card",
                                  "title": "[[[ return states['sensor.smarti_dashboard_tabbed_card_covers_tab_missing_title']?.state || 'No title found'; ]]]",
                                  "subtitle": "[[[ return states['sensor.smarti_dashboard_tabbed_card_covers_tab_missing_subtitle']?.state || 'No subtitle found'; ]]]",
                                  "icon": "mdi:chat-question",
                                  "background_color": "var(--primary-color)"
                                }
                              ]
                            {% else %}
                              [
                                {% for area in areas %}
                                  {
                                    "type": "custom:button-card",
                                    "styles": {
                                      "card": [
                                        { "height": "5px" },
                                        { "max-height": "10px" },
                                        { "padding": "0" },
                                        { "margin": "0" },
                                        { "background-color": "var(--primary-color)" }
                                      ]
                                    }
                                  },
                                  {
                                    "type": "custom:button-text-card",
                                    "title": "{{ area }}",
                                    "icon": "mdi:window-shutter",
                                    "background_color": "var(--primary-color)"
                                  },
                                  {
                                    "type": "custom:auto-entities",
                                    "card": {
                                      "type": "custom:layout-card",
                                      "layout_type": "grid",
                                      "layout": {
                                        "grid-template-columns": "repeat(auto-fit, minmax(300px, 1fr))",
                                        "grid-gap": "0px"
                                      }
                                    },
                                    "card_param": "cards",
                                    "filter": {
                                      "include": [
                                        {% for cover in visible_covers
                                            | selectattr('entity_id', 'in', area_entities(area))
                                            | sort(attribute='name') %}
                                        {
                                          "entity_id": "{{ cover.entity_id }}",
                                          "options": {
                                            "type": "custom:bubble-card",
                                            "card_type": "cover",
                                            "entity": "{{ cover.entity_id }}",
                                            "icon_open": "mdi:roller-shade",
                                            "icon_close": "mdi:roller-shade-closed",
                                            "fill_container": "true",
                                            "layout": "horizontal",
                                            "primary_info": "name",
                                            "secondary_info": "state",
                                            "icon_type": "icon",
                                            "show_buttons_control": "true",
                                            "show_position_control": "true",
                                            "show_tilt_position_control": "true"          
                                          }
                                        }{% if not loop.last %},{% endif %}
                                        {% endfor %}
                                      ],
                                      "exclude": [
                                        { "hidden_by": "*" }
                                      ]
                                    }
                                  }
                                  {% if not loop.last %},{% endif %}
                                {% endfor %}
                              ]
                            {% endif %}
            - attributes:
                label: null
                icon: mdi:chat-question
              card:
                type: vertical-stack
                cards:
                  - type: horizontal-stack
                    cards:
                      - type: vertical-stack
                        cards:
                          - type: custom:gap-card
                          - type: custom:mushroom-title-card
                            title: >-
                              {{
                              states('sensor.smarti_dashboard_tabbed_card_unassigned_entities_tab_title')
                              }}
                            subtitle: >-
                              {{
                              states('sensor.smarti_dashboard_tabbed_card_unassigned_entities_tab_subtitle')
                              }}
                            alignment: center
                      - type: vertical-stack
                        cards:
                          - type: custom:gap-card
                          - type: custom:lottie-card
                            animation: /local/smartianimations/unassigned.json
                            size: 100px
                            loop: true
                            autoplay: true
                          - type: custom:gap-card
                  - type: custom:auto-entities
                    card:
                      type: entities
                      show_header_toggle: false
                    filter:
                      include:
                        - domain: light
                          not:
                            area: '*'
                        - domain: cover
                          not:
                            area: '*'
                        - domain: fan
                          not:
                            area: '*'
                        - domain: switch
                          not:
                            area: '*'
                        - domain: lock
                          not:
                            area: '*'
                        - domain: sensor
                          attributes:
                            device_class: temperature
                          not:
                            area: '*'
                        - domain: camera
                          not:
                            area: '*'
                        - domain: climate
                          not:
                            area: '*'
                        - domain: media_player
                          state: '!= Unavailable'
                          not:
                            area: '*'
                        - domain: vacuum
                          not:
                            area: '*'
                        - domain: water_heater
                          not:
                            area: '*'
                        - domain: script
                          not:
                            area: '*'
                        - domain: siren
                          not:
                            area: '*'
                        - domain: screen
                          state: '!= Unavailable'
                          not:
                            area: '*'
                      exclude:
                        - domain: group
                        - entity_id: '*screen*'
                        - entity_id: screen
                    sort:
                      method: name
        visibility:
          - condition: screen
            media_query: '(min-width: 768px)'
    background:
      opacity: 100
      alignment: center
      size: cover
      repeat: no-repeat
      attachment: fixed
      image: /local/images/smarti_images/smarti_dashboard_backgorund_image.jpg
  - title: Security
    path: cameras
    icon: mdi:shield
    type: custom:horizontal-layout
    layout:
      max_width: 2000
      max_cols: 1
    subview: true
    cards:
      - type: horizontal-stack
        cards:
          - type: vertical-stack
            cards:
              - type: custom:lottie-card
                animation: /local/smartianimations/error.json
                size: 200px
                loop: true
                autoplay: true
              - type: markdown
                content: >
                  **SMARTi Basic** is not supported on mobile devices.   To
                  enable this feature, please visit  
                  [https://www.smarti.dev](https://www.smarti.dev/smarti-store/p/smarti-powerflow-xe7ft)
                  to purchase and upgrade to the Pro version.
                style: |
                  ha-card {
                    background: rgba(0, 0, 0, 0.5); /* Slightly transparent background */
                    color: white;
                    text-align: center;
                    font-size: 1.2em;
                    padding: 20px;
                    border-radius: 10px;
                  }   
              - type: custom:mushroom-chips-card
                chips:
                  - type: spacer
                  - type: back
                  - type: menu
                  - type: spacer
        visibility:
          - condition: screen
            media_query: '(min-width: 0px) and (max-width: 767px)'
      - type: custom:mod-card
        card_mod:
          style:
            .: |
              ha-card {
                --ha-card-border-width: 0px;
                --ha-card-border-radius: 20px;
                background: linear-gradient(
                  to bottom right,
                  rgba(255, 255, 255, 0.15),
                  rgba(255, 255, 255, 0.05)
                );
                backdrop-filter: blur(15px);
                -webkit-backdrop-filter: blur(15px);
                box-shadow:
                  0 8px 32px 0 rgba(31, 38, 135, 0.37),
                  inset 0 0 0.5px rgba(255, 255, 255, 0.2); /* subtle inner glow */
                border: 5px solid rgba(255, 255, 255, 0.1);
                position: relative;
                overflow: hidden;
                border-radius: 100px 100px 10px 10px;
              }

              ha-card::before {
                content: '';
                position: absolute;
                top: -30%;
                left: -30%;
                width: 200%;
                height: 200%;
                background: radial-gradient(
                  circle at 30% 30%,
                  rgba(255, 255, 255, 0.3),
                  transparent 60%
                );
                transform: rotate(25deg);
                pointer-events: none;
              }
        card:
          type: conditional
          conditions:
            - condition: screen
              media_query: '(min-width: 768px)'
          card:
            type: vertical-stack
            cards:
              - type: horizontal-stack
                cards:
                  - type: custom:gap-card
                  - type: conditional
                    conditions:
                      - condition: or
                        conditions:
                          - entity: binary_sensor.smarti_internet
                            state: unavailable
                          - entity: binary_sensor.smarti_internet
                            state: unknown
                          - entity: sensor.browser_mod_installed
                            state_not: 'True'
                          - entity: alarm_control_panel.alarmo
                            state: unavailable
                          - entity: alarm_control_panel.alarmo
                            state: unknown
                          - entity: weather.forecast_home
                            state: unavailable
                          - entity: weather.forecast_home
                            state: unknown
                    card:
                      type: custom:button-card
                      name: ⚠️ Setup Required
                      icon: mdi:alert-circle
                      show_state: false
                      show_icon: true
                      show_name: true
                      tap_action:
                        action: navigate
                        navigation_path: /smarti-dashboard/settings3
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                          - divider-color: transparent
                        icon:
                          - color: red
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      card_mod:
                        style: |
                          ha-card {
                            border: 2px solid var(--border-color);
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                          }
                  - type: conditional
                    conditions:
                      - entity: alarm_control_panel.alarmo
                        state_not: unavailable
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_alarm'].state ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - font-size: 3em
                          - color: var(--primary-color)
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: more-info
                        entity: alarm_control_panel.alarmo
                      entity: alarm_control_panel.alarmo
                      card_mod:
                        style: |
                          ha-card {
                            background: radial-gradient(
                              circle at center,
                              rgba(0, 0, 0, 0.4) 0%,
                              rgba(0, 0, 0, 0.2) 10%,
                              rgba(0, 0, 0, 0) 40%
                            );
                            border-radius: 20px;
                            border: none
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            overflow: hidden;
                            position: relative;
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        entity: sensor.smarti_active_locks
                        above: 0
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_tabbed_card_locks_tab_title'].state
                        ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                          - animation: >
                              [[[ return
                              parseInt(states['sensor.smarti_active_locks'].state)
                              > 0 ? 'blink-red 1.5s infinite' : 'none'; ]]]
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              card:
                                type: entities
                              filter:
                                include:
                                  - domain: lock
                                    state: unlocked
                                  - domain: binary_sensor
                                    attributes:
                                      device_class: lock
                                    state: 'on'
                                exclude:
                                  - hidden_by: '*'
                              sort:
                                reverse: true
                      entity: sensor.smarti_active_locks
                      card_mod:
                        style: |
                          ha-card {
                            border: 2px solid var(--border-color);
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                          }

                          @keyframes blink-red {
                            0% {
                              color: var(--accent-color);
                            }
                            50% {
                              color: var(--primary-color);
                            }
                            100% {
                              color: var(--accent-color);
                            }
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        entity: sensor.smarti_active_motion_sensors
                        above: 0
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_motion'].state
                        ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              card:
                                type: entities
                              filter:
                                include:
                                  - domain: binary_sensor
                                    attributes:
                                      device_class: motion
                                    state: 'on'
                                exclude:
                                  - hidden_by: '*'
                              sort:
                                reverse: true
                      entity: sensor.smarti_active_motion_sensors
                      card_mod:
                        style: |
                          ha-card {
                            background: radial-gradient(
                              circle at center,
                              rgba(0, 0, 0, 0.4) 0%,
                              rgba(0, 0, 0, 0.2) 10%,
                              rgba(0, 0, 0, 0) 40%
                            );
                            border-radius: 20px;
                            border: none
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            overflow: hidden;
                            position: relative;
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        above: 0
                        entity: sensor.smarti_active_lights
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_lights'].state
                        ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              show_empty: false
                              card:
                                show_name: true
                                show_icon: true
                                show_state: true
                                type: glance
                                state_color: true
                                columns: 4
                              filter:
                                include:
                                  - domain: light
                                    state: 'on'
                                    options:
                                      tap_action:
                                        action: toggle
                                exclude:
                                  - hidden_by: '*'
                              sort:
                                method: none
                                reverse: false
                                numeric: false
                      entity: sensor.smarti_active_lights
                      card_mod:
                        style: |
                          ha-card {
                            background: radial-gradient(
                              circle at center,
                              rgba(0, 0, 0, 0.4) 0%,
                              rgba(0, 0, 0, 0.2) 10%,
                              rgba(0, 0, 0, 0) 40%
                            );
                            border-radius: 20px;
                            border: none
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            overflow: hidden;
                            position: relative;
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        above: 0
                        entity: sensor.smarti_active_doors
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_doors'].state ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              card:
                                type: entities
                              filter:
                                include:
                                  - domain: binary_sensor
                                    attributes:
                                      device_class: door
                                    state: 'on'
                                exclude:
                                  - hidden_by: '*'
                              sort:
                                reverse: true
                      entity: sensor.smarti_active_doors
                      card_mod:
                        style: |
                          ha-card {
                            background: radial-gradient(
                              circle at center,
                              rgba(0, 0, 0, 0.4) 0%,
                              rgba(0, 0, 0, 0.2) 10%,
                              rgba(0, 0, 0, 0) 40%
                            );
                            border-radius: 20px;
                            border: none
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            overflow: hidden;
                            position: relative;
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        entity: sensor.smarti_active_windows
                        above: 0
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_windows'].state
                        ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)'
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              card:
                                type: entities
                              filter:
                                include:
                                  - domain: binary_sensor
                                    attributes:
                                      device_class: window
                                    state: 'on'
                                exclude:
                                  - hidden_by: '*'
                              sort:
                                reverse: true
                      entity: sensor.smarti_active_windows
                      card_mod:
                        style: |
                          ha-card {
                            background: radial-gradient(
                              circle at center,
                              rgba(0, 0, 0, 0.4) 0%,
                              rgba(0, 0, 0, 0.2) 10%,
                              rgba(0, 0, 0, 0) 40%
                            );
                            border-radius: 20px;
                            border: none
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            overflow: hidden;
                            position: relative;
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        above: 0
                        entity: sensor.smarti_active_water_sensors
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_water'].state ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              card:
                                type: entities
                              filter:
                                include:
                                  - domain: binary_sensor
                                    attributes:
                                      device_class: moisture
                                    state: 'on'
                                exclude:
                                  - hidden_by: '*'
                              sort:
                                reverse: true
                      entity: sensor.smarti_active_water_sensors
                      card_mod:
                        style: |
                          ha-card {
                            border: 2px solid var(--border-color);
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        entity: sensor.smarti_active_smoke_detectors
                        above: 0
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_smoke'].state ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              card:
                                type: entities
                              filter:
                                include:
                                  - domain: binary_sensor
                                    attributes:
                                      device_class: smoke
                                    state: 'on'
                                exclude:
                                  - hidden_by: '*'
                              sort:
                                reverse: true
                      entity: sensor.smarti_active_smoke_detectors
                      card_mod:
                        style: |
                          ha-card {
                            background: radial-gradient(
                              circle at center,
                              rgba(0, 0, 0, 0.4) 0%,
                              rgba(0, 0, 0, 0.2) 10%,
                              rgba(0, 0, 0, 0) 40%
                            );
                            border-radius: 20px;
                            border: none
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            overflow: hidden;
                            position: relative;
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        above: 0
                        entity: sensor.smarti_active_gas_sensors
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_gas'].state ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              card:
                                type: entities
                              filter:
                                include:
                                  - domain: binary_sensor
                                    attributes:
                                      device_class: gas
                                    state: 'on'
                                exclude:
                                  - hidden_by: '*'
                              sort:
                                reverse: true
                      entity: sensor.smarti_active_gas_sensors
                      card_mod:
                        style: |
                          ha-card {
                            background: radial-gradient(
                              circle at center,
                              rgba(0, 0, 0, 0.4) 0%,
                              rgba(0, 0, 0, 0.2) 10%,
                              rgba(0, 0, 0, 0) 40%
                            );
                            border-radius: 20px;
                            border: none
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            overflow: hidden;
                            position: relative;
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        above: 0
                        entity: sensor.smarti_active_low_battery_devices_count
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_batteries'].state
                        ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              card:
                                show_header_toggle: false
                                type: entities
                                state_color: true
                              filter:
                                include:
                                  - entity_id: sensor.*_battery
                                  - entity_id: binary_sensor.*battery_low
                                  - entity_id: sensor.*.battery_state
                                exclude:
                                  - state: unavailable
                                  - state: '-'
                                  - state: unknown
                                  - state: none
                                  - state: medium
                                  - state: high
                                  - state: '= 0,0'
                                  - state: '>= 20'
                                  - state: 'off'
                                  - entity_id: sensor.campainha_ring_mqtt_battery
                                  - entity_id: sensor.campainha_battery
                                  - state: None
                                  - state: charging
                                  - state: discharging
                                  - state: high
                                  - name: /[Ll]ow/
                                  - name: /[Ss]tate/
                                  - entity_id: '*phone*'
                                  - entity_id: '*browser*'
                                  - entity_id: '*watch*'
                                  - entity_id: '*pad*'
                                  - entity_id: '*tablet*'
                                  - hidden_by: '*'
                              sort:
                                method: friendly_name
                                numeric: true
                                ignore_case: false
                                ip: false
                                reverse: false
                              show_empty: false
                      entity: sensor.smarti_active_low_battery_devices_count
                      card_mod:
                        style: |
                          ha-card {
                            background: radial-gradient(
                              circle at center,
                              rgba(0, 0, 0, 0.4) 0%,
                              rgba(0, 0, 0, 0.2) 10%,
                              rgba(0, 0, 0, 0) 40%
                            );
                            border-radius: 20px;
                            border: none
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            overflow: hidden;
                            position: relative;
                          }
                  - type: conditional
                    conditions:
                      - condition: state
                        entity: sensor.smarti_dynamic_power_sensor
                        state_not: unknown
                      - condition: state
                        entity: sensor.smarti_dynamic_power_sensor
                        state_not: unavailable
                      - condition: state
                        entity: input_boolean.smarti_show_energy_measurement
                        state_not: 'off'
                    card:
                      type: custom:mini-graph-card
                      entities:
                        - sensor.smarti_dynamic_power_sensor
                      show:
                        name: false
                        icon: true
                        legend: false
                        labels: false
                      icon: mdi:lightning-bolt
                      height: 50
                      color_thresholds:
                        - value: 3000
                          color: '#f39c12'
                        - value: 5000
                          color: '#d35400'
                        - value: 8000
                          color: '#c0392b'
                      hours_to_show: 6
                      points_per_hour: 10
                      align_icon: center
                      align_state: right
                      align_header: center
                      card_mod:
                        style: |
                          ha-card {
                            border: 2px solid var(--border-color);
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            background: transparent;
                            color: var(--primary-color); /* Ensures the text uses primary color */
                          }
                          ha-icon {
                            color: var(--primary-color); /* Sets the icon color */
                          }
                  - type: custom:gap-card
      - type: custom:button-card
        styles:
          card:
            - height: 5px
            - max-height: 10px
            - padding: 0
            - margin: 0
            - background-color: var(--primary-color);
        visibility:
          - condition: screen
            media_query: '(min-width: 768px)'
      - type: custom:mod-card
        card_mod:
          style:
            .: |
              ha-card {
                --ha-card-border-width: 0px;
                --ha-card-border-radius: 20px;
                background: linear-gradient(
                  to bottom right,
                  rgba(255, 255, 255, 0.15),
                  rgba(255, 255, 255, 0.05)
                );
                backdrop-filter: blur(15px);
                -webkit-backdrop-filter: blur(15px);
                box-shadow:
                  0 8px 32px 0 rgba(31, 38, 135, 0.37),
                  inset 0 0 0.5px rgba(255, 255, 255, 0.2); /* subtle inner glow */
                border: 5px solid rgba(255, 255, 255, 0.1);
                position: relative;
                overflow: hidden;
                border-radius: 10px 10px 20px 20px;
              }

              ha-card::before {
                content: '';
                position: absolute;
                top: -30%;
                left: -30%;
                width: 200%;
                height: 200%;
                background: radial-gradient(
                  circle at 30% 30%,
                  rgba(255, 255, 255, 0.3),
                  transparent 60%
                );
                transform: rotate(25deg);
                pointer-events: none;
              }
        card:
          type: horizontal-stack
          cards:
            - type: custom:button-card
              name: Home
              show_icon: true
              icon: mdi:home
              show_name: false
              styles:
                card:
                  - max-height: 50px
                  - justify-content: center
                  - align-items: center
                icon:
                  - color: black
                  - max-height: 30px
                  - max-width: 30px
                  - min-height: 30px
                  - min-width: 20px
                  - color: var(--primary-color)
                name:
                  - color: black
              tap_action:
                action: navigate
                navigation_path: home#
              card_mod:
                style: |
                  ha-card {
                    border-radius: 5px 5px 5px 15px;
                  }
            - type: conditional
              conditions:
                - entity: input_boolean.smarti_show_weather_tab
                  state: 'on'
              card:
                type: custom:button-card
                name: Rooms
                show_icon: true
                icon: mdi:weather-partly-cloudy
                show_name: false
                styles:
                  card:
                    - max-height: 50px
                    - justify-content: center
                    - align-items: center
                  icon:
                    - color: black
                    - max-height: 30px
                    - max-width: 30px
                    - min-height: 30px
                    - min-width: 20px
                    - color: var(--primary-color)
                  name:
                    - color: black
                tap_action:
                  action: navigate
                  navigation_path: rooms#
                card_mod:
                  style: |
                    ha-card {
                      border-radius: 5px 5px 5px 5px;
                    }
            - type: conditional
              conditions:
                - entity: input_boolean.smarti_show_light_tab
                  state: 'on'
              card:
                type: custom:button-card
                name: Light Control
                show_icon: true
                icon: mdi:lightbulb-group
                show_name: false
                styles:
                  card:
                    - max-height: 50px
                    - justify-content: center
                    - align-items: center
                  icon:
                    - color: black
                    - max-height: 30px
                    - max-width: 30px
                    - min-height: 30px
                    - min-width: 20px
                    - color: var(--primary-color)
                  name:
                    - color: black
                state:
                  - value: 'on'
                    styles:
                      card:
                        - background-color: '#FF7000'
                tap_action:
                  action: navigate
                  navigation_path: lights#
                card_mod:
                  style: |
                    ha-card {
                      border-radius: 5px 5px 5px 5px;   

                    }  
            - type: conditional
              conditions:
                - entity: input_boolean.smarti_show_climate_tab
                  state: 'on'
              card:
                type: custom:button-card
                name: Heating Control
                show_icon: true
                icon: mdi:thermometer-water
                show_name: false
                styles:
                  card:
                    - max-height: 50px
                    - justify-content: center
                    - align-items: center
                  icon:
                    - max-height: 30px
                    - max-width: 30px
                    - min-height: 30px
                    - min-width: 20px
                    - color: var(--primary-color)
                  name:
                    - color: black
                tap_action:
                  action: navigate
                  navigation_path: heating#
                card_mod:
                  style: |
                    ha-card {
                      border-radius: 5px 5px 5px 5px;      
                    }
            - type: conditional
              conditions:
                - entity: input_boolean.smarti_show_misc_tab
                  state: 'on'
              card:
                type: custom:button-card
                name: Multimedia
                show_icon: true
                icon: mdi:multimedia
                show_name: false
                styles:
                  card:
                    - max-height: 50px
                    - justify-content: center
                    - align-items: center
                  icon:
                    - color: black
                    - max-height: 30px
                    - max-width: 30px
                    - min-height: 30px
                    - min-width: 20px
                    - color: var(--primary-color)
                  name:
                    - color: black
                tap_action:
                  action: navigate
                  navigation_path: multimedia#
                card_mod:
                  style: |
                    ha-card {
                      border-radius: 5px 5px 5px 5px;    
                    }
            - type: conditional
              conditions:
                - entity: input_boolean.smarti_show_security_tab
                  state: 'on'
              card:
                type: custom:button-card
                name: Cameras
                show_icon: true
                icon: mdi:shield
                show_name: false
                styles:
                  card:
                    - max-height: 50px
                    - justify-content: center
                    - align-items: center
                  icon:
                    - max-height: 30px
                    - max-width: 30px
                    - min-height: 30px
                    - min-width: 20px
                  name:
                    - color: black
                tap_action:
                  action: navigate
                  navigation_path: cameras#
                card_mod:
                  style: |
                    ha-card {
                      border-radius: 5px 5px 5px 5px;
                      background-color: var(--primary-color);          
                    }
            - type: conditional
              conditions:
                - entity: input_boolean.smarti_show_energy_tab
                  state: 'on'
              card:
                type: custom:button-card
                name: Power Control
                show_icon: true
                icon: mdi:lightning-bolt
                show_name: false
                styles:
                  card:
                    - max-height: 50px
                    - justify-content: center
                    - align-items: center
                  icon:
                    - color: black
                    - max-height: 30px
                    - max-width: 30px
                    - min-height: 30px
                    - min-width: 20px
                    - color: var(--primary-color)
                  name:
                    - color: black
                tap_action:
                  action: navigate
                  navigation_path: power#
                card_mod:
                  style: |
                    ha-card {
                      border-radius: 5px 5px 5px 5px;    
                    }
            - type: custom:button-card
              name: Settings
              show_icon: true
              icon: mdi:cog
              show_name: false
              styles:
                card:
                  - max-height: 50px
                  - justify-content: center
                  - align-items: center
                icon:
                  - max-height: 30px
                  - max-width: 30px
                  - min-height: 30px
                  - min-width: 20px
                  - color: var(--primary-color)
                name:
                  - color: black
              tap_action:
                action: navigate
                navigation_path: settings2#
              card_mod:
                style: |
                  ha-card{
                    border-radius: 5px 5px 15px 5px;
                  }  
          visibility:
            - condition: screen
              media_query: '(min-width: 0px)'
      - type: custom:gap-card
        height: 25
        visibility:
          - condition: screen
            media_query: '(min-width: 0px) and (max-width: 767px)'
      - type: custom:mod-card
        card_mod:
          style:
            .: |
              ha-card {
                --ha-card-border-width: 0px;
                --ha-card-border-radius: 20px;
                --ha-card-background: transparent;
              }           
        card:
          type: horizontal-stack
          cards:
            - type: horizontal-stack
              cards:
                - type: vertical-stack
                  cards:
                    - type: custom:gap-card
                      height: 100
                    - type: custom:mushroom-title-card
                      title: null
                      subtitle: null
                      alignment: center
                    - type: custom:button-card
                      entity: binary_sensor.smarti_shell_protection
                      name: Smarti Shell Protection
                      show_state: true
                      show_icon: true
                      color_type: icon
                      state:
                        - value: 'on'
                          color: var(--primary-color)
                          icon: mdi:shield-check
                          label: Protected
                        - value: 'off'
                          color: var(--secondary-color)
                          icon: mdi:shield-alert
                          label: Not protected
                      styles:
                        card:
                          - padding: 10px
                          - border-radius: 10px
                          - font-size: 14px
                        icon:
                          - height: 80px
                          - width: 80px
                        name:
                          - font-size: 23px
                        state:
                          - font-size: 24px
                        label:
                          - font-size: 10px
                    - type: custom:gap-card
                - type: vertical-stack
                  cards:
                    - type: custom:gap-card
                    - type: custom:mushroom-title-card
                      title: >-
                        {{ states('sensor.smarti_dashboard_security_page_title')
                        }}
                      subtitle: >-
                        {{
                        states('sensor.smarti_dashboard_security_page_subtitle')
                        }}
                      alignment: center
                    - type: custom:lottie-card
                      animation: /local/smartianimations/securitylock.json
                      size: 120px
                      loop: true
                      autoplay: true
                    - type: custom:gap-card
                - type: vertical-stack
                  cards:
                    - type: custom:gap-card
                    - type: custom:mushroom-title-card
                      title: null
                      subtitle: >-
                        {{
                        states('sensor.smarti_dashboard_tabbed_card_security_cameras_tab_title')
                        }}
                      alignment: center
                    - type: custom:auto-entities
                      filter:
                        include:
                          - domain: camera
                            options:
                              type: picture-entity
                              camera_view: live
                              show_state: false
                              show_name: false
                      card:
                        type: custom:swipe-card
                        parameters:
                          effect: coverflow
                          loop: true
                          speed: 400
                      card_param: cards
                    - type: horizontal-stack
                      cards:
                        - type: custom:gap-card
                        - type: custom:button-card
                          icon: mdi:arrow-left-bold
                          styles:
                            card:
                              - height: 40px
                              - width: 40px
                              - display: flex
                              - align-items: center
                              - justify-content: center
                              - padding: 0
                              - background: transparent
                              - border-radius: 0px
                              - color: var(--primary-color)
                            icon:
                              - height: 20px
                              - width: 20px
                        - type: custom:button-card
                          icon: mdi:gesture-swipe-horizontal
                          styles:
                            card:
                              - height: 40px
                              - width: 40px
                              - display: flex
                              - align-items: center
                              - justify-content: center
                              - padding: 0
                              - background: transparent
                              - border-radius: 5px
                              - color: var(--primary-color)
                            icon:
                              - height: 20px
                              - width: 20px
                        - type: custom:button-card
                          icon: mdi:arrow-right-bold
                          styles:
                            card:
                              - height: 40px
                              - width: 40px
                              - display: flex
                              - align-items: center
                              - justify-content: center
                              - padding: 0
                              - background: transparent
                              - border-radius: 5px
                              - color: var(--primary-color)
                            icon:
                              - height: 20px
                              - width: 20px
                        - type: custom:gap-card
                    - type: custom:gap-card
        visibility:
          - condition: screen
            media_query: '(min-width: 768px)'
      - type: custom:gap-card
        height: 25
      - type: custom:button-card
        styles:
          card:
            - height: 5px
            - max-height: 10px
            - padding: 0
            - margin: 0
            - background-color: var(--primary-color);
        card_mod:
          style: |
            ha-card {
              border-radius: 1px;
              height: 2px;
              max-height: 2px;
              padding: 0;
              margin: 0;
              background: var(--primary-color);
            }
        visibility:
          - condition: screen
            media_query: '(min-width: 768px)'
      - type: custom:mod-card
        card_mod:
          style:
            .: |
              ha-card {
                --ha-card-border-width: 0px;
                --ha-card-border-radius: 20px;
                --ha-card-background: transparent;
              } 
            tabbed-card $:
              mwc-tab:
                $: |
                  .mdc-tab--active {
                    background: var(--primary-color) !important;
                    border-radius: 5px 5px 0px 0px;
                  }
        card:
          type: custom:tabbed-card
          tabs:
            - attributes:
                label: null
                icon: mdi:shield
              card:
                type: vertical-stack
                cards:
                  - type: vertical-stack
                    cards:
                      - type: horizontal-stack
                        cards:
                          - type: vertical-stack
                            cards:
                              - type: custom:gap-card
                              - type: custom:mushroom-title-card
                                title: >-
                                  {{
                                  states('sensor.SMARTi_Dashboard_Tabbed_Card_Alarm_Tab_Title')
                                  }}
                                subtitle: >-
                                  {{
                                  states('sensor.SMARTi_Dashboard_Tabbed_Card_Alarm_Tab_subTitle')
                                  }}
                                alignment: center
                          - type: vertical-stack
                            cards:
                              - type: custom:gap-card
                              - type: custom:lottie-card
                                animation: /local/smartianimations/alarm.json
                                size: 100px
                                loop: true
                                autoplay: true
                              - type: custom:gap-card
                      - type: custom:alarmo-card
                        entity: alarm_control_panel.alarmo
                        button_scale_keypad: 1.5
                        use_clear_icon: true
                        name: Alarm
                        button_scale_actions: 1.5
            - attributes:
                label: null
                icon: mdi:cctv
              card:
                type: custom:mod-card
                card_mod:
                  style:
                    .: |
                      ha-card {
                        --ha-card-border-radius: 20px;
                      }
                card:
                  type: vertical-stack
                  cards:
                    - type: horizontal-stack
                      cards:
                        - type: vertical-stack
                          cards:
                            - type: custom:gap-card
                            - type: custom:mushroom-title-card
                              title: >-
                                {{
                                states('sensor.SMARTi_Dashboard_Tabbed_Card_security_cameras_Tab_Title')
                                }}
                              subtitle: >-
                                {{
                                states('sensor.SMARTi_Dashboard_Tabbed_Card_security_cameras_Tab_subTitle')
                                }}
                              alignment: center
                        - type: vertical-stack
                          cards:
                            - type: custom:gap-card
                            - type: custom:lottie-card
                              animation: /local/smartianimations/cctv.json
                              size: 100px
                              loop: true
                              autoplay: true
                            - type: custom:gap-card
                    - type: custom:auto-entities
                      filter:
                        include:
                          - domain: camera
                            options:
                              type: picture-entity
                              camera_view: live
                              show_state: false
                              show_name: false
                      card:
                        type: grid
                        square: false
                        columns: 1
                        card_mod: null
                        style: null
                      card_param: cards
                      sort:
                        method: name
            - attributes:
                label: null
                icon: mdi:door-closed
              card:
                type: vertical-stack
                cards:
                  - type: horizontal-stack
                    cards:
                      - type: vertical-stack
                        cards:
                          - type: custom:gap-card
                          - type: custom:mushroom-title-card
                            title: >-
                              {{
                              states('sensor.SMARTi_Dashboard_Tabbed_Card_doors_and_windows_Tab_Title')
                              }}
                            subtitle: >-
                              {{
                              states('sensor.SMARTi_Dashboard_Tabbed_Card_doors_and_windows_Tab_subTitle')
                              }}
                            alignment: center
                      - type: vertical-stack
                        cards:
                          - type: custom:gap-card
                          - type: custom:lottie-card
                            animation: /local/smartianimations/door.json
                            size: 100px
                            loop: true
                            autoplay: true
                          - type: custom:gap-card
                  - type: custom:mod-card
                    card:
                      type: custom:auto-entities
                      card:
                        type: vertical-stack
                      card_param: cards
                      filter:
                        template: >-
                          {% set area_filter = ['area1', 'area2'] %} {% set
                          door_filter = ['binary_sensor.door_sensor_1',
                          'binary_sensor.door_sensor_2'] %} {% set window_filter
                          = ['binary_sensor.window_sensor_1',
                          'binary_sensor.window_sensor_2'] %} {% set
                          excluded_entities = door_filter + window_filter %}

                          {% set visible_sensors = states.binary_sensor
                            | selectattr('attributes.device_class', 'in', ['door', 'window'])
                            | rejectattr('entity_id', 'in', excluded_entities)
                            | rejectattr('attributes.hidden_by', 'defined')
                            | list %}

                          {% set areas = visible_sensors
                            | map(attribute='entity_id')
                            | map('area_name')
                            | reject('none')
                            | reject('in', area_filter)
                            | unique
                            | sort %}

                          {% if areas | length == 0 %}
                            [
                              {
                                "type": "custom:button-text-card",
                                "title": "[[[ return states['sensor.smarti_dashboard_tabbed_card_alarm_tab_missing_title']?.state || 'No title found'; ]]]",
                                "subtitle": "[[[ return states['sensor.smarti_dashboard_tabbed_card_alarm_tab_missing_subtitle']?.state || 'No subtitle found'; ]]]",
                                "icon": "mdi:chat-question",
                                "background_color": "var(--primary-color)"
                              }
                            ]
                          {% else %}
                            [
                              {% for area in areas %}
                                {
                                  "type": "custom:button-card",
                                  "styles": {
                                    "card": [
                                      { "height": "5px" },
                                      { "max-height": "10px" },
                                      { "padding": "0" },
                                      { "margin": "0" },
                                      { "background-color": "var(--primary-color)" }
                                    ]
                                  }
                                },
                                {
                                  "type": "custom:button-text-card",
                                  "title": "{{ area }}",
                                  "icon": "mdi:door-open",
                                  "background_color": "var(--primary-color)"
                                },
                                {
                                  "type": "custom:auto-entities",
                                  "card": {
                                    "type": "custom:layout-card",
                                    "layout_type": "grid",
                                    "layout": {
                                      "grid-template-columns": "repeat(auto-fit, minmax(200px, 1fr))",
                                      "grid-gap": "0px"
                                    }
                                  },
                                  "card_param": "cards",
                                  "filter": {
                                    "include": [
                                      {% for sensor in visible_sensors
                                          | selectattr('entity_id', 'in', area_entities(area))
                                          | sort(attribute='name') %}
                                      {
                                        "entity_id": "{{ sensor.entity_id }}",
                                        "options": {
                                          "type": "custom:mushroom-entity-card",
                                          "entity": "{{ sensor.entity_id }}"
                                        }
                                      }{% if not loop.last %},{% endif %}
                                      {% endfor %}
                                    ],
                                    "exclude": [
                                      { "entity_id": {{ excluded_entities | tojson }} },
                                      { "hidden_by": "*" }
                                    ]
                                  }
                                }
                                {% if not loop.last %},{% endif %}
                              {% endfor %}
                            ]
                          {% endif %}
            - attributes:
                label: null
                icon: mdi:lock
              card:
                type: vertical-stack
                cards:
                  - type: horizontal-stack
                    cards:
                      - type: vertical-stack
                        cards:
                          - type: custom:gap-card
                          - type: custom:mushroom-title-card
                            title: >-
                              {{
                              states('sensor.SMARTi_Dashboard_Tabbed_Card_locks_Tab_Title')
                              }}
                            subtitle: >-
                              {{
                              states('sensor.SMARTi_Dashboard_Tabbed_Card_locks_Tab_subTitle')
                              }}
                            alignment: center
                      - type: vertical-stack
                        cards:
                          - type: custom:gap-card
                          - type: custom:lottie-card
                            animation: /local/smartianimations/security.json
                            size: 100px
                            loop: true
                            autoplay: true
                          - type: custom:gap-card
                  - type: custom:mod-card
                    card:
                      type: custom:auto-entities
                      card:
                        type: vertical-stack
                      card_param: cards
                      filter:
                        template: >-
                          {% set area_filter = ['area1', 'area2'] %} {% set
                          device_filter = ['binary_sensor.lock_sensor_1',
                          'binary_sensor.lock_sensor_2'] %}

                          {% set all_devices = states.binary_sensor
                            | selectattr('attributes.device_class', 'eq', 'lock')
                            | list
                            + states.lock
                            | list %}

                          {% set filtered_devices = all_devices
                            | rejectattr('entity_id', 'in', device_filter)
                            | rejectattr('attributes.hidden_by', 'defined')
                            | list %}

                          {% set areas = filtered_devices
                            | map(attribute='entity_id')
                            | map('area_name')
                            | reject('none')
                            | reject('in', area_filter)
                            | unique
                            | sort %}

                          {% if areas | length == 0 %}
                            [
                              {
                                "type": "custom:button-text-card",
                                "title": "[[[ return states['sensor.smarti_dashboard_tabbed_card_locks_tab_missing_title']?.state || 'No title found'; ]]]",
                                "subtitle": "[[[ return states['sensor.smarti_dashboard_tabbed_card_locks_tab_missing_subtitle']?.state || 'No subtitle found'; ]]]",
                                "icon": "mdi:chat-question",
                                "background_color": "var(--primary-color)"
                              }
                            ]
                          {% else %}
                            [
                              {% for area in areas %}
                                {
                                  "type": "custom:button-card",
                                  "styles": {
                                    "card": [
                                      { "height": "5px" },
                                      { "max-height": "10px" },
                                      { "padding": "0" },
                                      { "margin": "0" },
                                      { "background-color": "var(--primary-color)" }
                                    ]
                                  }
                                },
                                {
                                  "type": "custom:button-text-card",
                                  "title": "{{ area }}",
                                  "icon": "mdi:lock",
                                  "background_color": "var(--primary-color)"
                                },
                                {
                                  "type": "custom:auto-entities",
                                  "card": {
                                    "type": "custom:layout-card",
                                    "layout_type": "grid",
                                    "layout": {
                                      "grid-template-columns": "repeat(auto-fit, minmax(200px, 1fr))",
                                      "grid-gap": "0px"
                                    }
                                  },
                                  "card_param": "cards",
                                  "filter": {
                                    "include": [
                                      {% for device in filtered_devices
                                          | selectattr('entity_id', 'in', area_entities(area))
                                          | sort(attribute='name') %}
                                      {
                                        "entity_id": "{{ device.entity_id }}",
                                        "options": {
                                          "type": "custom:mushroom-lock-card",
                                          "entity": "{{ device.entity_id }}",
                                          "layout": "horizontal",
                                          "fill_container": "true",
                                          "primary_info": "name",
                                          "secondary_info": "state",
                                          "icon_type": "icon"

                                        }
                                      }{% if not loop.last %},{% endif %}
                                      {% endfor %}
                                    ],
                                    "exclude": [
                                      { "entity_id": {{ device_filter | tojson }} },
                                      { "hidden_by": "*" }
                                    ]
                                  }
                                }
                                {% if not loop.last %},{% endif %}
                              {% endfor %}
                            ]
                          {% endif %}
            - attributes:
                label: null
                icon: mdi:smoke-detector-variant
              card:
                type: vertical-stack
                cards:
                  - type: horizontal-stack
                    cards:
                      - type: vertical-stack
                        cards:
                          - type: custom:gap-card
                          - type: custom:mushroom-title-card
                            title: >-
                              {{
                              states('sensor.SMARTi_Dashboard_Tabbed_Card_smoke_and_gas_sensors_Tab_Title')
                              }}
                            subtitle: >-
                              {{
                              states('sensor.SMARTi_Dashboard_Tabbed_Card_smoke_and_gas_sensors_Tab_subTitle')
                              }}
                            alignment: center
                      - type: vertical-stack
                        cards:
                          - type: custom:gap-card
                          - type: custom:lottie-card
                            animation: /local/smartianimations/robotvaccum2.json
                            size: 100px
                            loop: true
                            autoplay: true
                          - type: custom:gap-card
                  - type: custom:mod-card
                    card:
                      type: custom:auto-entities
                      card:
                        type: vertical-stack
                      card_param: cards
                      filter:
                        template: |-
                          {% set smoke_sensors = states.binary_sensor
                            | selectattr('attributes.device_class', 'eq', 'smoke')
                            | rejectattr('attributes.hidden_by', 'defined')
                            | list %}
                          {% set gas_sensors = states.binary_sensor
                            | selectattr('attributes.device_class', 'eq', 'gas')
                            | rejectattr('attributes.hidden_by', 'defined')
                            | list %}
                          {% set all_sensors = smoke_sensors + gas_sensors %}
                          {% set areas = all_sensors
                            | map(attribute='entity_id')
                            | map('area_name')
                            | reject('none')
                            | unique
                            | sort %}

                          {% if areas | length == 0 %}
                            [
                              {
                                "type": "custom:button-text-card",
                                "title": "[[[ return states['sensor.smarti_dashboard_tabbed_card_smoke_and_gas_sensors_tab_missing_title']?.state || 'No title found'; ]]]",
                                "subtitle": "[[[ return states['sensor.smarti_dashboard_tabbed_card_smoke_and_gas_sensors_tab_missing_subtitle']?.state || 'No title found'; ]]]",
                                "icon": "mdi:chat-question",
                                "background_color": "var(--primary-color)"
                              }
                            ]
                          {% else %}
                            [
                              {% for area in areas %}
                                {
                                  "type": "custom:button-card",
                                  "styles": {
                                    "card": [
                                      { "height": "5px" },
                                      { "max-height": "10px" },
                                      { "padding": "0" },
                                      { "margin": "0" },
                                      { "background-color": "var(--primary-color)" }
                                    ]
                                  }
                                },
                                {
                                  "type": "custom:button-text-card",
                                  "title": "{{ area }}",
                                  "icon": "mdi:smoke-detector-variant",
                                  "background_color": "var(--primary-color)"
                                },
                                {
                                  "type": "custom:auto-entities",
                                  "card": {
                                    "type": "custom:layout-card",
                                    "layout_type": "grid",
                                    "layout": {
                                      "grid-template-columns": "repeat(auto-fit, minmax(200px, 1fr))",
                                      "grid-gap": "0px"
                                    }
                                  },
                                  "card_param": "cards",
                                  "filter": {
                                    "include": [
                                      {% for sensor in smoke_sensors
                                          | selectattr('entity_id', 'in', area_entities(area))
                                          | sort(attribute='name') %}
                                      {
                                        "entity_id": "{{ sensor.entity_id }}",
                                        "options": {
                                          "type": "custom:mushroom-entity-card",
                                          "entity": "{{ sensor.entity_id }}",
                                          "icon_color": "red",
                                          "primary_info": "name",
                                          "secondary_info": "state",
                                          "icon_type": "icon",
                                          "fill_container": "true",
                                          "layout": "horizontal"
                                        }
                                      }{% if not loop.last or gas_sensors | selectattr('entity_id', 'in', area_entities(area)) | list | count > 0 %},{% endif %}
                                      {% endfor %}
                                      {% for sensor in gas_sensors
                                          | selectattr('entity_id', 'in', area_entities(area))
                                          | sort(attribute='name') %}
                                      {
                                        "entity_id": "{{ sensor.entity_id }}",
                                        "options": {
                                          "type": "custom:mushroom-entity-card",
                                          "entity": "{{ sensor.entity_id }}",
                                          "icon_color": "blue",
                                          "primary_info": "name",
                                          "secondary_info": "state",
                                          "icon_type": "icon",
                                          "fill_container": "true",
                                          "layout": "horizontal"
                                        }
                                      }{% if not loop.last %},{% endif %}
                                      {% endfor %}
                                    ],
                                    "exclude": [
                                      { "hidden_by": "*" }
                                    ]
                                  }
                                }
                                {% if not loop.last %},{% endif %}
                              {% endfor %}
                            ]
                          {% endif %}
        visibility:
          - condition: screen
            media_query: '(min-width: 768px)'
    background:
      opacity: 100
      alignment: center
      size: cover
      repeat: no-repeat
      attachment: fixed
      transparency: 100
      image: /local/images/smarti_images/smarti_dashboard_backgorund_image.jpg
  - title: Energy
    path: power
    icon: mdi:lightning-bolt
    type: custom:horizontal-layout
    layout:
      max_width: 2000
      max_cols: 1
    subview: true
    cards:
      - type: horizontal-stack
        cards:
          - type: vertical-stack
            cards:
              - type: custom:lottie-card
                animation: /local/smartianimations/error.json
                size: 200px
                loop: true
                autoplay: true
              - type: markdown
                content: >
                  **SMARTi Basic** is not supported on mobile devices.   To
                  enable this feature, please visit  
                  [https://www.smarti.dev](https://www.smarti.dev/smarti-store/p/smarti-powerflow-xe7ft)
                  to purchase and upgrade to the Pro version.
                style: |
                  ha-card {
                    background: rgba(0, 0, 0, 0.5); /* Slightly transparent background */
                    color: white;
                    text-align: center;
                    font-size: 1.2em;
                    padding: 20px;
                    border-radius: 10px;
                  }   
              - type: custom:mushroom-chips-card
                chips:
                  - type: spacer
                  - type: back
                  - type: menu
                  - type: spacer
        visibility:
          - condition: screen
            media_query: '(min-width: 0px) and (max-width: 767px)'
      - type: custom:mod-card
        card_mod:
          style:
            .: |
              ha-card {
                --ha-card-border-width: 0px;
                --ha-card-border-radius: 20px;
                background: linear-gradient(
                  to bottom right,
                  rgba(255, 255, 255, 0.15),
                  rgba(255, 255, 255, 0.05)
                );
                backdrop-filter: blur(15px);
                -webkit-backdrop-filter: blur(15px);
                box-shadow:
                  0 8px 32px 0 rgba(31, 38, 135, 0.37),
                  inset 0 0 0.5px rgba(255, 255, 255, 0.2); /* subtle inner glow */
                border: 5px solid rgba(255, 255, 255, 0.1);
                position: relative;
                overflow: hidden;
                border-radius: 100px 100px 10px 10px;
              }

              ha-card::before {
                content: '';
                position: absolute;
                top: -30%;
                left: -30%;
                width: 200%;
                height: 200%;
                background: radial-gradient(
                  circle at 30% 30%,
                  rgba(255, 255, 255, 0.3),
                  transparent 60%
                );
                transform: rotate(25deg);
                pointer-events: none;
              }
        card:
          type: conditional
          conditions:
            - condition: screen
              media_query: '(min-width: 768px)'
          card:
            type: vertical-stack
            cards:
              - type: horizontal-stack
                cards:
                  - type: custom:gap-card
                  - type: conditional
                    conditions:
                      - condition: or
                        conditions:
                          - entity: binary_sensor.smarti_internet
                            state: unavailable
                          - entity: binary_sensor.smarti_internet
                            state: unknown
                          - entity: sensor.browser_mod_installed
                            state_not: 'True'
                          - entity: alarm_control_panel.alarmo
                            state: unavailable
                          - entity: alarm_control_panel.alarmo
                            state: unknown
                          - entity: weather.forecast_home
                            state: unavailable
                          - entity: weather.forecast_home
                            state: unknown
                    card:
                      type: custom:button-card
                      name: ⚠️ Setup Required
                      icon: mdi:alert-circle
                      show_state: false
                      show_icon: true
                      show_name: true
                      tap_action:
                        action: navigate
                        navigation_path: /smarti-dashboard/settings3
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                          - divider-color: transparent
                        icon:
                          - color: red
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      card_mod:
                        style: |
                          ha-card {
                            border: 2px solid var(--border-color);
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                          }
                  - type: conditional
                    conditions:
                      - entity: alarm_control_panel.alarmo
                        state_not: unavailable
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_alarm'].state ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - font-size: 3em
                          - color: var(--primary-color)
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: more-info
                        entity: alarm_control_panel.alarmo
                      entity: alarm_control_panel.alarmo
                      card_mod:
                        style: |
                          ha-card {
                            background: radial-gradient(
                              circle at center,
                              rgba(0, 0, 0, 0.4) 0%,
                              rgba(0, 0, 0, 0.2) 10%,
                              rgba(0, 0, 0, 0) 40%
                            );
                            border-radius: 20px;
                            border: none
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            overflow: hidden;
                            position: relative;
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        entity: sensor.smarti_active_locks
                        above: 0
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_tabbed_card_locks_tab_title'].state
                        ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                          - animation: >
                              [[[ return
                              parseInt(states['sensor.smarti_active_locks'].state)
                              > 0 ? 'blink-red 1.5s infinite' : 'none'; ]]]
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              card:
                                type: entities
                              filter:
                                include:
                                  - domain: lock
                                    state: unlocked
                                  - domain: binary_sensor
                                    attributes:
                                      device_class: lock
                                    state: 'on'
                                exclude:
                                  - hidden_by: '*'
                              sort:
                                reverse: true
                      entity: sensor.smarti_active_locks
                      card_mod:
                        style: |
                          ha-card {
                            border: 2px solid var(--border-color);
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                          }

                          @keyframes blink-red {
                            0% {
                              color: var(--accent-color);
                            }
                            50% {
                              color: var(--primary-color);
                            }
                            100% {
                              color: var(--accent-color);
                            }
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        entity: sensor.smarti_active_motion_sensors
                        above: 0
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_motion'].state
                        ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              card:
                                type: entities
                              filter:
                                include:
                                  - domain: binary_sensor
                                    attributes:
                                      device_class: motion
                                    state: 'on'
                                exclude:
                                  - hidden_by: '*'
                              sort:
                                reverse: true
                      entity: sensor.smarti_active_motion_sensors
                      card_mod:
                        style: |
                          ha-card {
                            background: radial-gradient(
                              circle at center,
                              rgba(0, 0, 0, 0.4) 0%,
                              rgba(0, 0, 0, 0.2) 10%,
                              rgba(0, 0, 0, 0) 40%
                            );
                            border-radius: 20px;
                            border: none
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            overflow: hidden;
                            position: relative;
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        above: 0
                        entity: sensor.smarti_active_lights
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_lights'].state
                        ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              show_empty: false
                              card:
                                show_name: true
                                show_icon: true
                                show_state: true
                                type: glance
                                state_color: true
                                columns: 4
                              filter:
                                include:
                                  - domain: light
                                    state: 'on'
                                    options:
                                      tap_action:
                                        action: toggle
                                exclude:
                                  - hidden_by: '*'
                              sort:
                                method: none
                                reverse: false
                                numeric: false
                      entity: sensor.smarti_active_lights
                      card_mod:
                        style: |
                          ha-card {
                            background: radial-gradient(
                              circle at center,
                              rgba(0, 0, 0, 0.4) 0%,
                              rgba(0, 0, 0, 0.2) 10%,
                              rgba(0, 0, 0, 0) 40%
                            );
                            border-radius: 20px;
                            border: none
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            overflow: hidden;
                            position: relative;
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        above: 0
                        entity: sensor.smarti_active_doors
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_doors'].state ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              card:
                                type: entities
                              filter:
                                include:
                                  - domain: binary_sensor
                                    attributes:
                                      device_class: door
                                    state: 'on'
                                exclude:
                                  - hidden_by: '*'
                              sort:
                                reverse: true
                      entity: sensor.smarti_active_doors
                      card_mod:
                        style: |
                          ha-card {
                            background: radial-gradient(
                              circle at center,
                              rgba(0, 0, 0, 0.4) 0%,
                              rgba(0, 0, 0, 0.2) 10%,
                              rgba(0, 0, 0, 0) 40%
                            );
                            border-radius: 20px;
                            border: none
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            overflow: hidden;
                            position: relative;
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        entity: sensor.smarti_active_windows
                        above: 0
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_windows'].state
                        ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)'
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              card:
                                type: entities
                              filter:
                                include:
                                  - domain: binary_sensor
                                    attributes:
                                      device_class: window
                                    state: 'on'
                                exclude:
                                  - hidden_by: '*'
                              sort:
                                reverse: true
                      entity: sensor.smarti_active_windows
                      card_mod:
                        style: |
                          ha-card {
                            background: radial-gradient(
                              circle at center,
                              rgba(0, 0, 0, 0.4) 0%,
                              rgba(0, 0, 0, 0.2) 10%,
                              rgba(0, 0, 0, 0) 40%
                            );
                            border-radius: 20px;
                            border: none
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            overflow: hidden;
                            position: relative;
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        above: 0
                        entity: sensor.smarti_active_water_sensors
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_water'].state ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              card:
                                type: entities
                              filter:
                                include:
                                  - domain: binary_sensor
                                    attributes:
                                      device_class: moisture
                                    state: 'on'
                                exclude:
                                  - hidden_by: '*'
                              sort:
                                reverse: true
                      entity: sensor.smarti_active_water_sensors
                      card_mod:
                        style: |
                          ha-card {
                            border: 2px solid var(--border-color);
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        entity: sensor.smarti_active_smoke_detectors
                        above: 0
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_smoke'].state ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              card:
                                type: entities
                              filter:
                                include:
                                  - domain: binary_sensor
                                    attributes:
                                      device_class: smoke
                                    state: 'on'
                                exclude:
                                  - hidden_by: '*'
                              sort:
                                reverse: true
                      entity: sensor.smarti_active_smoke_detectors
                      card_mod:
                        style: |
                          ha-card {
                            background: radial-gradient(
                              circle at center,
                              rgba(0, 0, 0, 0.4) 0%,
                              rgba(0, 0, 0, 0.2) 10%,
                              rgba(0, 0, 0, 0) 40%
                            );
                            border-radius: 20px;
                            border: none
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            overflow: hidden;
                            position: relative;
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        above: 0
                        entity: sensor.smarti_active_gas_sensors
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_gas'].state ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              card:
                                type: entities
                              filter:
                                include:
                                  - domain: binary_sensor
                                    attributes:
                                      device_class: gas
                                    state: 'on'
                                exclude:
                                  - hidden_by: '*'
                              sort:
                                reverse: true
                      entity: sensor.smarti_active_gas_sensors
                      card_mod:
                        style: |
                          ha-card {
                            background: radial-gradient(
                              circle at center,
                              rgba(0, 0, 0, 0.4) 0%,
                              rgba(0, 0, 0, 0.2) 10%,
                              rgba(0, 0, 0, 0) 40%
                            );
                            border-radius: 20px;
                            border: none
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            overflow: hidden;
                            position: relative;
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        above: 0
                        entity: sensor.smarti_active_low_battery_devices_count
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_batteries'].state
                        ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              card:
                                show_header_toggle: false
                                type: entities
                                state_color: true
                              filter:
                                include:
                                  - entity_id: sensor.*_battery
                                  - entity_id: binary_sensor.*battery_low
                                  - entity_id: sensor.*.battery_state
                                exclude:
                                  - state: unavailable
                                  - state: '-'
                                  - state: unknown
                                  - state: none
                                  - state: medium
                                  - state: high
                                  - state: '= 0,0'
                                  - state: '>= 20'
                                  - state: 'off'
                                  - entity_id: sensor.campainha_ring_mqtt_battery
                                  - entity_id: sensor.campainha_battery
                                  - state: None
                                  - state: charging
                                  - state: discharging
                                  - state: high
                                  - name: /[Ll]ow/
                                  - name: /[Ss]tate/
                                  - entity_id: '*phone*'
                                  - entity_id: '*browser*'
                                  - entity_id: '*watch*'
                                  - entity_id: '*pad*'
                                  - entity_id: '*tablet*'
                                  - hidden_by: '*'
                              sort:
                                method: friendly_name
                                numeric: true
                                ignore_case: false
                                ip: false
                                reverse: false
                              show_empty: false
                      entity: sensor.smarti_active_low_battery_devices_count
                      card_mod:
                        style: |
                          ha-card {
                            background: radial-gradient(
                              circle at center,
                              rgba(0, 0, 0, 0.4) 0%,
                              rgba(0, 0, 0, 0.2) 10%,
                              rgba(0, 0, 0, 0) 40%
                            );
                            border-radius: 20px;
                            border: none
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            overflow: hidden;
                            position: relative;
                          }
                  - type: conditional
                    conditions:
                      - condition: state
                        entity: sensor.smarti_dynamic_power_sensor
                        state_not: unknown
                      - condition: state
                        entity: sensor.smarti_dynamic_power_sensor
                        state_not: unavailable
                      - condition: state
                        entity: input_boolean.smarti_show_energy_measurement
                        state_not: 'off'
                    card:
                      type: custom:mini-graph-card
                      entities:
                        - sensor.smarti_dynamic_power_sensor
                      show:
                        name: false
                        icon: true
                        legend: false
                        labels: false
                      icon: mdi:lightning-bolt
                      height: 50
                      color_thresholds:
                        - value: 3000
                          color: '#f39c12'
                        - value: 5000
                          color: '#d35400'
                        - value: 8000
                          color: '#c0392b'
                      hours_to_show: 6
                      points_per_hour: 10
                      align_icon: center
                      align_state: right
                      align_header: center
                      card_mod:
                        style: |
                          ha-card {
                            border: 2px solid var(--border-color);
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            background: transparent;
                            color: var(--primary-color); /* Ensures the text uses primary color */
                          }
                          ha-icon {
                            color: var(--primary-color); /* Sets the icon color */
                          }
                  - type: custom:gap-card
      - type: custom:button-card
        styles:
          card:
            - height: 5px
            - max-height: 10px
            - padding: 0
            - margin: 0
            - background-color: var(--primary-color);
        card_mod:
          style: |
            ha-card {
              border-radius: 1px;
              height: 2px;
              max-height: 2px;
              padding: 0;
              margin: 0;
              background: var(--primary-color);
            }
        visibility:
          - condition: screen
            media_query: '(min-width: 768px)'
      - type: custom:mod-card
        card_mod:
          style:
            .: |
              ha-card {
                --ha-card-border-width: 0px;
                --ha-card-border-radius: 20px;
                background: linear-gradient(
                  to bottom right,
                  rgba(255, 255, 255, 0.15),
                  rgba(255, 255, 255, 0.05)
                );
                backdrop-filter: blur(15px);
                -webkit-backdrop-filter: blur(15px);
                box-shadow:
                  0 8px 32px 0 rgba(31, 38, 135, 0.37),
                  inset 0 0 0.5px rgba(255, 255, 255, 0.2); /* subtle inner glow */
                border: 5px solid rgba(255, 255, 255, 0.1);
                position: relative;
                overflow: hidden;
                border-radius: 10px 10px 20px 20px;
              }

              ha-card::before {
                content: '';
                position: absolute;
                top: -30%;
                left: -30%;
                width: 200%;
                height: 200%;
                background: radial-gradient(
                  circle at 30% 30%,
                  rgba(255, 255, 255, 0.3),
                  transparent 60%
                );
                transform: rotate(25deg);
                pointer-events: none;
              }
        card:
          type: horizontal-stack
          cards:
            - type: custom:button-card
              name: Home
              show_icon: true
              icon: mdi:home
              show_name: false
              styles:
                card:
                  - max-height: 50px
                  - justify-content: center
                  - align-items: center
                icon:
                  - color: black
                  - max-height: 30px
                  - max-width: 30px
                  - min-height: 30px
                  - min-width: 20px
                  - color: var(--primary-color)
                name:
                  - color: black
              tap_action:
                action: navigate
                navigation_path: home#
              card_mod:
                style: |
                  ha-card {
                    border-radius: 5px 5px 5px 15px;
                  }
            - type: conditional
              conditions:
                - entity: input_boolean.smarti_show_weather_tab
                  state: 'on'
              card:
                type: custom:button-card
                name: Rooms
                show_icon: true
                icon: mdi:weather-partly-cloudy
                show_name: false
                styles:
                  card:
                    - max-height: 50px
                    - justify-content: center
                    - align-items: center
                  icon:
                    - color: black
                    - max-height: 30px
                    - max-width: 30px
                    - min-height: 30px
                    - min-width: 20px
                    - color: var(--primary-color)
                  name:
                    - color: black
                tap_action:
                  action: navigate
                  navigation_path: rooms#
                card_mod:
                  style: |
                    ha-card {
                      border-radius: 5px 5px 5px 5px;
                    }
            - type: conditional
              conditions:
                - entity: input_boolean.smarti_show_light_tab
                  state: 'on'
              card:
                type: custom:button-card
                name: Light Control
                show_icon: true
                icon: mdi:lightbulb-group
                show_name: false
                styles:
                  card:
                    - max-height: 50px
                    - justify-content: center
                    - align-items: center
                  icon:
                    - color: black
                    - max-height: 30px
                    - max-width: 30px
                    - min-height: 30px
                    - min-width: 20px
                    - color: var(--primary-color)
                  name:
                    - color: black
                state:
                  - value: 'on'
                    styles:
                      card:
                        - background-color: '#FF7000'
                tap_action:
                  action: navigate
                  navigation_path: lights#
                card_mod:
                  style: |
                    ha-card {
                      border-radius: 5px 5px 5px 5px;   

                    }  
            - type: conditional
              conditions:
                - entity: input_boolean.smarti_show_climate_tab
                  state: 'on'
              card:
                type: custom:button-card
                name: Heating Control
                show_icon: true
                icon: mdi:thermometer-water
                show_name: false
                styles:
                  card:
                    - max-height: 50px
                    - justify-content: center
                    - align-items: center
                  icon:
                    - max-height: 30px
                    - max-width: 30px
                    - min-height: 30px
                    - min-width: 20px
                    - color: var(--primary-color)
                  name:
                    - color: black
                tap_action:
                  action: navigate
                  navigation_path: heating#
                card_mod:
                  style: |
                    ha-card {
                      border-radius: 5px 5px 5px 5px;      
                    }
            - type: conditional
              conditions:
                - entity: input_boolean.smarti_show_misc_tab
                  state: 'on'
              card:
                type: custom:button-card
                name: Multimedia
                show_icon: true
                icon: mdi:multimedia
                show_name: false
                styles:
                  card:
                    - max-height: 50px
                    - justify-content: center
                    - align-items: center
                  icon:
                    - color: black
                    - max-height: 30px
                    - max-width: 30px
                    - min-height: 30px
                    - min-width: 20px
                    - color: var(--primary-color)
                  name:
                    - color: black
                tap_action:
                  action: navigate
                  navigation_path: multimedia#
                card_mod:
                  style: |
                    ha-card {
                      border-radius: 5px 5px 5px 5px;    
                    }
            - type: conditional
              conditions:
                - entity: input_boolean.smarti_show_security_tab
                  state: 'on'
              card:
                type: custom:button-card
                name: Cameras
                show_icon: true
                icon: mdi:shield
                show_name: false
                styles:
                  card:
                    - max-height: 50px
                    - justify-content: center
                    - align-items: center
                  icon:
                    - max-height: 30px
                    - max-width: 30px
                    - min-height: 30px
                    - min-width: 20px
                    - color: var(--primary-color)
                  name:
                    - color: black
                tap_action:
                  action: navigate
                  navigation_path: cameras#
                card_mod:
                  style: |
                    ha-card {
                      border-radius: 5px 5px 5px 5px;          
                    }
            - type: conditional
              conditions:
                - entity: input_boolean.smarti_show_energy_tab
                  state: 'on'
              card:
                type: custom:button-card
                name: Power Control
                show_icon: true
                icon: mdi:lightning-bolt
                show_name: false
                styles:
                  card:
                    - max-height: 50px
                    - justify-content: center
                    - align-items: center
                  icon:
                    - max-height: 30px
                    - max-width: 30px
                    - min-height: 30px
                    - min-width: 20px
                  name:
                    - color: black
                tap_action:
                  action: navigate
                  navigation_path: power#
                card_mod:
                  style: |
                    ha-card {
                      border-radius: 5px 5px 5px 5px;
                      background-color: var(--primary-color);          
                    }
            - type: custom:button-card
              name: Settings
              show_icon: true
              icon: mdi:cog
              show_name: false
              styles:
                card:
                  - max-height: 50px
                  - justify-content: center
                  - align-items: center
                icon:
                  - max-height: 30px
                  - max-width: 30px
                  - min-height: 30px
                  - min-width: 20px
                  - color: var(--primary-color)
                name:
                  - color: black
              tap_action:
                action: navigate
                navigation_path: settings2#
              card_mod:
                style: |
                  ha-card{
                    border-radius: 5px 5px 15px 5px;
                  }  
          visibility:
            - condition: screen
              media_query: '(min-width: 0px)'
      - type: custom:gap-card
        height: 25
        visibility:
          - condition: screen
            media_query: '(min-width: 0px) and (max-width: 767px)'
      - type: custom:mod-card
        card_mod:
          style:
            .: |
              ha-card {
                --ha-card-border-width: 0px;
                --ha-card-border-radius: 20px;
                --ha-card-background: transparent;
              }           
        card:
          type: horizontal-stack
          cards:
            - type: horizontal-stack
              cards:
                - type: vertical-stack
                  cards:
                    - type: custom:gap-card
                      height: 100
                    - type: custom:gap-card
                - type: vertical-stack
                  cards:
                    - type: custom:gap-card
                    - type: custom:mushroom-title-card
                      title: >-
                        {{ states('sensor.smarti_dashboard_energy_page_title')
                        }}
                      subtitle: >-
                        {{
                        states('sensor.smarti_dashboard_energy_page_subtitle')
                        }}
                      alignment: center
                    - type: custom:lottie-card
                      animation: /local/smartianimations/energy.json
                      size: 100px
                      loop: true
                      autoplay: true
                    - type: custom:gap-card
                - type: vertical-stack
                  cards:
                    - type: custom:gap-card
                    - type: custom:gap-card
        visibility:
          - condition: screen
            media_query: '(min-width: 768px)'
      - type: custom:button-card
        styles:
          card:
            - height: 5px
            - max-height: 10px
            - padding: 0
            - margin: 0
            - background-color: var(--primary-color);
        card_mod:
          style: |
            ha-card {
              border-radius: 1px;
              height: 2px;
              max-height: 2px;
              padding: 0;
              margin: 0;
              background: var(--primary-color);
            }
        visibility:
          - condition: screen
            media_query: '(min-width: 768px)'
      - type: custom:gap-card
        height: 25
      - type: horizontal-stack
        cards:
          - type: custom:gap-card
          - type: custom:mod-card
            card_mod:
              style:
                .: |
                  ha-card {
                    --ha-card-border-width: 0px;
                    --ha-card-border-radius: 20px;
                    --ha-card-background: transparent;
                  } 
                tabbed-card $:
                  mwc-tab:
                    $: |
                      .mdc-tab--active {
                        background: linear-gradient(to left, var(--accent-color), rgb(var(--rgb-primary-color-darker))) !important;
                        border-radius: 5px 5px 0px 0px;
                      }
            card:
              type: energy-date-selection
              card_mod:
                style:
                  .: |
                    ha-card {
                      display: flex;
                      justify-content: center;
                      align-items: center;
                      flex-direction: column;
                    }
          - type: custom:gap-card
        visibility:
          - condition: screen
            media_query: '(min-width: 768px)'
      - type: custom:mod-card
        card_mod:
          style:
            .: |
              ha-card {
                --ha-card-border-width: 0px;
                --ha-card-border-radius: 20px;
                --ha-card-background: transparent;
              } 
            tabbed-card $:
              mwc-tab:
                $: |
                  .mdc-tab--active {
                    background: var(--primary-color) !important;
                    border-radius: 5px 5px 0px 0px;
                  }
        card:
          type: custom:tabbed-card
          tabs:
            - attributes:
                label: null
                icon: mdi:lightning-bolt
              card:
                type: vertical-stack
                cards:
                  - type: energy-distribution
                    link_dashboard: false
            - attributes:
                label: null
                icon: mdi:autorenew
              card:
                type: vertical-stack
                cards:
                  - type: vertical-stack
                    cards:
                      - type: energy-devices-detail-graph
                        max_devices: 10
                        card: null
                      - type: horizontal-stack
                        cards:
                          - height: 200
                            unit_prefix: k
                            round: 1
                            min_box_height: 5
                            min_box_distance: 5
                            show_states: true
                            show_units: true
                            energy_date_selection: true
                            sections: []
                            type: custom:sankey-chart
                            autoconfig:
                              print_yaml: false
                            min_state: 0
                            wide: true
                            show_names: true
                            show_icons: false
        visibility:
          - condition: screen
            media_query: '(min-width: 768px)'
      - type: custom:mod-card
        card_mod:
          style:
            .: |
              ha-card {
                --ha-card-border-width: 0px;
                --ha-card-border-radius: 20px;
                --ha-card-background: transparent;
              } 
            tabbed-card $:
              mwc-tab:
                $: |
                  .mdc-tab--active {
                    background: var(--primary-color) !important;
                    border-radius: 5px 5px 0px 0px;
                  }
        card:
          type: custom:tabbed-card
          tabs:
            - attributes:
                label: null
                icon: mdi:lightning-bolt
              card:
                type: energy-usage-graph
            - attributes:
                label: null
                icon: mdi:solar-power-variant
              card:
                type: custom:mod-card
                card_mod:
                  style:
                    .: |
                      ha-card {
                        --ha-card-border-radius: 20px;
                      }
                card:
                  type: energy-solar-graph
            - attributes:
                label: null
                icon: mdi:gas-cylinder
              card:
                type: custom:mod-card
                card:
                  type: energy-gas-graph
            - attributes:
                label: null
                icon: mdi:water
              card:
                type: custom:mod-card
                card_mod:
                  style:
                    .: |
                      ha-card {
                        --ha-card-border-width: 0;
                        --ha-card-border-radius: 20px;
                      }
                card:
                  type: energy-water-graph
        visibility:
          - condition: screen
            media_query: '(min-width: 768px)'
      - type: custom:mod-card
        card_mod:
          style:
            .: |
              ha-card {
                --ha-card-border-width: 0px;
                --ha-card-border-radius: 20px;
                --ha-card-background: transparent;
              } 
            tabbed-card $:
              mwc-tab:
                $: |
                  .mdc-tab--active {
                    background: linear-gradient(to left, var(--accent-color), rgb(var(--rgb-primary-color-darker))) !important;
                    border-radius: 5px 5px 0px 0px;
                  }
        card:
          type: custom:mini-graph-card
          name: null
          entities:
            - sensor.smarti_dynamic_power_sensor
          points_per_hour: 10
          line_width: 1
          height: 60
          show:
            labels: true
            fill: true
            average: true
            extrema: true
          color_thresholds:
            - value: 2000
              color: '#f39c12'
            - value: 4000
              color: '#d35400'
            - value: 8000
              color: '#c0392b'
        visibility:
          - condition: screen
            media_query: '(min-width: 768px)'
    background:
      opacity: 100
      alignment: center
      size: cover
      repeat: no-repeat
      attachment: fixed
      image: /local/images/smarti_images/smarti_dashboard_backgorund_image.jpg
  - title: Actions
    path: settings2
    icon: mdi:cog
    type: custom:masonry-layout
    layout:
      max_width: 2000
      max_cols: 1
    subview: true
    cards:
      - type: horizontal-stack
        cards:
          - type: vertical-stack
            cards:
              - type: custom:lottie-card
                animation: /local/smartianimations/error.json
                size: 200px
                loop: true
                autoplay: true
              - type: markdown
                content: >
                  **SMARTi Basic** is not supported on mobile devices.   To
                  enable this feature, please visit  
                  [https://www.smarti.dev](https://www.smarti.dev/smarti-store/p/smarti-powerflow-xe7ft)
                  to purchase and upgrade to the Pro version.
                style: |
                  ha-card {
                    background: rgba(0, 0, 0, 0.5); /* Slightly transparent background */
                    color: white;
                    text-align: center;
                    font-size: 1.2em;
                    padding: 20px;
                    border-radius: 10px;
                  }   
              - type: custom:mushroom-chips-card
                chips:
                  - type: spacer
                  - type: back
                  - type: menu
                  - type: spacer
        visibility:
          - condition: screen
            media_query: '(min-width: 0px) and (max-width: 767px)'
      - type: custom:mod-card
        card_mod:
          style:
            .: |
              ha-card {
                --ha-card-border-width: 0px;
                --ha-card-border-radius: 20px;
                background: linear-gradient(
                  to bottom right,
                  rgba(255, 255, 255, 0.15),
                  rgba(255, 255, 255, 0.05)
                );
                backdrop-filter: blur(15px);
                -webkit-backdrop-filter: blur(15px);
                box-shadow:
                  0 8px 32px 0 rgba(31, 38, 135, 0.37),
                  inset 0 0 0.5px rgba(255, 255, 255, 0.2); /* subtle inner glow */
                border: 5px solid rgba(255, 255, 255, 0.1);
                position: relative;
                overflow: hidden;
                border-radius: 100px 100px 10px 10px;
              }

              ha-card::before {
                content: '';
                position: absolute;
                top: -30%;
                left: -30%;
                width: 200%;
                height: 200%;
                background: radial-gradient(
                  circle at 30% 30%,
                  rgba(255, 255, 255, 0.3),
                  transparent 60%
                );
                transform: rotate(25deg);
                pointer-events: none;
              }
        card:
          type: conditional
          conditions:
            - condition: screen
              media_query: '(min-width: 768px)'
          card:
            type: vertical-stack
            cards:
              - type: horizontal-stack
                cards:
                  - type: custom:gap-card
                  - type: conditional
                    conditions:
                      - condition: or
                        conditions:
                          - entity: binary_sensor.smarti_internet
                            state: unavailable
                          - entity: binary_sensor.smarti_internet
                            state: unknown
                          - entity: sensor.browser_mod_installed
                            state_not: 'True'
                          - entity: alarm_control_panel.alarmo
                            state: unavailable
                          - entity: alarm_control_panel.alarmo
                            state: unknown
                          - entity: weather.forecast_home
                            state: unavailable
                          - entity: weather.forecast_home
                            state: unknown
                    card:
                      type: custom:button-card
                      name: ⚠️ Setup Required
                      icon: mdi:alert-circle
                      show_state: false
                      show_icon: true
                      show_name: true
                      tap_action:
                        action: navigate
                        navigation_path: /smarti-dashboard/settings3
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                          - divider-color: transparent
                        icon:
                          - color: red
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      card_mod:
                        style: |
                          ha-card {
                            border: 2px solid var(--border-color);
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                          }
                  - type: conditional
                    conditions:
                      - entity: alarm_control_panel.alarmo
                        state_not: unavailable
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_alarm'].state ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - font-size: 3em
                          - color: var(--primary-color)
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: more-info
                        entity: alarm_control_panel.alarmo
                      entity: alarm_control_panel.alarmo
                      card_mod:
                        style: |
                          ha-card {
                            background: radial-gradient(
                              circle at center,
                              rgba(0, 0, 0, 0.4) 0%,
                              rgba(0, 0, 0, 0.2) 10%,
                              rgba(0, 0, 0, 0) 40%
                            );
                            border-radius: 20px;
                            border: none
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            overflow: hidden;
                            position: relative;
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        entity: sensor.smarti_active_locks
                        above: 0
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_tabbed_card_locks_tab_title'].state
                        ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                          - animation: >
                              [[[ return
                              parseInt(states['sensor.smarti_active_locks'].state)
                              > 0 ? 'blink-red 1.5s infinite' : 'none'; ]]]
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              card:
                                type: entities
                              filter:
                                include:
                                  - domain: lock
                                    state: unlocked
                                  - domain: binary_sensor
                                    attributes:
                                      device_class: lock
                                    state: 'on'
                                exclude:
                                  - hidden_by: '*'
                              sort:
                                reverse: true
                      entity: sensor.smarti_active_locks
                      card_mod:
                        style: |
                          ha-card {
                            border: 2px solid var(--border-color);
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                          }

                          @keyframes blink-red {
                            0% {
                              color: var(--accent-color);
                            }
                            50% {
                              color: var(--primary-color);
                            }
                            100% {
                              color: var(--accent-color);
                            }
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        entity: sensor.smarti_active_motion_sensors
                        above: 0
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_motion'].state
                        ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              card:
                                type: entities
                              filter:
                                include:
                                  - domain: binary_sensor
                                    attributes:
                                      device_class: motion
                                    state: 'on'
                                exclude:
                                  - hidden_by: '*'
                              sort:
                                reverse: true
                      entity: sensor.smarti_active_motion_sensors
                      card_mod:
                        style: |
                          ha-card {
                            background: radial-gradient(
                              circle at center,
                              rgba(0, 0, 0, 0.4) 0%,
                              rgba(0, 0, 0, 0.2) 10%,
                              rgba(0, 0, 0, 0) 40%
                            );
                            border-radius: 20px;
                            border: none
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            overflow: hidden;
                            position: relative;
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        above: 0
                        entity: sensor.smarti_active_lights
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_lights'].state
                        ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              show_empty: false
                              card:
                                show_name: true
                                show_icon: true
                                show_state: true
                                type: glance
                                state_color: true
                                columns: 4
                              filter:
                                include:
                                  - domain: light
                                    state: 'on'
                                    options:
                                      tap_action:
                                        action: toggle
                                exclude:
                                  - hidden_by: '*'
                              sort:
                                method: none
                                reverse: false
                                numeric: false
                      entity: sensor.smarti_active_lights
                      card_mod:
                        style: |
                          ha-card {
                            background: radial-gradient(
                              circle at center,
                              rgba(0, 0, 0, 0.4) 0%,
                              rgba(0, 0, 0, 0.2) 10%,
                              rgba(0, 0, 0, 0) 40%
                            );
                            border-radius: 20px;
                            border: none
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            overflow: hidden;
                            position: relative;
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        above: 0
                        entity: sensor.smarti_active_doors
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_doors'].state ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              card:
                                type: entities
                              filter:
                                include:
                                  - domain: binary_sensor
                                    attributes:
                                      device_class: door
                                    state: 'on'
                                exclude:
                                  - hidden_by: '*'
                              sort:
                                reverse: true
                      entity: sensor.smarti_active_doors
                      card_mod:
                        style: |
                          ha-card {
                            background: radial-gradient(
                              circle at center,
                              rgba(0, 0, 0, 0.4) 0%,
                              rgba(0, 0, 0, 0.2) 10%,
                              rgba(0, 0, 0, 0) 40%
                            );
                            border-radius: 20px;
                            border: none
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            overflow: hidden;
                            position: relative;
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        entity: sensor.smarti_active_windows
                        above: 0
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_windows'].state
                        ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)'
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              card:
                                type: entities
                              filter:
                                include:
                                  - domain: binary_sensor
                                    attributes:
                                      device_class: window
                                    state: 'on'
                                exclude:
                                  - hidden_by: '*'
                              sort:
                                reverse: true
                      entity: sensor.smarti_active_windows
                      card_mod:
                        style: |
                          ha-card {
                            background: radial-gradient(
                              circle at center,
                              rgba(0, 0, 0, 0.4) 0%,
                              rgba(0, 0, 0, 0.2) 10%,
                              rgba(0, 0, 0, 0) 40%
                            );
                            border-radius: 20px;
                            border: none
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            overflow: hidden;
                            position: relative;
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        above: 0
                        entity: sensor.smarti_active_water_sensors
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_water'].state ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              card:
                                type: entities
                              filter:
                                include:
                                  - domain: binary_sensor
                                    attributes:
                                      device_class: moisture
                                    state: 'on'
                                exclude:
                                  - hidden_by: '*'
                              sort:
                                reverse: true
                      entity: sensor.smarti_active_water_sensors
                      card_mod:
                        style: |
                          ha-card {
                            border: 2px solid var(--border-color);
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        entity: sensor.smarti_active_smoke_detectors
                        above: 0
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_smoke'].state ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              card:
                                type: entities
                              filter:
                                include:
                                  - domain: binary_sensor
                                    attributes:
                                      device_class: smoke
                                    state: 'on'
                                exclude:
                                  - hidden_by: '*'
                              sort:
                                reverse: true
                      entity: sensor.smarti_active_smoke_detectors
                      card_mod:
                        style: |
                          ha-card {
                            background: radial-gradient(
                              circle at center,
                              rgba(0, 0, 0, 0.4) 0%,
                              rgba(0, 0, 0, 0.2) 10%,
                              rgba(0, 0, 0, 0) 40%
                            );
                            border-radius: 20px;
                            border: none
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            overflow: hidden;
                            position: relative;
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        above: 0
                        entity: sensor.smarti_active_gas_sensors
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_gas'].state ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              card:
                                type: entities
                              filter:
                                include:
                                  - domain: binary_sensor
                                    attributes:
                                      device_class: gas
                                    state: 'on'
                                exclude:
                                  - hidden_by: '*'
                              sort:
                                reverse: true
                      entity: sensor.smarti_active_gas_sensors
                      card_mod:
                        style: |
                          ha-card {
                            background: radial-gradient(
                              circle at center,
                              rgba(0, 0, 0, 0.4) 0%,
                              rgba(0, 0, 0, 0.2) 10%,
                              rgba(0, 0, 0, 0) 40%
                            );
                            border-radius: 20px;
                            border: none
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            overflow: hidden;
                            position: relative;
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        above: 0
                        entity: sensor.smarti_active_low_battery_devices_count
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_batteries'].state
                        ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              card:
                                show_header_toggle: false
                                type: entities
                                state_color: true
                              filter:
                                include:
                                  - entity_id: sensor.*_battery
                                  - entity_id: binary_sensor.*battery_low
                                  - entity_id: sensor.*.battery_state
                                exclude:
                                  - state: unavailable
                                  - state: '-'
                                  - state: unknown
                                  - state: none
                                  - state: medium
                                  - state: high
                                  - state: '= 0,0'
                                  - state: '>= 20'
                                  - state: 'off'
                                  - entity_id: sensor.campainha_ring_mqtt_battery
                                  - entity_id: sensor.campainha_battery
                                  - state: None
                                  - state: charging
                                  - state: discharging
                                  - state: high
                                  - name: /[Ll]ow/
                                  - name: /[Ss]tate/
                                  - entity_id: '*phone*'
                                  - entity_id: '*browser*'
                                  - entity_id: '*watch*'
                                  - entity_id: '*pad*'
                                  - entity_id: '*tablet*'
                                  - hidden_by: '*'
                              sort:
                                method: friendly_name
                                numeric: true
                                ignore_case: false
                                ip: false
                                reverse: false
                              show_empty: false
                      entity: sensor.smarti_active_low_battery_devices_count
                      card_mod:
                        style: |
                          ha-card {
                            background: radial-gradient(
                              circle at center,
                              rgba(0, 0, 0, 0.4) 0%,
                              rgba(0, 0, 0, 0.2) 10%,
                              rgba(0, 0, 0, 0) 40%
                            );
                            border-radius: 20px;
                            border: none
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            overflow: hidden;
                            position: relative;
                          }
                  - type: conditional
                    conditions:
                      - condition: state
                        entity: sensor.smarti_dynamic_power_sensor
                        state_not: unknown
                      - condition: state
                        entity: sensor.smarti_dynamic_power_sensor
                        state_not: unavailable
                      - condition: state
                        entity: input_boolean.smarti_show_energy_measurement
                        state_not: 'off'
                    card:
                      type: custom:mini-graph-card
                      entities:
                        - sensor.smarti_dynamic_power_sensor
                      show:
                        name: false
                        icon: true
                        legend: false
                        labels: false
                      icon: mdi:lightning-bolt
                      height: 50
                      color_thresholds:
                        - value: 3000
                          color: '#f39c12'
                        - value: 5000
                          color: '#d35400'
                        - value: 8000
                          color: '#c0392b'
                      hours_to_show: 6
                      points_per_hour: 10
                      align_icon: center
                      align_state: right
                      align_header: center
                      card_mod:
                        style: |
                          ha-card {
                            border: 2px solid var(--border-color);
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            background: transparent;
                            color: var(--primary-color); /* Ensures the text uses primary color */
                          }
                          ha-icon {
                            color: var(--primary-color); /* Sets the icon color */
                          }
                  - type: custom:gap-card
      - type: custom:button-card
        styles:
          card:
            - height: 5px
            - max-height: 10px
            - padding: 0
            - margin: 0
            - background-color: var(--primary-color);
        card_mod:
          style: |
            ha-card {
              border-radius: 1px;
              height: 2px;
              max-height: 2px;
              padding: 0;
              margin: 0;
              background: var(--primary-color);
            }
        visibility:
          - condition: screen
            media_query: '(min-width: 768px)'
      - type: custom:mod-card
        card_mod:
          style:
            .: |
              ha-card {
                --ha-card-border-width: 0px;
                --ha-card-border-radius: 20px;
                background: linear-gradient(
                  to bottom right,
                  rgba(255, 255, 255, 0.15),
                  rgba(255, 255, 255, 0.05)
                );
                backdrop-filter: blur(15px);
                -webkit-backdrop-filter: blur(15px);
                box-shadow:
                  0 8px 32px 0 rgba(31, 38, 135, 0.37),
                  inset 0 0 0.5px rgba(255, 255, 255, 0.2); /* subtle inner glow */
                border: 5px solid rgba(255, 255, 255, 0.1);
                position: relative;
                overflow: hidden;
                border-radius: 10px 10px 20px 20px;
              }

              ha-card::before {
                content: '';
                position: absolute;
                top: -30%;
                left: -30%;
                width: 200%;
                height: 200%;
                background: radial-gradient(
                  circle at 30% 30%,
                  rgba(255, 255, 255, 0.3),
                  transparent 60%
                );
                transform: rotate(25deg);
                pointer-events: none;
              }
        card:
          type: horizontal-stack
          cards:
            - type: custom:button-card
              name: Home
              show_icon: true
              icon: mdi:home
              show_name: false
              styles:
                card:
                  - max-height: 50px
                  - justify-content: center
                  - align-items: center
                icon:
                  - color: black
                  - max-height: 30px
                  - max-width: 30px
                  - min-height: 30px
                  - min-width: 20px
                  - color: var(--primary-color)
                name:
                  - color: black
              tap_action:
                action: navigate
                navigation_path: home#
              card_mod:
                style: |
                  ha-card {
                    border-radius: 5px 5px 5px 15px;
                  }
            - type: conditional
              conditions:
                - entity: input_boolean.smarti_show_weather_tab
                  state: 'on'
              card:
                type: custom:button-card
                name: Rooms
                show_icon: true
                icon: mdi:weather-partly-cloudy
                show_name: false
                styles:
                  card:
                    - max-height: 50px
                    - justify-content: center
                    - align-items: center
                  icon:
                    - color: black
                    - max-height: 30px
                    - max-width: 30px
                    - min-height: 30px
                    - min-width: 20px
                    - color: var(--primary-color)
                  name:
                    - color: black
                tap_action:
                  action: navigate
                  navigation_path: rooms#
                card_mod:
                  style: |
                    ha-card {
                      border-radius: 5px 5px 5px 5px;
                    }
            - type: conditional
              conditions:
                - entity: input_boolean.smarti_show_light_tab
                  state: 'on'
              card:
                type: custom:button-card
                name: Light Control
                show_icon: true
                icon: mdi:lightbulb-group
                show_name: false
                styles:
                  card:
                    - max-height: 50px
                    - justify-content: center
                    - align-items: center
                  icon:
                    - color: black
                    - max-height: 30px
                    - max-width: 30px
                    - min-height: 30px
                    - min-width: 20px
                    - color: var(--primary-color)
                  name:
                    - color: black
                state:
                  - value: 'on'
                    styles:
                      card:
                        - background-color: '#FF7000'
                tap_action:
                  action: navigate
                  navigation_path: lights#
                card_mod:
                  style: |
                    ha-card {
                      border-radius: 5px 5px 5px 5px;   

                    }  
            - type: conditional
              conditions:
                - entity: input_boolean.smarti_show_climate_tab
                  state: 'on'
              card:
                type: custom:button-card
                name: Heating Control
                show_icon: true
                icon: mdi:thermometer-water
                show_name: false
                styles:
                  card:
                    - max-height: 50px
                    - justify-content: center
                    - align-items: center
                  icon:
                    - max-height: 30px
                    - max-width: 30px
                    - min-height: 30px
                    - min-width: 20px
                    - color: var(--primary-color)
                  name:
                    - color: black
                tap_action:
                  action: navigate
                  navigation_path: heating#
                card_mod:
                  style: |
                    ha-card {
                      border-radius: 5px 5px 5px 5px;      
                    }
            - type: conditional
              conditions:
                - entity: input_boolean.smarti_show_misc_tab
                  state: 'on'
              card:
                type: custom:button-card
                name: Multimedia
                show_icon: true
                icon: mdi:multimedia
                show_name: false
                styles:
                  card:
                    - max-height: 50px
                    - justify-content: center
                    - align-items: center
                  icon:
                    - color: black
                    - max-height: 30px
                    - max-width: 30px
                    - min-height: 30px
                    - min-width: 20px
                    - color: var(--primary-color)
                  name:
                    - color: black
                tap_action:
                  action: navigate
                  navigation_path: multimedia#
                card_mod:
                  style: |
                    ha-card {
                      border-radius: 5px 5px 5px 5px;    
                    }
            - type: conditional
              conditions:
                - entity: input_boolean.smarti_show_security_tab
                  state: 'on'
              card:
                type: custom:button-card
                name: Cameras
                show_icon: true
                icon: mdi:shield
                show_name: false
                styles:
                  card:
                    - max-height: 50px
                    - justify-content: center
                    - align-items: center
                  icon:
                    - max-height: 30px
                    - max-width: 30px
                    - min-height: 30px
                    - min-width: 20px
                    - color: var(--primary-color)
                  name:
                    - color: black
                tap_action:
                  action: navigate
                  navigation_path: cameras#
                card_mod:
                  style: |
                    ha-card {
                      border-radius: 5px 5px 5px 5px;          
                    }
            - type: conditional
              conditions:
                - entity: input_boolean.smarti_show_energy_tab
                  state: 'on'
              card:
                type: custom:button-card
                name: Power Control
                show_icon: true
                icon: mdi:lightning-bolt
                show_name: false
                styles:
                  card:
                    - max-height: 50px
                    - justify-content: center
                    - align-items: center
                  icon:
                    - max-height: 30px
                    - max-width: 30px
                    - min-height: 30px
                    - min-width: 20px
                    - color: var(--primary-color)
                  name:
                    - color: black
                tap_action:
                  action: navigate
                  navigation_path: power#
                card_mod:
                  style: |
                    ha-card {
                      border-radius: 5px 5px 5px 5px;         
                    }
            - type: custom:button-card
              name: Settings
              show_icon: true
              icon: mdi:cog
              show_name: false
              styles:
                card:
                  - max-height: 50px
                  - justify-content: center
                  - align-items: center
                icon:
                  - max-height: 30px
                  - max-width: 30px
                  - min-height: 30px
                  - min-width: 20px
                name:
                  - color: black
              tap_action:
                action: navigate
                navigation_path: settings#
              card_mod:
                style: |
                  ha-card{
                    border-radius: 5px 5px 15px 5px;
                    background-color: var(--primary-color);          
                  }  
          visibility:
            - condition: screen
              media_query: '(min-width: 0px)'
      - type: custom:gap-card
        height: 25
        visibility:
          - condition: screen
            media_query: '(min-width: 0px) and (max-width: 767px)'
      - type: custom:mod-card
        card_mod:
          style:
            .: |
              ha-card {
                --ha-card-border-width: 0px;
                --ha-card-border-radius: 20px;
                --ha-card-background: transparent;
              }           
        card:
          type: horizontal-stack
          cards:
            - type: horizontal-stack
              cards:
                - type: vertical-stack
                  cards:
                    - type: custom:gap-card
                      height: 100
                    - type: custom:gap-card
                - type: vertical-stack
                  cards:
                    - type: custom:gap-card
                    - type: custom:mushroom-title-card
                      title: >-
                        {{ states('sensor.smarti_dashboard_actions_page_title')
                        }}
                      subtitle: >-
                        {{
                        states('sensor.smarti_dashboard_actions_page_subtitle')
                        }}
                      alignment: center
                    - type: custom:lottie-card
                      animation: /local/smartianimations/settings3.json
                      size: 110px
                      loop: true
                      autoplay: true
                    - type: custom:gap-card
                - type: vertical-stack
                  cards:
                    - type: custom:gap-card
                    - type: custom:gap-card
        visibility:
          - condition: screen
            media_query: '(min-width: 768px)'
      - type: custom:gap-card
        height: 25
        visibility:
          - condition: screen
            media_query: '(min-width: 0px) and (max-width: 767px)'
      - type: horizontal-stack
        cards:
          - type: custom:button-card
            name: null
            show_icon: true
            icon: mdi:cog
            show_name: true
            styles:
              card:
                - max-height: 100px
                - justify-content: center
                - background: var(--primary-color)
                - align-items: center
              icon:
                - max-height: 50px
                - max-width: 100px
                - min-height: 20px
                - min-width: 20px
              name:
                - font-size: 20px
                - font-type: bold
            card_mod:
              style: |
                ha-card{
                  border-radius: 5px;
                  border: none;
                } 
          - type: custom:button-card
            name: null
            show_icon: true
            icon: mdi:chart-bar-stacked
            show_name: true
            styles:
              card:
                - max-height: 100px
                - justify-content: center
                - align-items: center
              icon:
                - color: var(--primary-color)
                - max-height: 50px
                - max-width: 100px
                - min-height: 20px
                - min-width: 20px
              name:
                - color: var(--primary-color)
                - font-size: 20px
                - font-type: bold
            tap_action:
              action: navigate
              navigation_path: settings3#
            card_mod:
              style: |
                ha-card{
                  border-radius: 5px;
                  box-shadow: 6.2px 12.3px 12.3px hsl(0deg 0% 0% / 0.31);
                  border: none;
                } 
        visibility:
          - condition: screen
            media_query: '(min-width: 768px)'
      - type: custom:gap-card
        height: 25
      - type: custom:button-card
        styles:
          card:
            - height: 5px
            - max-height: 10px
            - padding: 0
            - margin: 0
            - background-color: var(--primary-color);
        card_mod:
          style: |
            ha-card {
              border-radius: 1px;
              height: 2px;
              max-height: 2px;
              padding: 0;
              margin: 0;
              background: var(--primary-color);
            }
        visibility:
          - condition: screen
            media_query: '(min-width: 768px)'
      - type: custom:gap-card
        height: 25
      - type: custom:mod-card
        card_mod:
          style:
            .: |
              ha-card {
                --ha-card-border-width: 0px;
                --ha-card-border-radius: 20px;
                --ha-card-background: transparent;
              } 
            tabbed-card $:
              mwc-tab:
                $: |
                  .mdc-tab--active {
                    background: var(--primary-color) !important;
                    border-radius: 5px 5px 0px 0px;
                  }
                    
        card:
          type: custom:tabbed-card
          tabs:
            - attributes:
                label: null
                icon: mdi:home-automation
              card:
                type: vertical-stack
                cards:
                  - type: custom:mushroom-title-card
                    title: >-
                      {{
                      states('sensor.smarti_dashboard_settings_page_smarti_automations')
                      }}
                  - type: custom:auto-entities
                    card:
                      type: entities
                      title: ''
                      show_header_toggle: false
                    filter:
                      include:
                        - domain: automation
                          label: SMARTi
                        - domain: automation
                          name: SMARTi*
                      exclude: []
            - attributes:
                label: null
                icon: mdi:cog
              card:
                type: vertical-stack
                cards:
                  - type: vertical-stack
                    cards:
                      - type: vertical-stack
                        cards:
                          - type: custom:gap-card
                          - type: custom:mushroom-title-card
                            title: >-
                              {{
                              states('sensor.smarti_dashboard_settings_page_power_settings')
                              }}
                            subtitle: null
                          - type: horizontal-stack
                            cards:
                              - type: custom:mushroom-select-card
                                entity: >-
                                  input_select.smarti_home_power_measurement_device
                                icon_color: primary
                                primary_info: name
                                secondary_info: last-changed
                                name: Power Measurement Device List
                              - type: custom:mushroom-template-card
                                primary: >
                                  {{
                                  states('sensor.smarti_dashboard_settings_page_refresh_device_list')
                                  }}
                                secondary: >
                                  {% set last_triggered =
                                  state_attr('automation.smarti_update_power_measurement_device_list',
                                  'last_triggered') %} {% if last_triggered %}
                                    {% set time_diff = (now() - last_triggered).total_seconds() %}
                                    {% if time_diff < 60 %}
                                      {{ time_diff | round }} seconds ago
                                    {% elif time_diff < 3600 %}
                                      {{ (time_diff / 60) | round }} minutes ago
                                    {% elif time_diff < 86400 %}
                                      {{ (time_diff / 3600) | round }} hours ago
                                    {% else %}
                                      {{ (time_diff / 86400) | round }} days ago
                                    {% endif %}
                                  {% else %}
                                    Never triggered
                                  {% endif %}
                                icon: mdi:lightning-bolt
                                badge_icon: mdi:update
                                badge_color: primary
                                tap_action:
                                  action: call-service
                                  service: automation.trigger
                                  service_data:
                                    entity_id: >-
                                      automation.smarti_update_power_measurement_device_list
                                fill_container: true
                                layout: vertical
                                card_mod:
                                  style: |
                                    ha-card {
                                      --ha-card-background: var(--ha-card-background) !important;
                                    }                      
                          - type: custom:mushroom-title-card
                            title: >-
                              {{
                              states('sensor.smarti_dashboard_settings_page_dashboard_settings')
                              }}
                            subtitle: null
                          - type: entities
                            entities:
                              - entity: input_boolean.smarti_show_energy_tab
                                name: Show Energy Tab
                          - type: entities
                            entities:
                              - entity: input_boolean.smarti_show_climate_tab
                                name: Show Climate Tab
                          - type: entities
                            entities:
                              - entity: input_boolean.smarti_show_light_tab
                                name: Show Light Tab
                          - type: entities
                            entities:
                              - entity: input_boolean.smarti_show_weather_tab
                                name: Show Weather Tab
                          - type: entities
                            entities:
                              - entity: input_boolean.smarti_show_misc_tab
                                name: Show Misc Tab
                          - type: entities
                            entities:
                              - entity: input_boolean.smarti_show_security_tab
                                name: Show Security Tab
                          - type: custom:mushroom-title-card
                            title: '{{ states(''sensor.smarti_status_bar_settings'') }}'
                            subtitle: null
                          - type: entities
                            entities:
                              - entity: input_boolean.smarti_show_energy_measurement
                                name: Show Energy Measurement in Status Bar
                          - type: custom:mushroom-title-card
                            title: >-
                              {{
                              states('sensor.smarti_dashboard_settings_page_language_settings')
                              }}
                            subtitle: null
                          - type: custom:mushroom-select-card
                            entity: input_select.language
                            icon_color: primary
                            name: Dashboard Language
    background:
      opacity: 100
      alignment: center
      size: cover
      repeat: no-repeat
      attachment: fixed
      image: /local/images/smarti_images/smarti_dashboard_backgorund_image.jpg
  - title: Actions
    path: settings3
    icon: mdi:cog
    type: custom:masonry-layout
    layout:
      max_width: 2000
      max_cols: 1
    subview: true
    cards:
      - type: horizontal-stack
        cards:
          - type: vertical-stack
            cards:
              - type: custom:lottie-card
                animation: /local/smartianimations/error.json
                size: 200px
                loop: true
                autoplay: true
              - type: markdown
                content: >
                  **SMARTi Basic** is not supported on mobile devices.   To
                  enable this feature, please visit  
                  [https://www.smarti.dev](https://www.smarti.dev/smarti-store/p/smarti-powerflow-xe7ft)
                  to purchase and upgrade to the Pro version.
                style: |
                  ha-card {
                    background: rgba(0, 0, 0, 0.5); /* Slightly transparent background */
                    color: white;
                    text-align: center;
                    font-size: 1.2em;
                    padding: 20px;
                    border-radius: 10px;
                  }   
              - type: custom:mushroom-chips-card
                chips:
                  - type: spacer
                  - type: back
                  - type: menu
                  - type: spacer
        visibility:
          - condition: screen
            media_query: '(min-width: 0px) and (max-width: 767px)'
      - type: custom:mod-card
        card_mod:
          style:
            .: |
              ha-card {
                --ha-card-border-width: 0px;
                --ha-card-border-radius: 20px;
                background: linear-gradient(
                  to bottom right,
                  rgba(255, 255, 255, 0.15),
                  rgba(255, 255, 255, 0.05)
                );
                backdrop-filter: blur(15px);
                -webkit-backdrop-filter: blur(15px);
                box-shadow:
                  0 8px 32px 0 rgba(31, 38, 135, 0.37),
                  inset 0 0 0.5px rgba(255, 255, 255, 0.2); /* subtle inner glow */
                border: 5px solid rgba(255, 255, 255, 0.1);
                position: relative;
                overflow: hidden;
                border-radius: 100px 100px 10px 10px;
              }

              ha-card::before {
                content: '';
                position: absolute;
                top: -30%;
                left: -30%;
                width: 200%;
                height: 200%;
                background: radial-gradient(
                  circle at 30% 30%,
                  rgba(255, 255, 255, 0.3),
                  transparent 60%
                );
                transform: rotate(25deg);
                pointer-events: none;
              }
        card:
          type: conditional
          conditions:
            - condition: screen
              media_query: '(min-width: 768px)'
          card:
            type: vertical-stack
            cards:
              - type: horizontal-stack
                cards:
                  - type: custom:gap-card
                  - type: conditional
                    conditions:
                      - condition: or
                        conditions:
                          - entity: binary_sensor.smarti_internet
                            state: unavailable
                          - entity: binary_sensor.smarti_internet
                            state: unknown
                          - entity: sensor.browser_mod_installed
                            state_not: 'True'
                          - entity: alarm_control_panel.alarmo
                            state: unavailable
                          - entity: alarm_control_panel.alarmo
                            state: unknown
                          - entity: weather.forecast_home
                            state: unavailable
                          - entity: weather.forecast_home
                            state: unknown
                    card:
                      type: custom:button-card
                      name: ⚠️ Setup Required
                      icon: mdi:alert-circle
                      show_state: false
                      show_icon: true
                      show_name: true
                      tap_action:
                        action: navigate
                        navigation_path: /smarti-dashboard/settings3
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                          - divider-color: transparent
                        icon:
                          - color: red
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      card_mod:
                        style: |
                          ha-card {
                            border: 2px solid var(--border-color);
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                          }
                  - type: conditional
                    conditions:
                      - entity: alarm_control_panel.alarmo
                        state_not: unavailable
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_alarm'].state ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - font-size: 3em
                          - color: var(--primary-color)
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: more-info
                        entity: alarm_control_panel.alarmo
                      entity: alarm_control_panel.alarmo
                      card_mod:
                        style: |
                          ha-card {
                            background: radial-gradient(
                              circle at center,
                              rgba(0, 0, 0, 0.4) 0%,
                              rgba(0, 0, 0, 0.2) 10%,
                              rgba(0, 0, 0, 0) 40%
                            );
                            border-radius: 20px;
                            border: none
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            overflow: hidden;
                            position: relative;
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        entity: sensor.smarti_active_locks
                        above: 0
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_tabbed_card_locks_tab_title'].state
                        ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                          - animation: >
                              [[[ return
                              parseInt(states['sensor.smarti_active_locks'].state)
                              > 0 ? 'blink-red 1.5s infinite' : 'none'; ]]]
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              card:
                                type: entities
                              filter:
                                include:
                                  - domain: lock
                                    state: unlocked
                                  - domain: binary_sensor
                                    attributes:
                                      device_class: lock
                                    state: 'on'
                                exclude:
                                  - hidden_by: '*'
                              sort:
                                reverse: true
                      entity: sensor.smarti_active_locks
                      card_mod:
                        style: |
                          ha-card {
                            border: 2px solid var(--border-color);
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                          }

                          @keyframes blink-red {
                            0% {
                              color: var(--accent-color);
                            }
                            50% {
                              color: var(--primary-color);
                            }
                            100% {
                              color: var(--accent-color);
                            }
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        entity: sensor.smarti_active_motion_sensors
                        above: 0
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_motion'].state
                        ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              card:
                                type: entities
                              filter:
                                include:
                                  - domain: binary_sensor
                                    attributes:
                                      device_class: motion
                                    state: 'on'
                                exclude:
                                  - hidden_by: '*'
                              sort:
                                reverse: true
                      entity: sensor.smarti_active_motion_sensors
                      card_mod:
                        style: |
                          ha-card {
                            background: radial-gradient(
                              circle at center,
                              rgba(0, 0, 0, 0.4) 0%,
                              rgba(0, 0, 0, 0.2) 10%,
                              rgba(0, 0, 0, 0) 40%
                            );
                            border-radius: 20px;
                            border: none
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            overflow: hidden;
                            position: relative;
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        above: 0
                        entity: sensor.smarti_active_lights
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_lights'].state
                        ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              show_empty: false
                              card:
                                show_name: true
                                show_icon: true
                                show_state: true
                                type: glance
                                state_color: true
                                columns: 4
                              filter:
                                include:
                                  - domain: light
                                    state: 'on'
                                    options:
                                      tap_action:
                                        action: toggle
                                exclude:
                                  - hidden_by: '*'
                              sort:
                                method: none
                                reverse: false
                                numeric: false
                      entity: sensor.smarti_active_lights
                      card_mod:
                        style: |
                          ha-card {
                            background: radial-gradient(
                              circle at center,
                              rgba(0, 0, 0, 0.4) 0%,
                              rgba(0, 0, 0, 0.2) 10%,
                              rgba(0, 0, 0, 0) 40%
                            );
                            border-radius: 20px;
                            border: none
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            overflow: hidden;
                            position: relative;
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        above: 0
                        entity: sensor.smarti_active_doors
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_doors'].state ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              card:
                                type: entities
                              filter:
                                include:
                                  - domain: binary_sensor
                                    attributes:
                                      device_class: door
                                    state: 'on'
                                exclude:
                                  - hidden_by: '*'
                              sort:
                                reverse: true
                      entity: sensor.smarti_active_doors
                      card_mod:
                        style: |
                          ha-card {
                            background: radial-gradient(
                              circle at center,
                              rgba(0, 0, 0, 0.4) 0%,
                              rgba(0, 0, 0, 0.2) 10%,
                              rgba(0, 0, 0, 0) 40%
                            );
                            border-radius: 20px;
                            border: none
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            overflow: hidden;
                            position: relative;
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        entity: sensor.smarti_active_windows
                        above: 0
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_windows'].state
                        ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)'
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              card:
                                type: entities
                              filter:
                                include:
                                  - domain: binary_sensor
                                    attributes:
                                      device_class: window
                                    state: 'on'
                                exclude:
                                  - hidden_by: '*'
                              sort:
                                reverse: true
                      entity: sensor.smarti_active_windows
                      card_mod:
                        style: |
                          ha-card {
                            background: radial-gradient(
                              circle at center,
                              rgba(0, 0, 0, 0.4) 0%,
                              rgba(0, 0, 0, 0.2) 10%,
                              rgba(0, 0, 0, 0) 40%
                            );
                            border-radius: 20px;
                            border: none
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            overflow: hidden;
                            position: relative;
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        above: 0
                        entity: sensor.smarti_active_water_sensors
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_water'].state ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              card:
                                type: entities
                              filter:
                                include:
                                  - domain: binary_sensor
                                    attributes:
                                      device_class: moisture
                                    state: 'on'
                                exclude:
                                  - hidden_by: '*'
                              sort:
                                reverse: true
                      entity: sensor.smarti_active_water_sensors
                      card_mod:
                        style: |
                          ha-card {
                            border: 2px solid var(--border-color);
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        entity: sensor.smarti_active_smoke_detectors
                        above: 0
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_smoke'].state ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              card:
                                type: entities
                              filter:
                                include:
                                  - domain: binary_sensor
                                    attributes:
                                      device_class: smoke
                                    state: 'on'
                                exclude:
                                  - hidden_by: '*'
                              sort:
                                reverse: true
                      entity: sensor.smarti_active_smoke_detectors
                      card_mod:
                        style: |
                          ha-card {
                            background: radial-gradient(
                              circle at center,
                              rgba(0, 0, 0, 0.4) 0%,
                              rgba(0, 0, 0, 0.2) 10%,
                              rgba(0, 0, 0, 0) 40%
                            );
                            border-radius: 20px;
                            border: none
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            overflow: hidden;
                            position: relative;
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        above: 0
                        entity: sensor.smarti_active_gas_sensors
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_gas'].state ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              card:
                                type: entities
                              filter:
                                include:
                                  - domain: binary_sensor
                                    attributes:
                                      device_class: gas
                                    state: 'on'
                                exclude:
                                  - hidden_by: '*'
                              sort:
                                reverse: true
                      entity: sensor.smarti_active_gas_sensors
                      card_mod:
                        style: |
                          ha-card {
                            background: radial-gradient(
                              circle at center,
                              rgba(0, 0, 0, 0.4) 0%,
                              rgba(0, 0, 0, 0.2) 10%,
                              rgba(0, 0, 0, 0) 40%
                            );
                            border-radius: 20px;
                            border: none
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            overflow: hidden;
                            position: relative;
                          }
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        above: 0
                        entity: sensor.smarti_active_low_battery_devices_count
                    card:
                      type: custom:button-card
                      name: >
                        [[[ return
                        states['sensor.smarti_dashboard_navbar_batteries'].state
                        ]]]
                      show_state: true
                      show_icon: true
                      styles:
                        card:
                          - font-size: 13px
                          - height: 150px
                          - background-color: rgba(0, 0, 0, 0)
                        icon:
                          - color: var(--primary-color)
                          - font-size: 3em
                          - text-align: center
                          - max-height: 50px
                          - max-width: 50px
                          - min-height: 30px
                          - min-width: 30px
                        name:
                          - color: var(--primary-text-color)
                          - font-weight: bold
                      tap_action:
                        action: fire-dom-event
                        browser_mod:
                          service: browser_mod.popup
                          data:
                            dismissable: true
                            autoclose: false
                            content:
                              type: custom:auto-entities
                              card:
                                show_header_toggle: false
                                type: entities
                                state_color: true
                              filter:
                                include:
                                  - entity_id: sensor.*_battery
                                  - entity_id: binary_sensor.*battery_low
                                  - entity_id: sensor.*.battery_state
                                exclude:
                                  - state: unavailable
                                  - state: '-'
                                  - state: unknown
                                  - state: none
                                  - state: medium
                                  - state: high
                                  - state: '= 0,0'
                                  - state: '>= 20'
                                  - state: 'off'
                                  - entity_id: sensor.campainha_ring_mqtt_battery
                                  - entity_id: sensor.campainha_battery
                                  - state: None
                                  - state: charging
                                  - state: discharging
                                  - state: high
                                  - name: /[Ll]ow/
                                  - name: /[Ss]tate/
                                  - entity_id: '*phone*'
                                  - entity_id: '*browser*'
                                  - entity_id: '*watch*'
                                  - entity_id: '*pad*'
                                  - entity_id: '*tablet*'
                                  - hidden_by: '*'
                              sort:
                                method: friendly_name
                                numeric: true
                                ignore_case: false
                                ip: false
                                reverse: false
                              show_empty: false
                      entity: sensor.smarti_active_low_battery_devices_count
                      card_mod:
                        style: |
                          ha-card {
                            background: radial-gradient(
                              circle at center,
                              rgba(0, 0, 0, 0.4) 0%,
                              rgba(0, 0, 0, 0.2) 10%,
                              rgba(0, 0, 0, 0) 40%
                            );
                            border-radius: 20px;
                            border: none
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            overflow: hidden;
                            position: relative;
                          }
                  - type: conditional
                    conditions:
                      - condition: state
                        entity: sensor.smarti_dynamic_power_sensor
                        state_not: unknown
                      - condition: state
                        entity: sensor.smarti_dynamic_power_sensor
                        state_not: unavailable
                      - condition: state
                        entity: input_boolean.smarti_show_energy_measurement
                        state_not: 'off'
                    card:
                      type: custom:mini-graph-card
                      entities:
                        - sensor.smarti_dynamic_power_sensor
                      show:
                        name: false
                        icon: true
                        legend: false
                        labels: false
                      icon: mdi:lightning-bolt
                      height: 50
                      color_thresholds:
                        - value: 3000
                          color: '#f39c12'
                        - value: 5000
                          color: '#d35400'
                        - value: 8000
                          color: '#c0392b'
                      hours_to_show: 6
                      points_per_hour: 10
                      align_icon: center
                      align_state: right
                      align_header: center
                      card_mod:
                        style: |
                          ha-card {
                            border: 2px solid var(--border-color);
                            transition: transform 0.5s ease, box-shadow 0.5s ease;
                            background: transparent;
                            color: var(--primary-color); /* Ensures the text uses primary color */
                          }
                          ha-icon {
                            color: var(--primary-color); /* Sets the icon color */
                          }
                  - type: custom:gap-card
      - type: custom:button-card
        styles:
          card:
            - height: 5px
            - max-height: 10px
            - padding: 0
            - margin: 0
            - background-color: var(--primary-color);
        card_mod:
          style: |
            ha-card {
              border-radius: 1px;
              height: 2px;
              max-height: 2px;
              padding: 0;
              margin: 0;
              background: var(--primary-color);
            }
        visibility:
          - condition: screen
            media_query: '(min-width: 768px)'
      - type: custom:mod-card
        card_mod:
          style:
            .: |
              ha-card {
                --ha-card-border-width: 0px;
                --ha-card-border-radius: 20px;
                background: linear-gradient(
                  to bottom right,
                  rgba(255, 255, 255, 0.15),
                  rgba(255, 255, 255, 0.05)
                );
                backdrop-filter: blur(15px);
                -webkit-backdrop-filter: blur(15px);
                box-shadow:
                  0 8px 32px 0 rgba(31, 38, 135, 0.37),
                  inset 0 0 0.5px rgba(255, 255, 255, 0.2); /* subtle inner glow */
                border: 5px solid rgba(255, 255, 255, 0.1);
                position: relative;
                overflow: hidden;
                border-radius: 10px 10px 20px 20px;
              }

              ha-card::before {
                content: '';
                position: absolute;
                top: -30%;
                left: -30%;
                width: 200%;
                height: 200%;
                background: radial-gradient(
                  circle at 30% 30%,
                  rgba(255, 255, 255, 0.3),
                  transparent 60%
                );
                transform: rotate(25deg);
                pointer-events: none;
              }
        card:
          type: horizontal-stack
          cards:
            - type: custom:button-card
              name: Home
              show_icon: true
              icon: mdi:home
              show_name: false
              styles:
                card:
                  - max-height: 50px
                  - justify-content: center
                  - align-items: center
                icon:
                  - color: black
                  - max-height: 30px
                  - max-width: 30px
                  - min-height: 30px
                  - min-width: 20px
                  - color: var(--primary-color)
                name:
                  - color: black
              tap_action:
                action: navigate
                navigation_path: home#
              card_mod:
                style: |
                  ha-card {
                    border-radius: 5px 5px 5px 15px;
                  }
            - type: conditional
              conditions:
                - entity: input_boolean.smarti_show_weather_tab
                  state: 'on'
              card:
                type: custom:button-card
                name: Rooms
                show_icon: true
                icon: mdi:weather-partly-cloudy
                show_name: false
                styles:
                  card:
                    - max-height: 50px
                    - justify-content: center
                    - align-items: center
                  icon:
                    - color: black
                    - max-height: 30px
                    - max-width: 30px
                    - min-height: 30px
                    - min-width: 20px
                    - color: var(--primary-color)
                  name:
                    - color: black
                tap_action:
                  action: navigate
                  navigation_path: rooms#
                card_mod:
                  style: |
                    ha-card {
                      border-radius: 5px 5px 5px 5px;
                    }
            - type: conditional
              conditions:
                - entity: input_boolean.smarti_show_light_tab
                  state: 'on'
              card:
                type: custom:button-card
                name: Light Control
                show_icon: true
                icon: mdi:lightbulb-group
                show_name: false
                styles:
                  card:
                    - max-height: 50px
                    - justify-content: center
                    - align-items: center
                  icon:
                    - color: black
                    - max-height: 30px
                    - max-width: 30px
                    - min-height: 30px
                    - min-width: 20px
                    - color: var(--primary-color)
                  name:
                    - color: black
                state:
                  - value: 'on'
                    styles:
                      card:
                        - background-color: '#FF7000'
                tap_action:
                  action: navigate
                  navigation_path: lights#
                card_mod:
                  style: |
                    ha-card {
                      border-radius: 5px 5px 5px 5px;   

                    }  
            - type: conditional
              conditions:
                - entity: input_boolean.smarti_show_climate_tab
                  state: 'on'
              card:
                type: custom:button-card
                name: Heating Control
                show_icon: true
                icon: mdi:thermometer-water
                show_name: false
                styles:
                  card:
                    - max-height: 50px
                    - justify-content: center
                    - align-items: center
                  icon:
                    - max-height: 30px
                    - max-width: 30px
                    - min-height: 30px
                    - min-width: 20px
                    - color: var(--primary-color)
                  name:
                    - color: black
                tap_action:
                  action: navigate
                  navigation_path: heating#
                card_mod:
                  style: |
                    ha-card {
                      border-radius: 5px 5px 5px 5px;      
                    }
            - type: conditional
              conditions:
                - entity: input_boolean.smarti_show_misc_tab
                  state: 'on'
              card:
                type: custom:button-card
                name: Multimedia
                show_icon: true
                icon: mdi:multimedia
                show_name: false
                styles:
                  card:
                    - max-height: 50px
                    - justify-content: center
                    - align-items: center
                  icon:
                    - color: black
                    - max-height: 30px
                    - max-width: 30px
                    - min-height: 30px
                    - min-width: 20px
                    - color: var(--primary-color)
                  name:
                    - color: black
                tap_action:
                  action: navigate
                  navigation_path: multimedia#
                card_mod:
                  style: |
                    ha-card {
                      border-radius: 5px 5px 5px 5px;    
                    }
            - type: conditional
              conditions:
                - entity: input_boolean.smarti_show_security_tab
                  state: 'on'
              card:
                type: custom:button-card
                name: Cameras
                show_icon: true
                icon: mdi:shield
                show_name: false
                styles:
                  card:
                    - max-height: 50px
                    - justify-content: center
                    - align-items: center
                  icon:
                    - max-height: 30px
                    - max-width: 30px
                    - min-height: 30px
                    - min-width: 20px
                    - color: var(--primary-color)
                  name:
                    - color: black
                tap_action:
                  action: navigate
                  navigation_path: cameras#
                card_mod:
                  style: |
                    ha-card {
                      border-radius: 5px 5px 5px 5px;          
                    }
            - type: conditional
              conditions:
                - entity: input_boolean.smarti_show_energy_tab
                  state: 'on'
              card:
                type: custom:button-card
                name: Power Control
                show_icon: true
                icon: mdi:lightning-bolt
                show_name: false
                styles:
                  card:
                    - max-height: 50px
                    - justify-content: center
                    - align-items: center
                  icon:
                    - max-height: 30px
                    - max-width: 30px
                    - min-height: 30px
                    - min-width: 20px
                    - color: var(--primary-color)
                  name:
                    - color: black
                tap_action:
                  action: navigate
                  navigation_path: power#
                card_mod:
                  style: |
                    ha-card {
                      border-radius: 5px 5px 5px 5px;         
                    }
            - type: custom:button-card
              name: Settings
              show_icon: true
              icon: mdi:cog
              show_name: false
              styles:
                card:
                  - max-height: 50px
                  - justify-content: center
                  - align-items: center
                icon:
                  - max-height: 30px
                  - max-width: 30px
                  - min-height: 30px
                  - min-width: 20px
                name:
                  - color: black
              tap_action:
                action: navigate
                navigation_path: settings#
              card_mod:
                style: |
                  ha-card{
                    border-radius: 5px 5px 15px 5px;
                    background-color: var(--primary-color);          
                  }  
          visibility:
            - condition: screen
              media_query: '(min-width: 0px)'
      - type: custom:gap-card
        height: 25
        visibility:
          - condition: screen
            media_query: '(min-width: 0px) and (max-width: 767px)'
      - type: custom:gap-card
        height: 25
        visibility:
          - condition: screen
            media_query: '(min-width: 0px) and (max-width: 767px)'
      - type: custom:mod-card
        card_mod:
          style:
            .: |
              ha-card {
                --ha-card-border-width: 0px;
                --ha-card-border-radius: 20px;
                --ha-card-background: transparent;
              }           
        card:
          type: horizontal-stack
          cards:
            - type: horizontal-stack
              cards:
                - type: vertical-stack
                  cards:
                    - type: custom:gap-card
                      height: 100
                    - type: custom:gap-card
                - type: vertical-stack
                  cards:
                    - type: custom:gap-card
                    - type: custom:mushroom-title-card
                      title: >-
                        {{ states('sensor.smarti_dashboard_actions_page_title')
                        }}
                      subtitle: >-
                        {{
                        states('sensor.smarti_dashboard_actions_page_subtitle')
                        }}
                      alignment: center
                    - type: custom:lottie-card
                      animation: /local/smartianimations/settings3.json
                      size: 110px
                      loop: true
                      autoplay: true
                    - type: custom:gap-card
                - type: vertical-stack
                  cards:
                    - type: custom:gap-card
                    - type: custom:gap-card
        visibility:
          - condition: screen
            media_query: '(min-width: 768px)'
      - type: horizontal-stack
        cards:
          - type: custom:button-card
            name: null
            show_icon: true
            icon: mdi:cog
            show_name: true
            styles:
              card:
                - max-height: 100px
                - justify-content: center
                - align-items: center
              icon:
                - color: var(--primary-color)
                - max-height: 50px
                - max-width: 100px
                - min-height: 20px
                - min-width: 20px
              name:
                - color: var(--primary-color)
                - font-size: 20px
                - font-type: bold
            tap_action:
              action: navigate
              navigation_path: settings2#
            card_mod:
              style: |
                ha-card{
                  border-radius: 5px;
                  box-shadow: 6.2px 12.3px 12.3px hsl(0deg 0% 0% / 0.31);
                  border: none;
                } 
          - type: custom:button-card
            name: null
            show_icon: true
            icon: mdi:chart-bar-stacked
            show_name: true
            styles:
              card:
                - max-height: 100px
                - justify-content: center
                - background: var(--primary-color)
                - align-items: center
              icon:
                - max-height: 50px
                - max-width: 100px
                - min-height: 20px
                - min-width: 20px
              name:
                - font-size: 20px
                - font-type: bold
            card_mod:
              style: |
                ha-card{
                  border-radius: 5px;
                  border: none;
                } 
        visibility:
          - condition: screen
            media_query: '(min-width: 768px)'
      - type: custom:gap-card
        height: 25
      - type: custom:button-card
        styles:
          card:
            - height: 5px
            - max-height: 10px
            - padding: 0
            - margin: 0
            - background-color: var(--primary-color);
        card_mod:
          style: |
            ha-card {
              border-radius: 1px;
              height: 2px;
              max-height: 2px;
              padding: 0;
              margin: 0;
              background: var(--primary-color);
            }
        visibility:
          - condition: screen
            media_query: '(min-width: 768px)'
      - type: custom:gap-card
        height: 25
      - type: custom:mod-card
        card_mod:
          style:
            .: |
              ha-card {
                --ha-card-border-width: 0px;
                --ha-card-border-radius:5px;
                --ha-card-background: transparent;
              } 
            tabbed-card $:
              mwc-tab:
                $: |
                  .mdc-tab--active {
                    background: linear-gradient(to left, var(--accent-color), rgb(var(--rgb-primary-color-darker))) !important;
                    border-radius: 5px 5px 0px 0px;
                  }
                  mwc-tab:hover {
                    --mdc-theme-primary: red;
                    --mdc-tab-color-default: red;
                      }
                    
        card:
          type: vertical-stack
          cards:
            - type: horizontal-stack
              cards:
                - type: custom:button-card
                  name: Settings
                  show_icon: true
                  icon: mdi:web
                  show_name: false
                  styles:
                    card:
                      - height: 100%
                      - width: 50px
                      - justify-content: center
                      - align-items: center
                      - background-color: var(--primary-color)
                    icon:
                      - scale: 2
                    name:
                      - color: black
                      - font-size: 20px
                      - font-type: bold
                - type: conditional
                  conditions:
                    - entity: binary_sensor.smarti_internet
                      state_not: unavailable
                    - entity: binary_sensor.smarti_internet
                      state_not: unknown
                  card:
                    type: custom:uptime-card
                    entity: binary_sensor.smarti_internet
                    hours_to_show: 96
                    title_adaptive_color: true
                    status_adaptive_color: true
                    icon: mdi:web
                    update_interval: 30
                    severity: 10
                    icon_adaptive_color: true
                    tooltip_adaptive_color: true
                    alias:
                      ok: Connected
                      ko: Disconnected
                    resources:
                      - url: /local/uptime-card.js
                      - type: module
            - type: markdown
              content: >
                {% if is_state('sensor.browser_mod_installed', 'True') %}

                ✅ **Browser Mod is Installed and Available!**

                {% else %}

                ⚠️ **Important:** Browser Mod is NOT installed!  

                Pop-ups will not work until Browser Mod is installed and loaded
                correctly.

                **To install Browser Mod via HACS:**

                1. Go to **HACS → Integrations**

                2. Click the **"+" (Add Integration)** button in the bottom
                right

                3. Search for **"Browser Mod"** and select it

                4. Click **Install**

                5. Restart Home Assistant after installation

                6. Once restarted, add this to your `configuration.yaml` if not
                auto-added:

                    ```yaml
                    browser_mod:
                    ```

                7. Save and restart Home Assistant again

                👉 [Click here to open the github repository for Browser
                Mod](https://github.com/thomasloven/hass-browser_mod)

                {% endif %}
              card_mod:
                style: |
                  ha-card {
                    {% if is_state('sensor.browser_mod_installed', 'True') %}
                    background-color: rgba(0, 255, 0, 0.2);
                    color: green;
                    {% else %}
                    background-color: rgba(255, 0, 0, 0.2);
                    color: red;
                    {% endif %}
                    font-weight: bold;
                    padding: 16px;
                  }
            - type: markdown
              content: >
                {% if not is_state('alarm_control_panel.alarmo', 'unavailable')
                and states('alarm_control_panel.alarmo') != 'unknown' %}

                ✅ **Alarmo is Installed and Available!**

                {% else %}

                ⚠️ **Important:** Alarmo is NOT installed or not available!  

                Alarm-related features such as arming/disarming and alarm status
                indicators will not work until Alarmo is correctly installed.

                **To install Alarmo via HACS:**

                1. Go to **HACS → Integrations**

                2. Click the **"+" (Add Integration)** button in the bottom
                right

                3. Search for **"Alarmo"** and select it

                4. Click **Install**

                5. Restart Home Assistant after installation

                6. Go to **Settings → Devices & Services → Integrations**, click
                **"Add Integration"**, then search for **Alarmo** and complete
                setup

                👉 [Click here to open the Alarmo GitHub
                page](https://github.com/nielsfaber/alarmo)

                {% endif %}
              card_mod:
                style: |
                  ha-card {
                    {% if not is_state('alarm_control_panel.alarmo', 'unavailable') and states('alarm_control_panel.alarmo') != 'unknown' %}
                    background-color: rgba(0, 255, 0, 0.2);
                    color: green;
                    {% else %}
                    background-color: rgba(255, 0, 0, 0.2);
                    color: red;
                    {% endif %}
                    font-weight: bold;
                    padding: 16px;
                  }          
            - type: markdown
              content: >
                {% if is_state('binary_sensor.smarti_internet', 'on') %}

                ✅ **Internet Sensor is Defined!**

                {% elif is_state('binary_sensor.smarti_internet', 'off') %}

                ❌ **Internet Connection is Offline!**  

                Please check your network.

                {% else %}

                ⚠️ **Ping (ICMP)**

                By adding a ping sensor named `"smarti_internet"` in the Home
                Assistant UI, you can monitor your internet connection with
                detailed statistics. Additionally, this sensor provides a
                convenient status icon in the navigation bar, allowing you to
                quickly view the state of your connection at a glance.

                **How to set up the "smarti_internet" sensor:**

                1. Go to **Settings → Devices and Services**

                2. Click **"Add Integration"**

                3. Search for **"Ping"** and add **"Ping (ICMP)"**

                4. Use **8.8.8.8** as the host and click **Submit**

                5. Go to the **Entities** tab, find the **8.8.8.8** sensor and
                open it

                6. Click the **cogwheel (⚙️)** icon

                7. Rename it to **`smarti_internet`** and save

                {% endif %}
              card_mod:
                style: |
                  ha-card {
                    {% if is_state('binary_sensor.smarti_internet', 'on') %}
                    background-color: rgba(0, 255, 0, 0.2);
                    color: green;
                    {% elif is_state('binary_sensor.smarti_internet', 'off') %}
                    background-color: rgba(255, 0, 0, 0.2);
                    color: red;
                    {% else %}
                    background-color: rgba(255, 165, 0, 0.2); /* orange */
                    color: orange;
                    {% endif %}
                    font-weight: bold;
                    padding: 16px;
                  }
            - type: markdown
              content: >
                {% if states('weather.forecast_home') not in ['unavailable',
                'unknown', ''] %}

                ✅ **Weather Forecast Sensor is Defined!**


                {% else %}

                ⚠️ **Weather Sensor Not Found!**  

                The forecast depends on a weather entity named `forecast_home`
                (i.e., `weather.forecast_home`). Without this, weather data will
                not be displayed correctly.

                **To set up the weather forecast sensor:**

                1. Go to **Settings → Devices & Services**

                2. Click **"Add Integration"**

                3. Search for and select **Met.no**

                4. When prompted, enter **Home** as the name for the weather
                entity  
                   → This will create `weather.forecast_home` automatically

                5. Complete setup and ensure the entity ID is
                `weather.forecast_home`

                After setup, you can use this sensor in dashboards, forecast
                cards, and automations.

                👉 [Learn more about the Met.no
                integration](https://www.home-assistant.io/integrations/met/)

                {% endif %}
              card_mod:
                style: |
                  ha-card {
                    {% if states('weather.forecast_home') not in ['unavailable', 'unknown', ''] %}
                    background-color: rgba(0, 255, 0, 0.2);
                    color: green;
                    {% else %}
                    background-color: rgba(255, 0, 0, 0.2);
                    color: red;
                    {% endif %}
                    font-weight: bold;
                    padding: 16px;
                  }
    background:
      opacity: 100
      alignment: center
      size: cover
      repeat: no-repeat
      attachment: fixed
      image: /local/images/smarti_images/smarti_dashboard_backgorund_image.jpg
